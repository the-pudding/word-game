import{S as Z,i as ee,s as X,l as v,e as ie,V as Ss,m as w,h as f,p as g,M as d,E as Q,W as $e,b as A,O as B,o as Et,P as _e,C as _r,X as $s,Y as js,Z as Os,r as z,n as T,u as H,_ as en,L as K,v as we,$ as rs,a0 as Is,g as he,a1 as Rs,d as fe,f as j,t as O,w as F,x,y as V,B as W,a2 as As,a as N,c as D,q as ce,a3 as Ps,a4 as lt,N as le,G as De,a5 as ft,D as Cs,a6 as Dt,a7 as Ns,a8 as Ds,a9 as ns,aa as ss,ab as tn,z as Us,ac as is,ad as Ms}from"./index-2c34249c.js";import{w as os,r as Ls}from"./index-a5e82436.js";import{g as ut,w as dt,r as xe,a as Ce,l as $r,b as as,i as ke,t as ls,d as ct,e as yt,p as vr,f as jr,o as Ne,h as Or}from"./copy-2688591c.js";import{_ as Ut}from"./preload-helper-43c63d57.js";function Bs(s,e){return s==null||e==null?NaN:s<e?-1:s>e?1:s>=e?0:NaN}const zs=Hs(Math.random);function Hs(s){return function(t,r=0,n=t.length){let o=n-(r=+r);for(;o;){const i=s()*o--|0,a=t[o+r];t[o+r]=t[i+r],t[i+r]=a}return t}}var rn={},hr={},fr=34,gt=10,dr=13;function us(s){return new Function("d","return {"+s.map(function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'}).join(",")+"}")}function Gs(s,e){var t=us(s);return function(r,n){return e(t(r),n,s)}}function nn(s){var e=Object.create(null),t=[];return s.forEach(function(r){for(var n in r)n in e||t.push(e[n]=n)}),t}function ge(s,e){var t=s+"",r=t.length;return r<e?new Array(e-r+1).join(0)+t:t}function qs(s){return s<0?"-"+ge(-s,6):s>9999?"+"+ge(s,6):ge(s,4)}function Fs(s){var e=s.getUTCHours(),t=s.getUTCMinutes(),r=s.getUTCSeconds(),n=s.getUTCMilliseconds();return isNaN(s)?"Invalid Date":qs(s.getUTCFullYear())+"-"+ge(s.getUTCMonth()+1,2)+"-"+ge(s.getUTCDate(),2)+(n?"T"+ge(e,2)+":"+ge(t,2)+":"+ge(r,2)+"."+ge(n,3)+"Z":r?"T"+ge(e,2)+":"+ge(t,2)+":"+ge(r,2)+"Z":t||e?"T"+ge(e,2)+":"+ge(t,2)+"Z":"")}function xs(s){var e=new RegExp('["'+s+`
\r]`),t=s.charCodeAt(0);function r(h,m){var p,_,b=n(h,function(S,$){if(p)return p(S,$-1);_=S,p=m?Gs(S,m):us(S)});return b.columns=_||[],b}function n(h,m){var p=[],_=h.length,b=0,S=0,$,I=_<=0,E=!1;h.charCodeAt(_-1)===gt&&--_,h.charCodeAt(_-1)===dr&&--_;function k(){if(I)return hr;if(E)return E=!1,rn;var q,C=b,G;if(h.charCodeAt(C)===fr){for(;b++<_&&h.charCodeAt(b)!==fr||h.charCodeAt(++b)===fr;);return(q=b)>=_?I=!0:(G=h.charCodeAt(b++))===gt?E=!0:G===dr&&(E=!0,h.charCodeAt(b)===gt&&++b),h.slice(C+1,q-1).replace(/""/g,'"')}for(;b<_;){if((G=h.charCodeAt(q=b++))===gt)E=!0;else if(G===dr)E=!0,h.charCodeAt(b)===gt&&++b;else if(G!==t)continue;return h.slice(C,q)}return I=!0,h.slice(C,_)}for(;($=k())!==hr;){for(var R=[];$!==rn&&$!==hr;)R.push($),$=k();m&&(R=m(R,S++))==null||p.push(R)}return p}function o(h,m){return h.map(function(p){return m.map(function(_){return u(p[_])}).join(s)})}function i(h,m){return m==null&&(m=nn(h)),[m.map(u).join(s)].concat(o(h,m)).join(`
`)}function a(h,m){return m==null&&(m=nn(h)),o(h,m).join(`
`)}function l(h){return h.map(c).join(`
`)}function c(h){return h.map(u).join(s)}function u(h){return h==null?"":h instanceof Date?Fs(h):e.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:r,parseRows:n,format:i,formatBody:a,formatRows:l,formatRow:c,formatValue:u}}var Vs=xs(","),Ws=Vs.parse;function Js(s){return Math.abs(s=Math.round(s))>=1e21?s.toLocaleString("en").replace(/,/g,""):s.toString(10)}function Ct(s,e){if((t=(s=e?s.toExponential(e-1):s.toExponential()).indexOf("e"))<0)return null;var t,r=s.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+s.slice(t+1)]}function Ks(s){return s=Ct(Math.abs(s)),s?s[1]:NaN}function Ys(s,e){return function(t,r){for(var n=t.length,o=[],i=0,a=s[0],l=0;n>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(t.substring(n-=a,n+a)),!((l+=a+1)>r));)a=s[i=(i+1)%s.length];return o.reverse().join(e)}}function Xs(s){return function(e){return e.replace(/[0-9]/g,function(t){return s[+t]})}}var Qs=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function wr(s){if(!(e=Qs.exec(s)))throw new Error("invalid format: "+s);var e;return new Ir({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}wr.prototype=Ir.prototype;function Ir(s){this.fill=s.fill===void 0?" ":s.fill+"",this.align=s.align===void 0?">":s.align+"",this.sign=s.sign===void 0?"-":s.sign+"",this.symbol=s.symbol===void 0?"":s.symbol+"",this.zero=!!s.zero,this.width=s.width===void 0?void 0:+s.width,this.comma=!!s.comma,this.precision=s.precision===void 0?void 0:+s.precision,this.trim=!!s.trim,this.type=s.type===void 0?"":s.type+""}Ir.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Zs(s){e:for(var e=s.length,t=1,r=-1,n;t<e;++t)switch(s[t]){case".":r=n=t;break;case"0":r===0&&(r=t),n=t;break;default:if(!+s[t])break e;r>0&&(r=0);break}return r>0?s.slice(0,r)+s.slice(n+1):s}var cs;function ei(s,e){var t=Ct(s,e);if(!t)return s+"";var r=t[0],n=t[1],o=n-(cs=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,i=r.length;return o===i?r:o>i?r+new Array(o-i+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Ct(s,Math.max(0,e+o-1))[0]}function sn(s,e){var t=Ct(s,e);if(!t)return s+"";var r=t[0],n=t[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}const on={"%":(s,e)=>(s*100).toFixed(e),b:s=>Math.round(s).toString(2),c:s=>s+"",d:Js,e:(s,e)=>s.toExponential(e),f:(s,e)=>s.toFixed(e),g:(s,e)=>s.toPrecision(e),o:s=>Math.round(s).toString(8),p:(s,e)=>sn(s*100,e),r:sn,s:ei,X:s=>Math.round(s).toString(16).toUpperCase(),x:s=>Math.round(s).toString(16)};function an(s){return s}var ln=Array.prototype.map,un=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function ti(s){var e=s.grouping===void 0||s.thousands===void 0?an:Ys(ln.call(s.grouping,Number),s.thousands+""),t=s.currency===void 0?"":s.currency[0]+"",r=s.currency===void 0?"":s.currency[1]+"",n=s.decimal===void 0?".":s.decimal+"",o=s.numerals===void 0?an:Xs(ln.call(s.numerals,String)),i=s.percent===void 0?"%":s.percent+"",a=s.minus===void 0?"\u2212":s.minus+"",l=s.nan===void 0?"NaN":s.nan+"";function c(h){h=wr(h);var m=h.fill,p=h.align,_=h.sign,b=h.symbol,S=h.zero,$=h.width,I=h.comma,E=h.precision,k=h.trim,R=h.type;R==="n"?(I=!0,R="g"):on[R]||(E===void 0&&(E=12),k=!0,R="g"),(S||m==="0"&&p==="=")&&(S=!0,m="0",p="=");var q=b==="$"?t:b==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",C=b==="$"?r:/[%p]/.test(R)?i:"",G=on[R],L=/[defgprs%]/.test(R);E=E===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function te(U){var Y=q,M=C,y,P,J;if(R==="c")M=G(U)+M,U="";else{U=+U;var re=U<0||1/U<0;if(U=isNaN(U)?l:G(Math.abs(U),E),k&&(U=Zs(U)),re&&+U==0&&_!=="+"&&(re=!1),Y=(re?_==="("?_:a:_==="-"||_==="("?"":_)+Y,M=(R==="s"?un[8+cs/3]:"")+M+(re&&_==="("?")":""),L){for(y=-1,P=U.length;++y<P;)if(J=U.charCodeAt(y),48>J||J>57){M=(J===46?n+U.slice(y+1):U.slice(y))+M,U=U.slice(0,y);break}}}I&&!S&&(U=e(U,1/0));var ve=Y.length+U.length+M.length,oe=ve<$?new Array($-ve+1).join(m):"";switch(I&&S&&(U=e(oe+U,oe.length?$-M.length:1/0),oe=""),p){case"<":U=Y+U+M+oe;break;case"=":U=Y+oe+U+M;break;case"^":U=oe.slice(0,ve=oe.length>>1)+Y+U+M+oe.slice(ve);break;default:U=oe+Y+U+M;break}return o(U)}return te.toString=function(){return h+""},te}function u(h,m){var p=c((h=wr(h),h.type="f",h)),_=Math.max(-8,Math.min(8,Math.floor(Ks(m)/3)))*3,b=Math.pow(10,-_),S=un[8+_/3];return function($){return p(b*$)+S}}return{format:c,formatPrefix:u}}var Ot,hs;ri({thousands:",",grouping:[3],currency:["$",""]});function ri(s){return Ot=ti(s),hs=Ot.format,Ot.formatPrefix,Ot}function cn(s,e,t){const r=s.slice();return r[5]=e[t],r}function hn(s){let e,t;return{c(){e=v("link"),this.h()},l(r){e=w(r,"LINK",{rel:!0,href:!0,as:!0,type:!0,crossorigin:!0}),this.h()},h(){g(e,"rel","preload"),g(e,"href",t=s[5]),g(e,"as","font"),g(e,"type","font/woff2"),g(e,"crossorigin","")},m(r,n){A(r,e,n)},p(r,n){n&16&&t!==(t=r[5])&&g(e,"href",t)},d(r){r&&f(e)}}}function ni(s){let e,t,r,n,o,i,a,l,c,u,h,m,p,_,b,S,$,I,E,k,R,q,C,G,L,te;document.title=e=s[0];let U=s[4],Y=[];for(let M=0;M<U.length;M+=1)Y[M]=hn(cn(s,U,M));return{c(){t=v("meta"),r=v("meta"),n=v("meta"),o=v("meta"),i=v("meta"),a=v("meta"),l=v("meta"),c=v("meta"),u=v("meta"),h=v("meta"),p=v("meta"),_=v("meta"),b=v("meta"),S=v("meta"),$=v("meta"),I=v("meta"),E=v("meta"),k=v("meta"),R=v("meta"),C=v("meta"),G=v("link");for(let M=0;M<Y.length;M+=1)Y[M].c();te=ie(),this.h()},l(M){const y=Ss('[data-svelte="svelte-1htu80s"]',document.head);t=w(y,"META",{name:!0,content:!0}),r=w(y,"META",{name:!0,content:!0}),n=w(y,"META",{name:!0,content:!0}),o=w(y,"META",{property:!0,content:!0}),i=w(y,"META",{property:!0,content:!0}),a=w(y,"META",{property:!0,content:!0}),l=w(y,"META",{property:!0,content:!0}),c=w(y,"META",{property:!0,content:!0}),u=w(y,"META",{property:!0,content:!0}),h=w(y,"META",{property:!0,content:!0}),p=w(y,"META",{property:!0,content:!0}),_=w(y,"META",{property:!0,content:!0}),b=w(y,"META",{property:!0,content:!0}),S=w(y,"META",{name:!0,content:!0}),$=w(y,"META",{name:!0,content:!0}),I=w(y,"META",{name:!0,content:!0}),E=w(y,"META",{name:!0,content:!0}),k=w(y,"META",{name:!0,content:!0}),R=w(y,"META",{name:!0,content:!0}),C=w(y,"META",{name:!0,content:!0}),G=w(y,"LINK",{rel:!0,href:!0});for(let P=0;P<Y.length;P+=1)Y[P].l(y);te=ie(),y.forEach(f),this.h()},h(){g(t,"name","description"),g(t,"content",s[1]),g(r,"name","author"),g(r,"content","The Pudding"),g(n,"name","news_keywords"),g(n,"content",s[3]),g(o,"property","og:title"),g(o,"content",s[0]),g(i,"property","og:site_name"),g(i,"content","The Pudding"),g(a,"property","og:url"),g(a,"content",s[2]),g(l,"property","og:description"),g(l,"content",s[1]),g(c,"property","og:type"),g(c,"content","article"),g(u,"property","og:locale"),g(u,"content","en_US"),g(h,"property","og:image"),g(h,"content",m=s[2]+"/assets/social-facebook.jpg"),g(p,"property","og:image:type"),g(p,"content","image/jpeg"),g(_,"property","og:image:width"),g(_,"content","1200"),g(b,"property","og:image:height"),g(b,"content","600"),g(S,"name","twitter:card"),g(S,"content","summary_large_image"),g($,"name","twitter:site"),g($,"content","https://pudding.cool"),g(I,"name","twitter:creator"),g(I,"content","@puddingviz"),g(E,"name","twitter:title"),g(E,"content",s[0]),g(k,"name","twitter:description"),g(k,"content",s[1]),g(R,"name","twitter:image:src"),g(R,"content",q=s[2]+"/assets/social-twitter.jpg"),g(C,"name","robots"),g(C,"content","max-image-preview:large"),g(G,"rel","canonical"),g(G,"href",L=s[2]+"/")},m(M,y){d(document.head,t),d(document.head,r),d(document.head,n),d(document.head,o),d(document.head,i),d(document.head,a),d(document.head,l),d(document.head,c),d(document.head,u),d(document.head,h),d(document.head,p),d(document.head,_),d(document.head,b),d(document.head,S),d(document.head,$),d(document.head,I),d(document.head,E),d(document.head,k),d(document.head,R),d(document.head,C),d(document.head,G);for(let P=0;P<Y.length;P+=1)Y[P].m(document.head,null);d(document.head,te)},p(M,[y]){if(y&1&&e!==(e=M[0])&&(document.title=e),y&2&&g(t,"content",M[1]),y&8&&g(n,"content",M[3]),y&1&&g(o,"content",M[0]),y&4&&g(a,"content",M[2]),y&2&&g(l,"content",M[1]),y&4&&m!==(m=M[2]+"/assets/social-facebook.jpg")&&g(h,"content",m),y&1&&g(E,"content",M[0]),y&2&&g(k,"content",M[1]),y&4&&q!==(q=M[2]+"/assets/social-twitter.jpg")&&g(R,"content",q),y&4&&L!==(L=M[2]+"/")&&g(G,"href",L),y&16){U=M[4];let P;for(P=0;P<U.length;P+=1){const J=cn(M,U,P);Y[P]?Y[P].p(J,y):(Y[P]=hn(J),Y[P].c(),Y[P].m(te.parentNode,te))}for(;P<Y.length;P+=1)Y[P].d(1);Y.length=U.length}},i:Q,o:Q,d(M){f(t),f(r),f(n),f(o),f(i),f(a),f(l),f(c),f(u),f(h),f(p),f(_),f(b),f(S),f($),f(I),f(E),f(k),f(R),f(C),f(G),$e(Y,M),f(te)}}}function si(s,e,t){let{title:r="Title TK"}=e,{description:n="Description TK"}=e,{url:o="https://pudding.cool"}=e,{keywords:i=""}=e,{preloadFont:a=[]}=e;return s.$$set=l=>{"title"in l&&t(0,r=l.title),"description"in l&&t(1,n=l.description),"url"in l&&t(2,o=l.url),"keywords"in l&&t(3,i=l.keywords),"preloadFont"in l&&t(4,a=l.preloadFont)},[r,n,o,i,a]}class ku extends Z{constructor(e){super(),ee(this,e,si,ni,X,{title:0,description:1,url:2,keywords:3,preloadFont:4})}}let ze,vt;const ht=os(0),fs=s=>{vt||(vt=s);const e=Math.round(s-vt);vt=s,ht.update(t=>t+e),ze=window.requestAnimationFrame(fs)},wt={start(){ze||(vt=null,ze=window.requestAnimationFrame(fs))},stop(){ze&&(window.cancelAnimationFrame(ze),ze=null)},toggle(){ze?wt.stop():wt.start()},set(s){typeof s=="number"&&ht.set(s)},reset(){ht.set(0)}},Pt=({lemmas:s,corpus:e})=>!!s.split("|").filter(r=>!!e.find(n=>n===r)).length;async function Mt(s){const t=await(await fetch(s)).text();return Ws(t)}async function ii(s){const e=`https://pudding.cool/games/words-against-strangers-data/wod-answers/${s}.csv?version=${Date.now()}`;return(await Mt(e)).map(n=>({...n,round:+n.round,timestamp:+n.timestamp,points:+n.points}))}function oi(s,e,t){let r,n,o,i,a,l;B(s,ut,p=>t(2,r=p)),B(s,dt,p=>t(3,n=p)),B(s,xe,p=>t(4,o=p)),B(s,Ce,p=>t(5,i=p)),B(s,ht,p=>t(0,a=p)),B(s,$r,p=>t(6,l=p));let c=[];const u=p=>Pt({lemmas:p,corpus:l}),h=({lemmas:p})=>{const _=!u(p);return{valid:_,reason:_?void 0:0}},m=()=>{const p=c.findIndex(_=>_.round===o&&a>=_.timestamp);if(p>-1){const[_]=c.splice(p,1),b={..._,...h(_)};_e(Ce,i.wod[o]=[...i.wod[o],b],i)}};return Et(async()=>{n||(c=await ii(r))}),s.$$.update=()=>{s.$$.dirty&1&&m()},[a]}class ai extends Z{constructor(e){super(),ee(this,e,oi,null,X,{})}}function li(s){const e=s-1;return e*e*e+1}function ui(s){return Math.pow(s,4)}function fn(s){return Object.prototype.toString.call(s)==="[object Date]"}function br(s,e){if(s===e||s!==s)return()=>s;const t=typeof s;if(t!==typeof e||Array.isArray(s)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(s)){const r=e.map((n,o)=>br(s[o],n));return n=>r.map(o=>o(n))}if(t==="object"){if(!s||!e)throw new Error("Object cannot be null");if(fn(s)&&fn(e)){s=s.getTime(),e=e.getTime();const o=e-s;return i=>new Date(s+i*o)}const r=Object.keys(e),n={};return r.forEach(o=>{n[o]=br(s[o],e[o])}),o=>{const i={};return r.forEach(a=>{i[a]=n[a](o)}),i}}if(t==="number"){const r=e-s;return n=>s+n*r}throw new Error(`Cannot interpolate ${t} values`)}function ds(s,e={}){const t=os(s);let r,n=s;function o(i,a){if(s==null)return t.set(s=i),Promise.resolve();n=i;let l=r,c=!1,{delay:u=0,duration:h=400,easing:m=Os,interpolate:p=br}=_r(_r({},e),a);if(h===0)return l&&(l.abort(),l=null),t.set(s=n),Promise.resolve();const _=$s()+u;let b;return r=js(S=>{if(S<_)return!0;c||(b=p(s,i),typeof h=="function"&&(h=h(s,i)),c=!0),l&&(l.abort(),l=null);const $=S-_;return $>h?(t.set(s=i),!1):(t.set(s=b(m($/h))),!0)}),r.promise}return{set:o,update:(i,a)=>o(i(n,s),a),subscribe:t.subscribe}}function ci(s,{delay:e=0,duration:t=400,easing:r=li,x:n=0,y:o=0,opacity:i=0}={}){const a=getComputedStyle(s),l=+a.opacity,c=a.transform==="none"?"":a.transform,u=l*(1-i);return{delay:e,duration:t,easing:r,css:(h,m)=>`
			transform: ${c} translate(${(1-h)*n}px, ${(1-h)*o}px);
			opacity: ${l-u*m}`}}function hi(s){let e,t,r,n,o,i;return{c(){e=v("li"),t=v("span"),r=z(s[1]),this.h()},l(a){e=w(a,"LI",{class:!0,style:!0});var l=T(e);t=w(l,"SPAN",{class:!0});var c=T(t);r=H(c,s[1]),c.forEach(f),l.forEach(f),this.h()},h(){g(t,"class","svelte-16xj2sf"),g(e,"class",n=en(s[3])+" svelte-16xj2sf"),g(e,"style",o=`--height: ${s[4]}px`),K(e,"wod",s[0])},m(a,l){A(a,e,l),d(e,t),d(t,r)},p(a,[l]){s=a,l&2&&we(r,s[1]),l&8&&n!==(n=en(s[3])+" svelte-16xj2sf")&&g(e,"class",n),l&16&&o!==(o=`--height: ${s[4]}px`)&&g(e,"style",o),l&9&&K(e,"wod",s[0])},i(a){i||rs(()=>{i=Is(e,ci,{y:s[2],duration:s[5]*(s[0]?.5:1),easing:ui}),i.start()})},o:Q,d(a){a&&f(e)}}}function fi(s,e,t){let r,n,o;B(s,as,m=>t(5,o=m));let{wod:i}=e,{text:a}=e,{points:l}=e,{liHeight:c}=e,{startOffset:u}=e;return ds(0,{duration:o}).set(1).then(()=>{}),s.$$set=m=>{"wod"in m&&t(0,i=m.wod),"text"in m&&t(1,a=m.text),"points"in m&&t(6,l=m.points),"liHeight"in m&&t(7,c=m.liHeight),"startOffset"in m&&t(2,u=m.startOffset)},s.$$.update=()=>{s.$$.dirty&192&&t(4,r=l*c),s.$$.dirty&1&&t(3,n=i?"combo-wod":"combo-user")},[i,a,u,n,r,o,l,c]}class di extends Z{constructor(e){super(),ee(this,e,fi,hi,X,{wod:0,text:1,points:6,liHeight:7,startOffset:2})}}function dn(s,e,t){const r=s.slice();return r[5]=e[t].valid,r[6]=e[t].text,r[7]=e[t].revealWod,r[8]=e[t].points,r}function mn(s,e){let t,r,n;return r=new di({props:{wod:e[1],valid:e[5],text:e[6],revealWod:e[7],points:e[8],liHeight:e[2],startOffset:e[3]}}),{key:s,first:null,c(){t=ie(),F(r.$$.fragment),this.h()},l(o){t=ie(),x(r.$$.fragment,o),this.h()},h(){this.first=t},m(o,i){A(o,t,i),V(r,o,i),n=!0},p(o,i){e=o;const a={};i&2&&(a.wod=e[1]),i&1&&(a.valid=e[5]),i&1&&(a.text=e[6]),i&1&&(a.revealWod=e[7]),i&1&&(a.points=e[8]),i&4&&(a.liHeight=e[2]),i&8&&(a.startOffset=e[3]),r.$set(a)},i(o){n||(j(r.$$.fragment,o),n=!0)},o(o){O(r.$$.fragment,o),n=!1},d(o){o&&f(t),W(r,o)}}}function mi(s){let e,t=[],r=new Map,n,o=s[0];const i=a=>a[6];for(let a=0;a<o.length;a+=1){let l=dn(s,o,a),c=i(l);r.set(c,t[a]=mn(c,l))}return{c(){e=v("ul");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=w(a,"UL",{class:!0});var l=T(e);for(let c=0;c<t.length;c+=1)t[c].l(l);l.forEach(f),this.h()},h(){g(e,"class","svelte-1ri275p"),K(e,"wod",s[1]),K(e,"in-modal",s[4])},m(a,l){A(a,e,l);for(let c=0;c<t.length;c+=1)t[c].m(e,null);n=!0},p(a,[l]){l&15&&(o=a[0],he(),t=Rs(t,l,i,1,a,o,r,e,As,mn,null,dn),fe()),l&2&&K(e,"wod",a[1]),l&16&&K(e,"in-modal",a[4])},i(a){if(!n){for(let l=0;l<o.length;l+=1)j(t[l]);n=!0}},o(a){for(let l=0;l<t.length;l+=1)O(t[l]);n=!1},d(a){a&&f(e);for(let l=0;l<t.length;l+=1)t[l].d()}}}function pi(s,e,t){let r;B(s,ke,l=>t(4,r=l));let{guesses:n}=e,{wod:o=!1}=e,{liHeight:i}=e,{startOffset:a}=e;return s.$$set=l=>{"guesses"in l&&t(0,n=l.guesses),"wod"in l&&t(1,o=l.wod),"liHeight"in l&&t(2,i=l.liHeight),"startOffset"in l&&t(3,a=l.startOffset)},[n,o,i,a,r]}class ms extends Z{constructor(e){super(),ee(this,e,pi,mi,X,{guesses:0,wod:1,liHeight:2,startOffset:3})}}function gi(s){let e,t,r,n,o,i,a;return{c(){e=v("div"),t=v("div"),r=v("span"),n=z(s[0]),o=N(),i=v("p"),a=z(s[1]),this.h()},l(l){e=w(l,"DIV",{class:!0,style:!0});var c=T(e);t=w(c,"DIV",{class:!0});var u=T(t);r=w(u,"SPAN",{class:!0});var h=T(r);n=H(h,s[0]),h.forEach(f),u.forEach(f),o=D(c),i=w(c,"P",{class:!0});var m=T(i);a=H(m,s[1]),m.forEach(f),c.forEach(f),this.h()},h(){g(r,"class","points svelte-zomswa"),g(t,"class","pill combo-mark svelte-zomswa"),K(t,"triple",s[5]),K(t,"above",s[2]),K(t,"below",s[3]),K(t,"hasArrowBelow",s[7]),ce(t,"bottom",s[6],!1),g(i,"class","name svelte-zomswa"),g(e,"class","wrapper svelte-zomswa"),ce(e,"--delay",s[8]+"ms"),ce(e,"--gutter-width",ps+"px"),K(e,"wod",s[4]),K(e,"in-modal",s[9])},m(l,c){A(l,e,c),d(e,t),d(t,r),d(r,n),d(e,o),d(e,i),d(i,a)},p(l,[c]){c&1&&we(n,l[0]),c&32&&K(t,"triple",l[5]),c&4&&K(t,"above",l[2]),c&8&&K(t,"below",l[3]),c&128&&K(t,"hasArrowBelow",l[7]),c&64&&ce(t,"bottom",l[6],!1),c&2&&we(a,l[1]),c&256&&ce(e,"--delay",l[8]+"ms"),c&16&&K(e,"wod",l[4]),c&512&&K(e,"in-modal",l[9])},i:Q,o:Q,d(l){l&&f(e)}}}const ps=36;function _i(s,e,t){let r,n,o,i,a,l,c;B(s,as,_=>t(8,l=_)),B(s,ke,_=>t(9,c=_));let{points:u}=e,{name:h}=e,{y:m=0}=e,{above:p}=e;return s.$$set=_=>{"points"in _&&t(0,u=_.points),"name"in _&&t(1,h=_.name),"y"in _&&t(10,m=_.y),"above"in _&&t(2,p=_.above)},s.$$.update=()=>{s.$$.dirty&2&&t(4,r=h!=="you"),s.$$.dirty&1040&&t(3,n=r?m<=ps:m<=0),s.$$.dirty&25&&t(7,o=r&&n&&u>1),s.$$.dirty&1048&&t(6,i=`${r&&n?0:m}px`),s.$$.dirty&1&&t(5,a=u>99)},[u,h,p,n,r,a,i,o,l,c,m]}class gs extends Z{constructor(e){super(),ee(this,e,_i,gi,X,{points:0,name:1,y:10,above:2})}}const pn={"20rem":"(min-width: 20rem)","30rem":"(min-width: 30rem)","40rem":"(min-width: 40rem)","50rem":"(min-width: 50rem)","60rem":"(min-width: 60rem)","70rem":"(min-width: 70rem)","80rem":"(min-width: 80rem)",reducedMotion:"(prefers-reduced-motion: reduce)"};function vi(s){const e={classNames:""},t=[];for(let r in s)e[r]=s[r].matches,e[r]&&t.push(`mq-${r}`);return e.classNames=t.join(" "),e}const wi=Ls({},s=>{const e={},t=()=>s(vi(e));{for(let r in pn)e[r]=window.matchMedia(pn[r]),e[r].addListener(t);t()}return()=>{for(let r in e)e[r].removeListener(t)}});function gn(s){let e,t,r,n,o;return e=new ms({props:{guesses:s[4],wod:!0,liHeight:s[3]}}),n=new gs({props:{name:s[11].name,points:s[6].wod,y:s[1],above:s[7]}}),{c(){t=v("div"),F(e.$$.fragment),r=N(),F(n.$$.fragment),this.h()},l(i){t=w(i,"DIV",{style:!0});var a=T(t);x(e.$$.fragment,a),r=D(i),x(n.$$.fragment,i),this.h()},h(){ce(t,"display","contents"),ce(t,"--offsetY",s[9])},m(i,a){A(i,t,a),V(e,t,null),A(i,r,a),V(n,i,a),o=!0},p(i,a){a&512&&ce(t,"--offsetY",i[9]);const l={};a&16&&(l.guesses=i[4]),a&8&&(l.liHeight=i[3]),e.$set(l);const c={};a&2048&&(c.name=i[11].name),a&64&&(c.points=i[6].wod),a&2&&(c.y=i[1]),a&128&&(c.above=i[7]),n.$set(c)},i(i){o||(j(e.$$.fragment,i),j(n.$$.fragment,i),o=!0)},o(i){O(e.$$.fragment,i),O(n.$$.fragment,i),o=!1},d(i){i&&f(t),W(e,i),i&&f(r),W(n,i)}}}function bi(s){let e,t,r,n,o,i,a,l;t=new gs({props:{name:"you",points:s[6].user,y:s[2]}}),n=new ms({props:{guesses:s[5],liHeight:s[3],startOffset:s[8]}});let c=!s[10]&&gn(s);return{c(){e=v("div"),F(t.$$.fragment),r=N(),o=v("div"),F(n.$$.fragment),i=N(),c&&c.c(),this.h()},l(u){e=w(u,"DIV",{id:!0,class:!0});var h=T(e);x(t.$$.fragment,h),r=D(h),o=w(h,"DIV",{style:!0});var m=T(o);x(n.$$.fragment,m),i=D(h),c&&c.l(h),h.forEach(f),this.h()},h(){ce(o,"display","contents"),ce(o,"--offsetY",s[9]),g(e,"id","play-guesses"),g(e,"class","svelte-9xp0da"),rs(()=>s[22].call(e))},m(u,h){A(u,e,h),V(t,e,null),d(e,r),d(e,o),V(n,o,null),d(e,i),c&&c.m(e,null),a=Ps(e,s[22].bind(e)),l=!0},p(u,[h]){const m={};h&64&&(m.points=u[6].user),h&4&&(m.y=u[2]),t.$set(m),h&512&&ce(o,"--offsetY",u[9]);const p={};h&32&&(p.guesses=u[5]),h&8&&(p.liHeight=u[3]),h&256&&(p.startOffset=u[8]),n.$set(p),u[10]?c&&(he(),O(c,1,1,()=>{c=null}),fe()):c?(c.p(u,h),h&1024&&j(c,1)):(c=gn(u),c.c(),j(c,1),c.m(e,null))},i(u){l||(j(t.$$.fragment,u),j(n.$$.fragment,u),j(c),l=!0)},o(u){O(t.$$.fragment,u),O(n.$$.fragment,u),O(c),l=!1},d(u){u&&f(e),W(t),W(n),c&&c.d(),a()}}}const yi=.75,_n=2;function ki(s,e,t){let r,n,o,i,a,l,c,u,h,m,p,_,b,S,$,I,E,k,R,q,C;B(s,ls,U=>t(6,E=U)),B(s,Ce,U=>t(20,k=U)),B(s,wi,U=>t(21,R=U)),B(s,dt,U=>t(10,q=U)),B(s,ct,U=>t(11,C=U));const G=U=>U.reason===void 0;let L=0;function te(){L=this.clientHeight,t(0,L)}return s.$$.update=()=>{s.$$.dirty&2097152&&t(3,r=R["40rem"]?32:24),s.$$.dirty&1048576&&t(5,n=[].concat(...k.user).filter(G)),s.$$.dirty&1048576&&t(4,o=[].concat(...k.wod).filter(G)),s.$$.dirty&32&&t(19,i=n.length*_n),s.$$.dirty&16&&t(18,a=o.length*_n),s.$$.dirty&524360&&t(13,l=E.user*r-i),s.$$.dirty&262216&&t(17,c=E.wod*r-a),s.$$.dirty&139264&&t(12,u=c-l),s.$$.dirty&1&&t(14,h=L*yi),s.$$.dirty&24576&&t(16,m=l-h),s.$$.dirty&65536&&t(15,p=Math.max(0,m)),s.$$.dirty&32768&&t(9,_=`${p}px`),s.$$.dirty&81921&&t(8,b=(L-h+Math.min(0,m)*-1)*-1),s.$$.dirty&57344&&t(2,S=p>0?h:l),s.$$.dirty&4101&&t(1,$=Math.min(L,Math.max(0,u+S))),s.$$.dirty&3&&t(7,I=$===L)},[L,$,S,r,o,n,E,I,b,_,q,C,u,l,h,p,m,c,a,i,k,R,te]}class Ei extends Z{constructor(e){super(),ee(this,e,ki,bi,X,{})}}function Ti(s){let e,t,r,n,o,i,a,l,c,u,h,m;return{c(){e=v("div"),t=v("form"),r=v("div"),n=v("div"),o=z(s[0]),i=N(),a=v("input"),l=N(),c=v("button"),u=z("\u2192"),this.h()},l(p){e=w(p,"DIV",{id:!0,class:!0});var _=T(e);t=w(_,"FORM",{class:!0});var b=T(t);r=w(b,"DIV",{class:!0});var S=T(r);n=w(S,"DIV",{class:!0,"aria-hidden":!0});var $=T(n);o=H($,s[0]),$.forEach(f),i=D(S),a=w(S,"INPUT",{spellcheck:!0,maxlength:!0,placeholder:!0,class:!0}),l=D(S),c=w(S,"BUTTON",{type:!0,class:!0});var I=T(c);u=H(I,"\u2192"),I.forEach(f),S.forEach(f),b.forEach(f),_.forEach(f),this.h()},h(){g(n,"class","bg svelte-14j8urc"),g(n,"aria-hidden","true"),g(a,"spellcheck","false"),g(a,"maxlength","15"),g(a,"placeholder","enter word"),a.disabled=s[2],g(a,"class","svelte-14j8urc"),g(c,"type","submit"),g(c,"class","svelte-14j8urc"),g(r,"class","box svelte-14j8urc"),g(t,"class","svelte-14j8urc"),g(e,"id","play-input"),g(e,"class","svelte-14j8urc"),K(e,"in-modal",s[3])},m(p,_){A(p,e,_),d(e,t),d(t,r),d(r,n),d(n,o),d(r,i),d(r,a),lt(a,s[0]),s[8](a),d(r,l),d(r,c),d(c,u),h||(m=[le(a,"input",s[7]),le(t,"submit",s[4])],h=!0)},p(p,[_]){_&1&&we(o,p[0]),_&4&&(a.disabled=p[2]),_&1&&a.value!==p[0]&&lt(a,p[0]),_&8&&K(e,"in-modal",p[3])},i:Q,o:Q,d(p){p&&f(e),s[8](null),h=!1,De(m)}}}function Si(s,e,t){let r,n,o;B(s,yt,b=>t(6,n=b)),B(s,ke,b=>t(3,o=b));const i=ft();let{value:a=""}=e;const l=()=>t(0,a="");let c;const u=()=>{a&&i("submit",a),t(0,a="")},h=b=>{b.preventDefault(),t(0,a=a.trim().toLowerCase()),u()},m=async()=>{await Cs(),c.focus()};function p(){a=this.value,t(0,a)}function _(b){Dt[b?"unshift":"push"](()=>{c=b,t(1,c)})}return s.$$set=b=>{"value"in b&&t(0,a=b.value)},s.$$.update=()=>{s.$$.dirty&1&&a.length*20,s.$$.dirty&64&&t(2,r=!n),s.$$.dirty&64&&n&&m()},[a,c,r,o,h,l,n,p,_]}class $i extends Z{constructor(e){super(),ee(this,e,Si,Ti,X,{value:0,reset:5})}get reset(){return this.$$.ctx[5]}}const ji=[{row:0,value:"q"},{row:0,value:"w"},{row:0,value:"e"},{row:0,value:"r"},{row:0,value:"t"},{row:0,value:"y"},{row:0,value:"u"},{row:0,value:"i"},{row:0,value:"o"},{row:0,value:"p"},{row:1,value:"a"},{row:1,value:"s"},{row:1,value:"d"},{row:1,value:"f"},{row:1,value:"g"},{row:1,value:"h"},{row:1,value:"j"},{row:1,value:"k"},{row:1,value:"l"},{row:2,value:"Shift"},{row:2,value:"z"},{row:2,value:"x"},{row:2,value:"c"},{row:2,value:"v"},{row:2,value:"b"},{row:2,value:"n"},{row:2,value:"m"},{row:2,value:"Backspace"},{row:3,value:"Page1"},{row:3,value:","},{row:3,value:"Space"},{row:3,value:"."},{row:3,value:"Enter"},{row:0,value:"1",page:1},{row:0,value:"2",page:1},{row:0,value:"3",page:1},{row:0,value:"4",page:1},{row:0,value:"5",page:1},{row:0,value:"6",page:1},{row:0,value:"7",page:1},{row:0,value:"8",page:1},{row:0,value:"9",page:1},{row:0,value:"0",page:1},{row:1,value:"!",page:1},{row:1,value:"@",page:1},{row:1,value:"#",page:1},{row:1,value:"$",page:1},{row:1,value:"%",page:1},{row:1,value:"^",page:1},{row:1,value:"&",page:1},{row:1,value:"*",page:1},{row:1,value:"(",page:1},{row:1,value:")",page:1},{row:2,value:"-",page:1},{row:2,value:"_",page:1},{row:2,value:"=",page:1},{row:2,value:"+",page:1},{row:2,value:";",page:1},{row:2,value:":",page:1},{row:2,value:"'",page:1},{row:2,value:'"',page:1},{row:2,value:"<",page:1},{row:2,value:">",page:1},{row:3,value:"Page0",page:1},{row:3,value:"/",page:1},{row:3,value:"?",page:1},{row:3,value:"[",page:1},{row:3,value:"]",page:1},{row:3,value:"{",page:1},{row:3,value:"}",page:1},{row:3,value:"|",page:1},{row:3,value:"\\",page:1},{row:3,value:"~",page:1}],Oi=[{row:0,value:"q"},{row:0,value:"w"},{row:0,value:"e"},{row:0,value:"r"},{row:0,value:"t"},{row:0,value:"y"},{row:0,value:"u"},{row:0,value:"i"},{row:0,value:"o"},{row:0,value:"p"},{row:1,value:"a"},{row:1,value:"s"},{row:1,value:"d"},{row:1,value:"f"},{row:1,value:"g"},{row:1,value:"h"},{row:1,value:"j"},{row:1,value:"k"},{row:1,value:"l"},{row:2,value:"z"},{row:2,value:"x"},{row:2,value:"c"},{row:2,value:"v"},{row:2,value:"b"},{row:2,value:"n"},{row:2,value:"m"},{row:2,value:"Backspace"}],Ii=[{row:0,value:"q"},{row:0,value:"w"},{row:0,value:"e"},{row:0,value:"r"},{row:0,value:"t"},{row:0,value:"y"},{row:0,value:"u"},{row:0,value:"i"},{row:0,value:"o"},{row:0,value:"p"},{row:1,value:"a"},{row:1,value:"s"},{row:1,value:"d"},{row:1,value:"f"},{row:1,value:"g"},{row:1,value:"h"},{row:1,value:"j"},{row:1,value:"k"},{row:1,value:"l"},{row:2,value:"Enter"},{row:2,value:"z"},{row:2,value:"x"},{row:2,value:"c"},{row:2,value:"v"},{row:2,value:"b"},{row:2,value:"n"},{row:2,value:"m"},{row:2,value:"Backspace"}],Ri=[{row:0,value:"a"},{row:0,value:"z"},{row:0,value:"e"},{row:0,value:"r"},{row:0,value:"t"},{row:0,value:"y"},{row:0,value:"u"},{row:0,value:"i"},{row:0,value:"o"},{row:0,value:"p"},{row:1,value:"q"},{row:1,value:"s"},{row:1,value:"d"},{row:1,value:"f"},{row:1,value:"g"},{row:1,value:"h"},{row:1,value:"j"},{row:1,value:"k"},{row:1,value:"l"},{row:1,value:"m"},{row:2,value:"Shift"},{row:2,value:"w"},{row:2,value:"x"},{row:2,value:"c"},{row:2,value:"v"},{row:2,value:"b"},{row:2,value:"n"},{row:2,value:"Backspace"},{row:3,value:"Page1"},{row:3,value:","},{row:3,value:"Space"},{row:3,value:"."},{row:3,value:"Enter"},{row:0,value:"1",page:1},{row:0,value:"2",page:1},{row:0,value:"3",page:1},{row:0,value:"4",page:1},{row:0,value:"5",page:1},{row:0,value:"6",page:1},{row:0,value:"7",page:1},{row:0,value:"8",page:1},{row:0,value:"9",page:1},{row:0,value:"0",page:1},{row:1,value:"!",page:1},{row:1,value:"@",page:1},{row:1,value:"#",page:1},{row:1,value:"$",page:1},{row:1,value:"%",page:1},{row:1,value:"^",page:1},{row:1,value:"&",page:1},{row:1,value:"*",page:1},{row:1,value:"(",page:1},{row:1,value:")",page:1},{row:2,value:"-",page:1},{row:2,value:"_",page:1},{row:2,value:"=",page:1},{row:2,value:"+",page:1},{row:2,value:";",page:1},{row:2,value:":",page:1},{row:2,value:"'",page:1},{row:2,value:'"',page:1},{row:2,value:"<",page:1},{row:2,value:">",page:1},{row:3,value:"Page0",page:1},{row:3,value:"/",page:1},{row:3,value:"?",page:1},{row:3,value:"[",page:1},{row:3,value:"]",page:1},{row:3,value:"{",page:1},{row:3,value:"}",page:1},{row:3,value:"|",page:1},{row:3,value:"\\",page:1},{row:3,value:"~",page:1}],Ai=[{row:0,value:"a"},{row:0,value:"z"},{row:0,value:"e"},{row:0,value:"r"},{row:0,value:"t"},{row:0,value:"y"},{row:0,value:"u"},{row:0,value:"i"},{row:0,value:"o"},{row:0,value:"p"},{row:1,value:"q"},{row:1,value:"s"},{row:1,value:"d"},{row:1,value:"f"},{row:1,value:"g"},{row:1,value:"h"},{row:1,value:"j"},{row:1,value:"k"},{row:1,value:"l"},{row:1,value:"m"},{row:2,value:"w"},{row:2,value:"x"},{row:2,value:"c"},{row:2,value:"v"},{row:2,value:"b"},{row:2,value:"n"},{row:2,value:"Backspace"}],Pi=[{row:0,value:"a"},{row:0,value:"z"},{row:0,value:"e"},{row:0,value:"r"},{row:0,value:"t"},{row:0,value:"y"},{row:0,value:"u"},{row:0,value:"i"},{row:0,value:"o"},{row:0,value:"p"},{row:1,value:"q"},{row:1,value:"s"},{row:1,value:"d"},{row:1,value:"f"},{row:1,value:"g"},{row:1,value:"h"},{row:1,value:"j"},{row:1,value:"k"},{row:1,value:"l"},{row:1,value:"m"},{row:2,value:"Enter"},{row:2,value:"w"},{row:2,value:"x"},{row:2,value:"c"},{row:2,value:"v"},{row:2,value:"b"},{row:2,value:"n"},{row:2,value:"Backspace"}],Ci='<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-delete"><path d="M21 4H8l-7 8 7 8h13a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"></path><line x1="18" y1="9" x2="12" y2="15"></line><line x1="12" y1="9" x2="18" y2="15"></line></svg>',Ni='<svg width="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-corner-down-left"><polyline points="9 10 4 15 9 20"></polyline><path d="M20 4v7a4 4 0 0 1-4 4H4"></path></svg>';function vn(s,e,t){const r=s.slice();return r[27]=e[t],r[29]=t,r}function wn(s,e,t){const r=s.slice();return r[30]=e[t],r}function bn(s,e,t){const r=s.slice();return r[33]=e[t].value,r[34]=e[t].display,r}function Di(s){let e=s[34]+"",t;return{c(){t=z(e)},l(r){t=H(r,e)},m(r,n){A(r,t,n)},p(r,n){n[0]&8&&e!==(e=r[34]+"")&&we(t,e)},d(r){r&&f(t)}}}function Ui(s){let e,t=s[34]+"",r;return{c(){e=new Ns(!1),r=ie(),this.h()},l(n){e=Ds(n,!1),r=ie(),this.h()},h(){e.a=r},m(n,o){e.m(t,n,o),A(n,r,o)},p(n,o){o[0]&8&&t!==(t=n[34]+"")&&e.p(t)},d(n){n&&f(r),n&&e.d()}}}function yn(s){let e,t,r,n,o;function i(p,_){return _[0]&8&&(t=null),t==null&&(t=!!p[34].includes("<svg")),t?Ui:Di}let a=i(s,[-1,-1]),l=a(s);function c(...p){return s[19](s[33],...p)}function u(...p){return s[20](s[33],...p)}function h(){return s[21](s[33])}function m(){return s[22](s[33])}return{c(){e=v("button"),l.c(),this.h()},l(p){e=w(p,"BUTTON",{class:!0});var _=T(e);l.l(_),_.forEach(f),this.h()},h(){g(e,"class",r="key key--"+s[33]+" "+(s[0][s[33]]||"")+" svelte-jsnwng"),K(e,"single",s[33].length===1),K(e,"active",s[33]===s[2])},m(p,_){A(p,e,_),l.m(e,null),n||(o=[le(e,"touchstart",c),le(e,"mousedown",u),le(e,"touchend",h,{passive:!0}),le(e,"mouseup",m)],n=!0)},p(p,_){s=p,a===(a=i(s,_))&&l?l.p(s,_):(l.d(1),l=a(s),l&&(l.c(),l.m(e,null))),_[0]&9&&r!==(r="key key--"+s[33]+" "+(s[0][s[33]]||"")+" svelte-jsnwng")&&g(e,"class",r),_[0]&9&&K(e,"single",s[33].length===1),_[0]&13&&K(e,"active",s[33]===s[2])},d(p){p&&f(e),l.d(),n=!1,De(o)}}}function kn(s){let e,t=s[30],r=[];for(let n=0;n<t.length;n+=1)r[n]=yn(bn(s,t,n));return{c(){e=v("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=w(n,"DIV",{class:!0});var o=T(e);for(let i=0;i<r.length;i+=1)r[i].l(o);o.forEach(f),this.h()},h(){g(e,"class","row row--"+s[29]+" svelte-jsnwng")},m(n,o){A(n,e,o);for(let i=0;i<r.length;i+=1)r[i].m(e,null)},p(n,o){if(o[0]&61){t=n[30];let i;for(i=0;i<t.length;i+=1){const a=bn(n,t,i);r[i]?r[i].p(a,o):(r[i]=yn(a),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=t.length}},d(n){n&&f(e),$e(r,n)}}}function En(s){let e,t,r=s[27],n=[];for(let o=0;o<r.length;o+=1)n[o]=kn(wn(s,r,o));return{c(){e=v("div");for(let o=0;o<n.length;o+=1)n[o].c();t=N(),this.h()},l(o){e=w(o,"DIV",{class:!0});var i=T(e);for(let a=0;a<n.length;a+=1)n[a].l(i);t=D(i),i.forEach(f),this.h()},h(){g(e,"class","page svelte-jsnwng"),K(e,"visible",s[29]===s[1])},m(o,i){A(o,e,i);for(let a=0;a<n.length;a+=1)n[a].m(e,null);d(e,t)},p(o,i){if(i[0]&61){r=o[27];let a;for(a=0;a<r.length;a+=1){const l=wn(o,r,a);n[a]?n[a].p(l,i):(n[a]=kn(l),n[a].c(),n[a].m(e,t))}for(;a<n.length;a+=1)n[a].d(1);n.length=r.length}i[0]&2&&K(e,"visible",o[29]===o[1])},d(o){o&&f(e),$e(n,o)}}}function Mi(s){let e,t=s[3],r=[];for(let n=0;n<t.length;n+=1)r[n]=En(vn(s,t,n));return{c(){e=v("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=w(n,"DIV",{class:!0});var o=T(e);for(let i=0;i<r.length;i+=1)r[i].l(o);o.forEach(f),this.h()},h(){g(e,"class","svelte-keyboard")},m(n,o){A(n,e,o);for(let i=0;i<r.length;i+=1)r[i].m(e,null)},p(n,o){if(o[0]&63){t=n[3];let i;for(i=0;i<t.length;i+=1){const a=vn(n,t,i);r[i]?r[i].p(a,o):(r[i]=En(a),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=t.length}},i:Q,o:Q,d(n){n&&f(e),$e(r,n)}}}const Li="abcdefghijklmnopqrstuvwxyz";function Bi(s,e,t){let r,n,o,i,a,l,c,u,h,{custom:m}=e,{localizationLayout:p="qwerty"}=e,{layout:_="standard"}=e,{noSwap:b=[]}=e,{keyClass:S={}}=e,$=0,I=!1,E;const k={qwerty:{standard:ji,crossword:Oi,wordle:Ii},azerty:{standard:Ri,crossword:Ai,wordle:Pi}},R=ft(),q={Page0:"abc",Page1:"?123",Space:" ",Shift:"abc",Enter:Ni,Backspace:Ci},C=y=>[...new Set(y)],G=(y,P)=>{if(y.preventDefault(),t(2,E=P),P.includes("Page"))t(1,$=+P.substr(-1));else if(P==="Shift")t(10,I=!I);else{let J=P;I&&Li.includes(P)&&(J=P.toUpperCase()),R("keydown",J)}return y.stopPropagation(),!1},L=y=>{setTimeout(()=>{y===E&&t(2,E=void 0)},50)},te=(y,P)=>G(P,y),U=(y,P)=>G(P,y),Y=y=>L(y),M=y=>L(y);return s.$$set=y=>{"custom"in y&&t(6,m=y.custom),"localizationLayout"in y&&t(7,p=y.localizationLayout),"layout"in y&&t(8,_=y.layout),"noSwap"in y&&t(9,b=y.noSwap),"keyClass"in y&&t(0,S=y.keyClass)},s.$$.update=()=>{s.$$.dirty[0]&448&&t(18,r=m||k[p][_]||standard),s.$$.dirty[0]&263680&&t(17,n=r.map(y=>{let P=y.display;const J=q[y.value];return J&&!b.includes(y.value)&&!y.noSwap&&(P=J),P||(P=I?y.value.toUpperCase():y.value),y.value==="Shift"&&(P=I?J:J.toUpperCase()),{...y,display:P}})),s.$$.dirty[0]&131072&&t(15,o=n.filter(y=>!y.page)),s.$$.dirty[0]&131072&&t(13,i=n.filter(y=>y.page)),s.$$.dirty[0]&32768&&t(14,a=C(o.map(y=>y.row))),s.$$.dirty[0]&16384&&a.sort((y,P)=>y-P),s.$$.dirty[0]&8192&&t(16,l=C(i.map(y=>y.row))),s.$$.dirty[0]&65536&&l.sort((y,P)=>y-P),s.$$.dirty[0]&49152&&t(12,c=a.map(y=>o.filter(P=>P.row===y))),s.$$.dirty[0]&24576&&t(11,u=a.map(y=>i.filter(P=>P.row===y))),s.$$.dirty[0]&6144&&t(3,h=[c,u])},[S,$,E,h,G,L,m,p,_,b,I,u,c,i,a,o,l,n,r,te,U,Y,M]}class zi extends Z{constructor(e){super(),ee(this,e,Bi,Mi,X,{custom:6,localizationLayout:7,layout:8,noSwap:9,keyClass:0},null,[-1,-1])}}function Hi(s){let e,t,r,n;return t=new zi({props:{layout:"wordle"}}),t.$on("keydown",s[1]),{c(){e=v("div"),r=v("div"),F(t.$$.fragment),this.h()},l(o){e=w(o,"DIV",{id:!0,class:!0});var i=T(e);r=w(i,"DIV",{style:!0});var a=T(r);x(t.$$.fragment,a),i.forEach(f),this.h()},h(){ce(r,"display","contents"),ce(r,"--height","42px"),ce(r,"--margin","4px"),ce(r,"--min-width","28px"),ce(r,"--background","var(--color-bg-2)"),ce(r,"--active-background","var(--color-bg-3)"),ce(r,"--color","var(--color-fg)"),g(e,"id","play-keyboard"),g(e,"class","svelte-4tpwyx"),K(e,"in-modal",s[0])},m(o,i){A(o,e,i),d(e,r),V(t,r,null),n=!0},p(o,[i]){i&1&&K(e,"in-modal",o[0])},i(o){n||(j(t.$$.fragment,o),n=!0)},o(o){O(t.$$.fragment,o),n=!1},d(o){o&&f(e),W(t)}}}function Gi(s,e,t){let r;B(s,ke,l=>t(0,r=l));const n=ft();let{value:o=""}=e;const i=()=>{o&&n("submit",o),t(2,o="")},a=l=>{l.detail==="Enter"?i():l.detail==="Backspace"?t(2,o=o.substring(0,o.length-1)):t(2,o=`${o}${l.detail}`)};return s.$$set=l=>{"value"in l&&t(2,o=l.value)},[r,a,o]}class qi extends Z{constructor(e){super(),ee(this,e,Gi,Hi,X,{value:2})}}function Fi(s){let e,t,r;return{c(){e=v("div"),t=v("div"),r=v("span"),this.h()},l(n){e=w(n,"DIV",{id:!0,class:!0});var o=T(e);t=w(o,"DIV",{class:!0});var i=T(t);r=w(i,"SPAN",{class:!0}),T(r).forEach(f),i.forEach(f),o.forEach(f),this.h()},h(){g(r,"class","progress combo-mark svelte-9jxinr"),ce(r,"width",s[0],!1),g(t,"class","margin svelte-9jxinr"),g(e,"id","play-clock"),g(e,"class","svelte-9jxinr"),K(e,"in-modal",s[1])},m(n,o){A(n,e,o),d(e,t),d(t,r)},p(n,[o]){o&1&&ce(r,"width",n[0],!1),o&2&&K(e,"in-modal",n[1])},i:Q,o:Q,d(n){n&&f(e)}}}const Tn=1e3;function xi(s,e,t){let r,n,o,i,a,l;B(s,ke,h=>t(1,i=h)),B(s,yt,h=>t(4,a=h)),B(s,ht,h=>t(5,l=h));const c=60*Tn,u=h=>{h?(wt.reset(),wt.start()):wt.stop()};return s.$$.update=()=>{s.$$.dirty&32&&t(2,o=Math.ceil((c-l)/Tn)),s.$$.dirty&4&&o<=0&&(_e(yt,a=!1,a),_e(ke,i=!0,i)),s.$$.dirty&16&&u(a),s.$$.dirty&32&&t(3,r=c-l),s.$$.dirty&8&&t(0,n=`${r/c*100}%`)},[n,i,o,r,a,l]}class Vi extends Z{constructor(e){super(),ee(this,e,xi,Fi,X,{})}}function Sn(s,e,t){const r=s.slice();return r[3]=e[t],r[5]=t,r}function $n(s){let e,t=s[3]+"",r;return{c(){e=v("li"),r=z(t),this.h()},l(n){e=w(n,"LI",{class:!0});var o=T(e);r=H(o,t),o.forEach(f),this.h()},h(){g(e,"class","svelte-q8tuv4")},m(n,o){A(n,e,o),d(e,r)},p(n,o){o&1&&t!==(t=n[3]+"")&&we(r,t)},d(n){n&&f(e)}}}function Wi(s){let e,t,r=s[0],n=[];for(let o=0;o<r.length;o+=1)n[o]=$n(Sn(s,r,o));return{c(){e=v("div"),t=v("ul");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=w(o,"DIV",{id:!0,class:!0});var i=T(e);t=w(i,"UL",{class:!0});var a=T(t);for(let l=0;l<n.length;l+=1)n[l].l(a);a.forEach(f),i.forEach(f),this.h()},h(){g(t,"class","svelte-q8tuv4"),g(e,"id","play-clue"),g(e,"class","svelte-q8tuv4"),K(e,"in-modal",s[1])},m(o,i){A(o,e,i),d(e,t);for(let a=0;a<n.length;a+=1)n[a].m(t,null)},p(o,[i]){if(i&1){r=o[0];let a;for(a=0;a<r.length;a+=1){const l=Sn(o,r,a);n[a]?n[a].p(l,i):(n[a]=$n(l),n[a].c(),n[a].m(t,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=r.length}i&2&&K(e,"in-modal",o[1])},i:Q,o:Q,d(o){o&&f(e),$e(n,o)}}}function Ji(s,e,t){let r,n;B(s,ke,i=>t(1,n=i));let{clue:o}=e;return s.$$set=i=>{"clue"in i&&t(2,o=i.clue)},s.$$.update=()=>{s.$$.dirty&4&&t(0,r=o.split("|"))},[r,n,o]}class Ki extends Z{constructor(e){super(),ee(this,e,Ji,Wi,X,{clue:2})}}function jn(s){let e,t,r=s[0].text+"",n,o,i=s[2][s[0].reason]+"",a;return{c(){e=v("p"),t=v("strong"),n=z(r),o=N(),a=z(i),this.h()},l(l){e=w(l,"P",{class:!0});var c=T(e);t=w(c,"STRONG",{});var u=T(t);n=H(u,r),u.forEach(f),o=D(c),a=H(c,i),c.forEach(f),this.h()},h(){g(e,"class","svelte-185b04q")},m(l,c){A(l,e,c),d(e,t),d(t,n),d(e,o),d(e,a)},p(l,c){c&1&&r!==(r=l[0].text+"")&&we(n,r),c&1&&i!==(i=l[2][l[0].reason]+"")&&we(a,i)},d(l){l&&f(e)}}}function Yi(s){let e,t=s[1]&&jn(s);return{c(){e=v("div"),t&&t.c(),this.h()},l(r){e=w(r,"DIV",{id:!0,class:!0});var n=T(e);t&&t.l(n),n.forEach(f),this.h()},h(){g(e,"id","play-invalid"),g(e,"class","svelte-185b04q")},m(r,n){A(r,e,n),t&&t.m(e,null)},p(r,[n]){r[1]?t?t.p(r,n):(t=jn(r),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:Q,o:Q,d(r){r&&f(e),t&&t.d()}}}const Xi=2500;function Qi(s,e,t){let r,n,o;B(s,xe,h=>t(4,n=h)),B(s,Ce,h=>t(5,o=h));let i,a=!1,l=0;const c=["(or a variation) was played by opponent","is too short","contains non-letters","is not in the word list","was already entered"],u=()=>{t(3,l=o.user[n].length),clearTimeout(i),r.valid?t(1,a=!1):(t(1,a=!0),i=setTimeout(()=>t(1,a=!1),Xi))};return s.$$.update=()=>{s.$$.dirty&48&&t(0,r=o.user[n][o.user[n].length-1]),s.$$.dirty&48&&(o.user[n].length||t(3,l=0)),s.$$.dirty&57&&r&&o.user[n].length!==l&&u()},[r,a,c,l,n,o]}class Zi extends Z{constructor(e){super(),ee(this,e,Qi,Yi,X,{})}}function eo(s){let e,t;return{c(){e=v("p"),t=z(s[0]),this.h()},l(r){e=w(r,"P",{class:!0});var n=T(e);t=H(n,s[0]),n.forEach(f),this.h()},h(){g(e,"class","countdown svelte-b6zmue")},m(r,n){A(r,e,n),d(e,t)},p(r,[n]){n&1&&we(t,r[0])},i:Q,o:Q,d(r){r&&f(e)}}}function to(s,e,t){let r,n,{start:o=3}=e,{text:i=""}=e;const a=ft(),l=i?-1:0,c=o*1e3,u=ds(o,{duration:c});return B(s,u,h=>t(4,n=h)),Et(()=>{u.set(l).then(()=>a("end"))}),s.$$set=h=>{"start"in h&&t(2,o=h.start),"text"in h&&t(3,i=h.text)},s.$$.update=()=>{s.$$.dirty&24&&t(0,r=n<0?i:Math.floor(n)+1)},[r,u,o,i,n]}class ro extends Z{constructor(e){super(),ee(this,e,to,eo,X,{start:2,text:3})}}function On(s){let e,t;return e=new ro({props:{text:"begin!"}}),e.$on("end",s[5]),{c(){F(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,n){V(e,r,n),t=!0},p:Q,i(r){t||(j(e.$$.fragment,r),t=!0)},o(r){O(e.$$.fragment,r),t=!1},d(r){W(e,r)}}}function no(s){let e,t,r,n,o,i,a,l,c,u,h,m,p,_,b;t=new Ki({props:{clue:s[3]}});let S={value:s[1]};n=new $i({props:S}),s[10](n),n.$on("submit",s[4]);let $=s[0]&&On(s);a=new Zi({}),c=new Ei({}),h=new Vi({});function I(k){s[11](k)}let E={};return s[1]!==void 0&&(E.value=s[1]),p=new qi({props:E}),Dt.push(()=>ns(p,"value",I)),p.$on("submit",s[4]),{c(){e=v("div"),F(t.$$.fragment),r=N(),F(n.$$.fragment),o=N(),$&&$.c(),i=N(),F(a.$$.fragment),l=N(),F(c.$$.fragment),u=N(),F(h.$$.fragment),m=N(),F(p.$$.fragment),this.h()},l(k){e=w(k,"DIV",{class:!0});var R=T(e);x(t.$$.fragment,R),r=D(R),x(n.$$.fragment,R),o=D(R),$&&$.l(R),i=D(R),x(a.$$.fragment,R),l=D(R),x(c.$$.fragment,R),u=D(R),x(h.$$.fragment,R),m=D(R),x(p.$$.fragment,R),R.forEach(f),this.h()},h(){g(e,"class","svelte-foxip5")},m(k,R){A(k,e,R),V(t,e,null),d(e,r),V(n,e,null),d(e,o),$&&$.m(e,null),d(e,i),V(a,e,null),d(e,l),V(c,e,null),d(e,u),V(h,e,null),d(e,m),V(p,e,null),b=!0},p(k,[R]){const q={};R&8&&(q.clue=k[3]),t.$set(q);const C={};R&2&&(C.value=k[1]),n.$set(C),k[0]?$?($.p(k,R),R&1&&j($,1)):($=On(k),$.c(),j($,1),$.m(e,i)):$&&(he(),O($,1,1,()=>{$=null}),fe());const G={};!_&&R&2&&(_=!0,G.value=k[1],ss(()=>_=!1)),p.$set(G)},i(k){b||(j(t.$$.fragment,k),j(n.$$.fragment,k),j($),j(a.$$.fragment,k),j(c.$$.fragment,k),j(h.$$.fragment,k),j(p.$$.fragment,k),b=!0)},o(k){O(t.$$.fragment,k),O(n.$$.fragment,k),O($),O(a.$$.fragment,k),O(c.$$.fragment,k),O(h.$$.fragment,k),O(p.$$.fragment,k),b=!1},d(k){k&&f(e),W(t),s[10](null),W(n),$&&$.d(),W(a),W(c),W(h),W(p)}}}function so(s,e,t){let r,n,o,i,a,l,c,u,h;B(s,yt,y=>t(13,i=y)),B(s,xe,y=>t(9,a=y)),B(s,vr,y=>t(14,l=y)),B(s,Ce,y=>t(15,c=y)),B(s,ht,y=>t(16,u=y)),B(s,$r,y=>t(17,h=y));let{clues:m}=e,{answers:p}=e,_=!1,b="",S;const $=y=>{const P=n.find(J=>J.word===y);return P?P.lemmas:""},I=y=>!o.includes(y),E=({text:y,lemmas:P})=>Pt({lemmas:P,corpus:h}),k=({text:y,lemmas:P})=>{const J=c.user[a].map(re=>re.lemmas);return Pt({lemmas:P,corpus:J})},R=y=>new RegExp(/([^a-z])/,"g").test(y),q=({text:y,lemmas:P})=>{let J=!0,re;return y.length<4?(J=!1,re=1):R(y)?(J=!1,re=2):I(y)?(J=!1,re=3):k({text:y,lemmas:P})?(J=!1,re=4):E({text:y,lemmas:P})&&(J=!1,re=0),{valid:J,reason:re}},C=({text:y,timestamp:P})=>{const{points:J}=n.find(re=>re.word===y);return+J},G=y=>{c.wod[a].forEach(P=>{const J=P.lemmas.split("|");Pt({lemmas:y,corpus:J})&&(P.revealWod=!0)})},L=async({detail:y})=>{const P=y,J=$(P),{valid:re,reason:ve}=q({text:P,lemmas:J}),oe=u,Oe=re?C({text:P,timestamp:oe}):void 0,Ie={text:P,lemmas:J,points:Oe,timestamp:oe,round:a,valid:re,reason:ve};_e(Ce,c.user[a]=[...c.user[a],Ie],c),G(J)},te=()=>{t(0,_=!0),S&&S.reset()},U=()=>{_e(yt,i=!0,i),t(0,_=!1)};function Y(y){Dt[y?"unshift":"push"](()=>{S=y,t(2,S)})}function M(y){b=y,t(1,b)}return s.$$set=y=>{"clues"in y&&t(6,m=y.clues),"answers"in y&&t(7,p=y.answers)},s.$$.update=()=>{s.$$.dirty&576&&t(3,r=m[a]),s.$$.dirty&640&&t(8,n=p[a]),s.$$.dirty&256&&_e(vr,l=n,l),s.$$.dirty&256&&(o=n.map(y=>y.word)),s.$$.dirty&512&&te()},[_,b,S,r,L,U,m,p,n,a,Y,M]}class io extends Z{constructor(e){super(),ee(this,e,so,no,X,{clues:6,answers:7})}}function In(s,e,t){const r=s.slice();return r[7]=e[t],r}function mr(s){let e,t=s[7]+"",r,n=[{class:r="chunk "+s[1]+" svelte-1rapxyz"}],o={};for(let i=0;i<n.length;i+=1)o=_r(o,n[i]);return{c(){e=v(s[0]),this.h()},l(i){e=w(i,(s[0]||"null").toUpperCase(),{class:!0});var a=T(e);a.forEach(f),this.h()},h(){tn(e,o)},m(i,a){A(i,e,a),e.innerHTML=t},p(i,a){a&4&&t!==(t=i[7]+"")&&(e.innerHTML=t),tn(e,o=Us(n,[a&2&&r!==(r="chunk "+i[1]+" svelte-1rapxyz")&&{class:r}]))},d(i){i&&f(e)}}}function Rn(s){let e=s[0],t,r=s[0]&&mr(s);return{c(){r&&r.c(),t=ie()},l(n){r&&r.l(n),t=ie()},m(n,o){r&&r.m(n,o),A(n,t,o)},p(n,o){n[0]?e?X(e,n[0])?(r.d(1),r=mr(n),r.c(),r.m(t.parentNode,t)):r.p(n,o):(r=mr(n),r.c(),r.m(t.parentNode,t)):e&&(r.d(1),r=null),e=n[0]},d(n){n&&f(t),r&&r.d(n)}}}function oo(s){let e,t=s[2],r=[];for(let n=0;n<t.length;n+=1)r[n]=Rn(In(s,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=ie()},l(n){for(let o=0;o<r.length;o+=1)r[o].l(n);e=ie()},m(n,o){for(let i=0;i<r.length;i+=1)r[i].m(n,o);A(n,e,o)},p(n,[o]){if(o&7){t=n[2];let i;for(i=0;i<t.length;i+=1){const a=In(n,t,i);r[i]?r[i].p(a,o):(r[i]=Rn(a),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=t.length}},i:Q,o:Q,d(n){$e(r,n),n&&f(e)}}}function ao(s,e,t){let r,n,{text:o=""}=e,{max:i=o.length}=e,{space:a=!1}=e,{tag:l="span"}=e,{className:c=""}=e;return s.$$set=u=>{"text"in u&&t(3,o=u.text),"max"in u&&t(4,i=u.max),"space"in u&&t(5,a=u.space),"tag"in u&&t(0,l=u.tag),"className"in u&&t(1,c=u.className)},s.$$.update=()=>{s.$$.dirty&16&&t(6,r=new RegExp(`[\\s\\S]{1,${i}}(?!\\S)`,"g")),s.$$.dirty&104&&t(2,n=o.replace(r,`$&
`).split(`
`).map(u=>u.trim()).filter(u=>u).map((u,h)=>`${h>0&&a?"&nbsp;":""}${u}`))},[l,c,n,o,i,a,r]}class ue extends Z{constructor(e){super(),ee(this,e,ao,oo,X,{text:3,max:4,space:5,tag:0,className:1})}}function lo(s){let e,t,r;return t=new ue({props:{text:s[0],className:"combo-default",max:"44"}}),{c(){e=v("p"),F(t.$$.fragment),this.h()},l(n){e=w(n,"P",{id:!0,class:!0});var o=T(e);x(t.$$.fragment,o),o.forEach(f),this.h()},h(){g(e,"id","chunk-possible"),g(e,"class","svelte-1yvq7gq")},m(n,o){A(n,e,o),V(t,e,null),r=!0},p(n,[o]){const i={};o&1&&(i.text=n[0]),t.$set(i)},i(n){r||(j(t.$$.fragment,n),r=!0)},o(n){O(t.$$.fragment,n),r=!1},d(n){n&&f(e),W(t)}}}function uo(s,e,t){let{text:r}=e;return s.$$set=n=>{"text"in n&&t(0,r=n.text)},[r]}class co extends Z{constructor(e){super(),ee(this,e,uo,lo,X,{text:0})}}function An(s,e,t){const r=s.slice();return r[1]=e[t],r}function Pn(s){let e,t;return e=new ue({props:{text:s[1],max:"15",className:"combo-default"}}),{c(){F(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,n){V(e,r,n),t=!0},p(r,n){const o={};n&1&&(o.text=r[1]),e.$set(o)},i(r){t||(j(e.$$.fragment,r),t=!0)},o(r){O(e.$$.fragment,r),t=!1},d(r){W(e,r)}}}function ho(s){let e,t,r=s[0],n=[];for(let i=0;i<r.length;i+=1)n[i]=Pn(An(s,r,i));const o=i=>O(n[i],1,1,()=>{n[i]=null});return{c(){e=v("p");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=w(i,"P",{id:!0});var a=T(e);for(let l=0;l<n.length;l+=1)n[l].l(a);a.forEach(f),this.h()},h(){g(e,"id","chunk-wod-words-info")},m(i,a){A(i,e,a);for(let l=0;l<n.length;l+=1)n[l].m(e,null);t=!0},p(i,[a]){if(a&1){r=i[0];let l;for(l=0;l<r.length;l+=1){const c=An(i,r,l);n[l]?(n[l].p(c,a),j(n[l],1)):(n[l]=Pn(c),n[l].c(),j(n[l],1),n[l].m(e,null))}for(he(),l=r.length;l<n.length;l+=1)o(l);fe()}},i(i){if(!t){for(let a=0;a<r.length;a+=1)j(n[a]);t=!0}},o(i){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)O(n[a]);t=!1},d(i){i&&f(e),$e(n,i)}}}function fo(s,e,t){let{lines:r}=e;return s.$$set=n=>{"lines"in n&&t(0,r=n.lines)},[r]}class mo extends Z{constructor(e){super(),ee(this,e,fo,ho,X,{lines:0})}}function po(s){let e,t,r;return t=new ue({props:{text:s[0],max:"1",className:"combo-wod"}}),{c(){e=v("p"),F(t.$$.fragment),this.h()},l(n){e=w(n,"P",{id:!0,class:!0});var o=T(e);x(t.$$.fragment,o),o.forEach(f),this.h()},h(){g(e,"id","chunk-wod-words-list"),g(e,"class","svelte-rspl7a")},m(n,o){A(n,e,o),V(t,e,null),r=!0},p(n,[o]){const i={};o&1&&(i.text=n[0]),t.$set(i)},i(n){r||(j(t.$$.fragment,n),r=!0)},o(n){O(t.$$.fragment,n),r=!1},d(n){n&&f(e),W(t)}}}function go(s,e,t){let{text:r}=e;return s.$$set=n=>{"text"in n&&t(0,r=n.text)},[r]}class _o extends Z{constructor(e){super(),ee(this,e,go,po,X,{text:0})}}function Cn(s,e,t){const r=s.slice();return r[1]=e[t],r}function Nn(s){let e,t;return e=new ue({props:{text:s[1],max:"15",className:"combo-default"}}),{c(){F(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,n){V(e,r,n),t=!0},p(r,n){const o={};n&1&&(o.text=r[1]),e.$set(o)},i(r){t||(j(e.$$.fragment,r),t=!0)},o(r){O(e.$$.fragment,r),t=!1},d(r){W(e,r)}}}function vo(s){let e,t,r=s[0],n=[];for(let i=0;i<r.length;i+=1)n[i]=Nn(Cn(s,r,i));const o=i=>O(n[i],1,1,()=>{n[i]=null});return{c(){e=v("p");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=w(i,"P",{id:!0});var a=T(e);for(let l=0;l<n.length;l+=1)n[l].l(a);a.forEach(f),this.h()},h(){g(e,"id","chunk-common-words-info")},m(i,a){A(i,e,a);for(let l=0;l<n.length;l+=1)n[l].m(e,null);t=!0},p(i,[a]){if(a&1){r=i[0];let l;for(l=0;l<r.length;l+=1){const c=Cn(i,r,l);n[l]?(n[l].p(c,a),j(n[l],1)):(n[l]=Nn(c),n[l].c(),j(n[l],1),n[l].m(e,null))}for(he(),l=r.length;l<n.length;l+=1)o(l);fe()}},i(i){if(!t){for(let a=0;a<r.length;a+=1)j(n[a]);t=!0}},o(i){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)O(n[a]);t=!1},d(i){i&&f(e),$e(n,i)}}}function wo(s,e,t){let{lines:r}=e;return s.$$set=n=>{"lines"in n&&t(0,r=n.lines)},[r]}class bo extends Z{constructor(e){super(),ee(this,e,wo,vo,X,{lines:0})}}function yo(s){let e,t,r;return t=new ue({props:{text:s[0],max:"1",className:"combo-wod"}}),{c(){e=v("p"),F(t.$$.fragment),this.h()},l(n){e=w(n,"P",{id:!0,class:!0});var o=T(e);x(t.$$.fragment,o),o.forEach(f),this.h()},h(){g(e,"id","chunk-common-words-list"),g(e,"class","svelte-1243s1f")},m(n,o){A(n,e,o),V(t,e,null),r=!0},p(n,[o]){const i={};o&1&&(i.text=n[0]),t.$set(i)},i(n){r||(j(t.$$.fragment,n),r=!0)},o(n){O(t.$$.fragment,n),r=!1},d(n){n&&f(e),W(t)}}}function ko(s,e,t){let{text:r}=e;return s.$$set=n=>{"text"in n&&t(0,r=n.text)},[r]}class Eo extends Z{constructor(e){super(),ee(this,e,ko,yo,X,{text:0})}}function Dn(s){let e,t,r,n,o;return t=new mo({props:{lines:["some words",`${s[0].name} got`,"that you didn't"]}}),n=new _o({props:{text:s[5]}}),{c(){e=v("div"),F(t.$$.fragment),r=N(),F(n.$$.fragment),this.h()},l(i){e=w(i,"DIV",{class:!0});var a=T(e);x(t.$$.fragment,a),r=D(a),x(n.$$.fragment,a),a.forEach(f),this.h()},h(){g(e,"class","words wod-words svelte-631pl9")},m(i,a){A(i,e,a),V(t,e,null),d(e,r),V(n,e,null),o=!0},p(i,a){const l={};a&1&&(l.lines=["some words",`${i[0].name} got`,"that you didn't"]),t.$set(l);const c={};a&32&&(c.text=i[5]),n.$set(c)},i(i){o||(j(t.$$.fragment,i),j(n.$$.fragment,i),o=!0)},o(i){O(t.$$.fragment,i),O(n.$$.fragment,i),o=!1},d(i){i&&f(e),W(t),W(n)}}}function To(s){let e,t,r,n,o,i,a,l,c;e=new co({props:{text:""+(s[2]+s[1])}});let u=s[5].length&&Dn(s);return i=new bo({props:{lines:["common","words that",`${s[3]}`]}}),l=new Eo({props:{text:s[4]}}),{c(){F(e.$$.fragment),t=N(),r=v("div"),u&&u.c(),n=N(),o=v("div"),F(i.$$.fragment),a=N(),F(l.$$.fragment),this.h()},l(h){x(e.$$.fragment,h),t=D(h),r=w(h,"DIV",{class:!0});var m=T(r);u&&u.l(m),n=D(m),o=w(m,"DIV",{class:!0});var p=T(o);x(i.$$.fragment,p),a=D(p),x(l.$$.fragment,p),p.forEach(f),m.forEach(f),this.h()},h(){g(o,"class","words common-words svelte-631pl9"),g(r,"class","words-wrapper svelte-631pl9")},m(h,m){V(e,h,m),A(h,t,m),A(h,r,m),u&&u.m(r,null),d(r,n),d(r,o),V(i,o,null),d(o,a),V(l,o,null),c=!0},p(h,[m]){const p={};m&6&&(p.text=""+(h[2]+h[1])),e.$set(p),h[5].length?u?(u.p(h,m),m&32&&j(u,1)):(u=Dn(h),u.c(),j(u,1),u.m(r,n)):u&&(he(),O(u,1,1,()=>{u=null}),fe());const _={};m&8&&(_.lines=["common","words that",`${h[3]}`]),i.$set(_);const b={};m&16&&(b.text=h[4]),l.$set(b)},i(h){c||(j(e.$$.fragment,h),j(u),j(i.$$.fragment,h),j(l.$$.fragment,h),c=!0)},o(h){O(e.$$.fragment,h),O(u),O(i.$$.fragment,h),O(l.$$.fragment,h),c=!1},d(h){W(e,h),h&&f(t),h&&f(r),u&&u.d(),W(i),W(l)}}}const Un=3;function So(s,e,t){let r,n,o,i,a,l,c,u,h,m,p,_,b,S,$,I;B(s,ct,k=>t(0,p=k)),B(s,dt,k=>t(11,_=k)),B(s,vr,k=>t(12,b=k)),B(s,xe,k=>t(13,S=k)),B(s,Ce,k=>t(14,$=k)),B(s,$r,k=>t(15,I=k));const E=({word:k,lemmas:R})=>!!!R.split("|").find(C=>I.includes(C));return s.$$.update=()=>{s.$$.dirty&4096&&t(8,r=hs(",")(b.length)),s.$$.dirty&24576&&t(10,n=$.wod[S]),s.$$.dirty&1024&&t(5,o=n.filter(k=>k.valid).slice(0,Un).map(k=>k.text).join(" ")),s.$$.dirty&1024&&t(7,i=n.filter(k=>!k.valid).length),s.$$.dirty&4096&&t(9,a=zs(b.filter(k=>+k.points==1).filter(E))),s.$$.dirty&512&&t(4,l=a.slice(0,Un).map(k=>k.word).join(" ")),s.$$.dirty&2048&&t(3,c=_?"you didn't get:":"nobody got"),s.$$.dirty&256&&t(2,u=`there were <em>${r}</em> possible words.`),s.$$.dirty&128&&t(6,h=i===1?"":"s"),s.$$.dirty&193&&t(1,m=` you blocked ${p==null?void 0:p.name} ${i} time${h}.`)},[p,m,u,c,l,o,h,i,r,a,n,_,b,S,$]}class $o extends Z{constructor(e){super(),ee(this,e,So,To,X,{})}}function Mn(s,e,t){const r=s.slice();return r[2]=e[t],r}function Ln(s){let e,t;return e=new ue({props:{text:s[2],max:"20",className:"combo-"+s[1]}}),{c(){F(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,n){V(e,r,n),t=!0},p(r,n){const o={};n&1&&(o.text=r[2]),n&2&&(o.className="combo-"+r[1]),e.$set(o)},i(r){t||(j(e.$$.fragment,r),t=!0)},o(r){O(e.$$.fragment,r),t=!1},d(r){W(e,r)}}}function jo(s){let e,t,r=s[0],n=[];for(let i=0;i<r.length;i+=1)n[i]=Ln(Mn(s,r,i));const o=i=>O(n[i],1,1,()=>{n[i]=null});return{c(){e=v("h3");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=w(i,"H3",{id:!0,class:!0});var a=T(e);for(let l=0;l<n.length;l+=1)n[l].l(a);a.forEach(f),this.h()},h(){g(e,"id","chunk-recap-title"),g(e,"class","svelte-8kaea0")},m(i,a){A(i,e,a);for(let l=0;l<n.length;l+=1)n[l].m(e,null);t=!0},p(i,[a]){if(a&3){r=i[0];let l;for(l=0;l<r.length;l+=1){const c=Mn(i,r,l);n[l]?(n[l].p(c,a),j(n[l],1)):(n[l]=Ln(c),n[l].c(),j(n[l],1),n[l].m(e,null))}for(he(),l=r.length;l<n.length;l+=1)o(l);fe()}},i(i){if(!t){for(let a=0;a<r.length;a+=1)j(n[a]);t=!0}},o(i){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)O(n[a]);t=!1},d(i){i&&f(e),$e(n,i)}}}function Oo(s,e,t){let{lines:r}=e,{winner:n}=e;return s.$$set=o=>{"lines"in o&&t(0,r=o.lines),"winner"in o&&t(1,n=o.winner)},[r,n]}class Io extends Z{constructor(e){super(),ee(this,e,Oo,jo,X,{lines:0,winner:1})}}function Ro(s){let e,t,r,n,o;return t=new ue({props:{className:"combo-user",text:"shameless plug:"}}),n=new ue({props:{text:s[0],max:"28",className:"combo-wod"}}),{c(){e=v("p"),F(t.$$.fragment),r=N(),F(n.$$.fragment),this.h()},l(i){e=w(i,"P",{id:!0,class:!0});var a=T(e);x(t.$$.fragment,a),r=D(a),x(n.$$.fragment,a),a.forEach(f),this.h()},h(){g(e,"id","chunk-recap-plug"),g(e,"class","svelte-zres95")},m(i,a){A(i,e,a),V(t,e,null),d(e,r),V(n,e,null),o=!0},p(i,[a]){const l={};a&1&&(l.text=i[0]),n.$set(l)},i(i){o||(j(t.$$.fragment,i),j(n.$$.fragment,i),o=!0)},o(i){O(t.$$.fragment,i),O(n.$$.fragment,i),o=!1},d(i){i&&f(e),W(t),W(n)}}}function Ao(s,e,t){let{text:r}=e;return s.$$set=n=>{"text"in n&&t(0,r=n.text)},[r]}class Po extends Z{constructor(e){super(),ee(this,e,Ao,Ro,X,{text:0})}}function Bn(s){let e,t;return e=new Io({props:{lines:s[1],winner:s[2]}}),{c(){F(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,n){V(e,r,n),t=!0},p(r,n){const o={};n&2&&(o.lines=r[1]),n&4&&(o.winner=r[2]),e.$set(o)},i(r){t||(j(e.$$.fragment,r),t=!0)},o(r){O(e.$$.fragment,r),t=!1},d(r){W(e,r)}}}function zn(s){var r;let e,t;return e=new Po({props:{text:(r=s[3])==null?void 0:r.plug,winner:s[2]}}),{c(){F(e.$$.fragment)},l(n){x(e.$$.fragment,n)},m(n,o){V(e,n,o),t=!0},p(n,o){var a;const i={};o&8&&(i.text=(a=n[3])==null?void 0:a.plug),o&4&&(i.winner=n[2]),e.$set(i)},i(n){t||(j(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){W(e,n)}}}function Co(s){let e,t,r,n,o,i=!s[4]&&Bn(s),a=s[0]==="post"&&!s[4]&&s[2]==="wod"&&s[3].plug&&zn(s);return n=new $o({}),{c(){e=v("div"),i&&i.c(),t=N(),a&&a.c(),r=N(),F(n.$$.fragment),this.h()},l(l){e=w(l,"DIV",{class:!0});var c=T(e);i&&i.l(c),t=D(c),a&&a.l(c),r=D(c),x(n.$$.fragment,c),c.forEach(f),this.h()},h(){g(e,"class","svelte-bvyxft")},m(l,c){A(l,e,c),i&&i.m(e,null),d(e,t),a&&a.m(e,null),d(e,r),V(n,e,null),o=!0},p(l,[c]){l[4]?i&&(he(),O(i,1,1,()=>{i=null}),fe()):i?(i.p(l,c),c&16&&j(i,1)):(i=Bn(l),i.c(),j(i,1),i.m(e,t)),l[0]==="post"&&!l[4]&&l[2]==="wod"&&l[3].plug?a?(a.p(l,c),c&29&&j(a,1)):(a=zn(l),a.c(),j(a,1),a.m(e,r)):a&&(he(),O(a,1,1,()=>{a=null}),fe())},i(l){o||(j(i),j(a),j(n.$$.fragment,l),o=!0)},o(l){O(i),O(a),O(n.$$.fragment,l),o=!1},d(l){l&&f(e),i&&i.d(),a&&a.d(),W(n)}}}function No(s,e,t){let r,n,o,i,a,l,c,u,h;B(s,ke,S=>t(6,a=S)),B(s,jr,S=>t(0,l=S)),B(s,ls,S=>t(7,c=S)),B(s,ct,S=>t(3,u=S)),B(s,dt,S=>t(4,h=S));let m;const p=()=>{t(1,m=o?[`You and ${u==null?void 0:u.name}`,"tied!"]:r?["You beat",`${u==null?void 0:u.name}!`]:[`${u==null?void 0:u.name}`,"beat you!"])},_=()=>{t(1,m=o?[`you and ${u==null?void 0:u.name}`,"are tied"]:r?["you are ahead",`of ${u==null?void 0:u.name}`]:[`${u==null?void 0:u.name} is`,"in the lead"])},b=()=>{l==="post"?p():_()};return s.$$.update=()=>{s.$$.dirty&128&&(r=c.user>c.wod),s.$$.dirty&128&&t(5,n=c.user<c.wod),s.$$.dirty&128&&(o=c.user===c.wod),s.$$.dirty&32&&t(2,i=n?"wod":"user"),s.$$.dirty&65&&b()},[l,m,i,u,h,n,a,c]}class Do extends Z{constructor(e){super(),ee(this,e,No,Co,X,{})}}async function Uo(s){const e=`https://pudding.cool/games/words-against-strangers-data/wod-info/${s}.csv?version=${Date.now()}`;return await Mt(e)}function Mo(s){let e,t,r,n,o;return t=new ue({props:{text:"welcome to",max:"10",className:"combo-user"}}),n=new ue({props:{text:s[0],max:"1",className:"combo-user"}}),{c(){e=v("h2"),F(t.$$.fragment),r=N(),F(n.$$.fragment),this.h()},l(i){e=w(i,"H2",{id:!0,class:!0});var a=T(e);x(t.$$.fragment,a),r=D(a),x(n.$$.fragment,a),a.forEach(f),this.h()},h(){g(e,"id","chunk-title"),g(e,"class","svelte-s6dwex")},m(i,a){A(i,e,a),V(t,e,null),d(e,r),V(n,e,null),o=!0},p(i,[a]){const l={};a&1&&(l.text=i[0]),n.$set(l)},i(i){o||(j(t.$$.fragment,i),j(n.$$.fragment,i),o=!0)},o(i){O(t.$$.fragment,i),O(n.$$.fragment,i),o=!1},d(i){i&&f(e),W(t),W(n)}}}function Lo(s,e,t){let{text:r}=e;return s.$$set=n=>{"text"in n&&t(0,r=n.text)},[r]}class Bo extends Z{constructor(e){super(),ee(this,e,Lo,Mo,X,{text:0})}}function zo(s){let e,t,r;return t=new ue({props:{text:s[0],max:"13",className:"combo-default"}}),{c(){e=v("p"),F(t.$$.fragment),this.h()},l(n){e=w(n,"P",{id:!0,class:!0});var o=T(e);x(t.$$.fragment,o),o.forEach(f),this.h()},h(){g(e,"id","chunk-description"),g(e,"class","svelte-cnnzop")},m(n,o){A(n,e,o),V(t,e,null),r=!0},p(n,[o]){const i={};o&1&&(i.text=n[0]),t.$set(i)},i(n){r||(j(t.$$.fragment,n),r=!0)},o(n){O(t.$$.fragment,n),r=!1},d(n){n&&f(e),W(t)}}}function Ho(s,e,t){let{text:r}=e;return s.$$set=n=>{"text"in n&&t(0,r=n.text)},[r]}class Go extends Z{constructor(e){super(),ee(this,e,Ho,zo,X,{text:0})}}function qo(s){let e,t,r;return t=new ue({props:{text:Ko,max:"12",className:"combo-wod-light"}}),{c(){e=v("span"),F(t.$$.fragment),this.h()},l(n){e=w(n,"SPAN",{class:!0});var o=T(e);x(t.$$.fragment,o),o.forEach(f),this.h()},h(){g(e,"class","loading svelte-1c877gz")},m(n,o){A(n,e,o),V(t,e,null),r=!0},p:Q,i(n){r||(j(t.$$.fragment,n),r=!0)},o(n){O(t.$$.fragment,n),r=!1},d(n){n&&f(e),W(t)}}}function Fo(s){let e,t,r,n;const o=[Vo,xo],i=[];function a(l,c){return l[6]?0:1}return e=a(s),t=i[e]=o[e](s),{c(){t.c(),r=ie()},l(l){t.l(l),r=ie()},m(l,c){i[e].m(l,c),A(l,r,c),n=!0},p(l,c){let u=e;e=a(l),e===u?i[e].p(l,c):(he(),O(i[u],1,1,()=>{i[u]=null}),fe(),t=i[e],t?t.p(l,c):(t=i[e]=o[e](l),t.c()),j(t,1),t.m(r.parentNode,r))},i(l){n||(j(t),n=!0)},o(l){O(t),n=!1},d(l){i[e].d(l),l&&f(r)}}}function xo(s){let e,t,r;return t=new ue({props:{text:Jo,max:"12",className:"combo-wod-light"}}),{c(){e=v("span"),F(t.$$.fragment),this.h()},l(n){e=w(n,"SPAN",{class:!0});var o=T(e);x(t.$$.fragment,o),o.forEach(f),this.h()},h(){g(e,"class","no-game svelte-1c877gz")},m(n,o){A(n,e,o),V(t,e,null),r=!0},p:Q,i(n){r||(j(t.$$.fragment,n),r=!0)},o(n){O(t.$$.fragment,n),r=!1},d(n){n&&f(e),W(t)}}}function Vo(s){var S,$,I;let e,t,r,n,o,i,a,l,c,u,h,m,p;e=new ue({props:{text:"today that",className:"combo-wod-light a"}}),r=new ue({props:{text:"person is",className:"combo-wod-light b"}}),o=new ue({props:{max:"12",text:(S=s[3])==null?void 0:S.name,className:"combo-wod c big"}});let _=(($=s[3])==null?void 0:$.location)&&Hn(s),b=((I=s[3])==null?void 0:I.bio)&&Gn(s);return u=new ue({props:{text:"can you",className:"combo-wod-light g "+s[4]}}),m=new ue({props:{text:`beat ${s[5]}?`,className:"combo-wod-light h"}}),{c(){F(e.$$.fragment),t=N(),F(r.$$.fragment),n=N(),F(o.$$.fragment),i=N(),_&&_.c(),a=N(),b&&b.c(),l=N(),c=v("span"),F(u.$$.fragment),h=N(),F(m.$$.fragment),this.h()},l(E){x(e.$$.fragment,E),t=D(E),x(r.$$.fragment,E),n=D(E),x(o.$$.fragment,E),i=D(E),_&&_.l(E),a=D(E),b&&b.l(E),l=D(E),c=w(E,"SPAN",{class:!0});var k=T(c);x(u.$$.fragment,k),h=D(k),x(m.$$.fragment,k),k.forEach(f),this.h()},h(){g(c,"class","beat svelte-1c877gz"),K(c,"force-display",s[2]||s[1])},m(E,k){V(e,E,k),A(E,t,k),V(r,E,k),A(E,n,k),V(o,E,k),A(E,i,k),_&&_.m(E,k),A(E,a,k),b&&b.m(E,k),A(E,l,k),A(E,c,k),V(u,c,null),d(c,h),V(m,c,null),p=!0},p(E,k){var G,L,te;const R={};k&8&&(R.text=(G=E[3])==null?void 0:G.name),o.$set(R),(L=E[3])!=null&&L.location?_?(_.p(E,k),k&8&&j(_,1)):(_=Hn(E),_.c(),j(_,1),_.m(a.parentNode,a)):_&&(he(),O(_,1,1,()=>{_=null}),fe()),(te=E[3])!=null&&te.bio?b?(b.p(E,k),k&8&&j(b,1)):(b=Gn(E),b.c(),j(b,1),b.m(l.parentNode,l)):b&&(he(),O(b,1,1,()=>{b=null}),fe());const q={};k&16&&(q.className="combo-wod-light g "+E[4]),u.$set(q);const C={};k&32&&(C.text=`beat ${E[5]}?`),m.$set(C),k&6&&K(c,"force-display",E[2]||E[1])},i(E){p||(j(e.$$.fragment,E),j(r.$$.fragment,E),j(o.$$.fragment,E),j(_),j(b),j(u.$$.fragment,E),j(m.$$.fragment,E),p=!0)},o(E){O(e.$$.fragment,E),O(r.$$.fragment,E),O(o.$$.fragment,E),O(_),O(b),O(u.$$.fragment,E),O(m.$$.fragment,E),p=!1},d(E){W(e,E),E&&f(t),W(r,E),E&&f(n),W(o,E),E&&f(i),_&&_.d(E),E&&f(a),b&&b.d(E),E&&f(l),E&&f(c),W(u),W(m)}}}function Hn(s){var o;let e,t,r,n;return e=new ue({props:{text:"from",className:"combo-wod-light d"}}),r=new ue({props:{max:"13",text:((o=s[3])==null?void 0:o.location)+".",className:"combo-wod-light e"}}),{c(){F(e.$$.fragment),t=N(),F(r.$$.fragment)},l(i){x(e.$$.fragment,i),t=D(i),x(r.$$.fragment,i)},m(i,a){V(e,i,a),A(i,t,a),V(r,i,a),n=!0},p(i,a){var c;const l={};a&8&&(l.text=((c=i[3])==null?void 0:c.location)+"."),r.$set(l)},i(i){n||(j(e.$$.fragment,i),j(r.$$.fragment,i),n=!0)},o(i){O(e.$$.fragment,i),O(r.$$.fragment,i),n=!1},d(i){W(e,i),i&&f(t),W(r,i)}}}function Gn(s){var n,o;let e,t,r;return t=new ue({props:{text:((n=s[3])==null?void 0:n.bio)+((o=s[3])!=null&&o.bio?".":""),max:"12",className:"combo-wod-light f"}}),{c(){e=v("span"),F(t.$$.fragment),this.h()},l(i){e=w(i,"SPAN",{class:!0});var a=T(e);x(t.$$.fragment,a),a.forEach(f),this.h()},h(){g(e,"class","bio svelte-1c877gz"),K(e,"bump",s[1])},m(i,a){A(i,e,a),V(t,e,null),r=!0},p(i,a){var c,u;const l={};a&8&&(l.text=((c=i[3])==null?void 0:c.bio)+((u=i[3])!=null&&u.bio?".":"")),t.$set(l),a&2&&K(e,"bump",i[1])},i(i){r||(j(t.$$.fragment,i),r=!0)},o(i){O(t.$$.fragment,i),r=!1},d(i){i&&f(e),W(t)}}}function Wo(s){let e,t,r,n;const o=[Fo,qo],i=[];function a(l,c){return l[0]?0:1}return t=a(s),r=i[t]=o[t](s),{c(){e=v("p"),r.c(),this.h()},l(l){e=w(l,"P",{id:!0,class:!0});var c=T(e);r.l(c),c.forEach(f),this.h()},h(){g(e,"id","chunk-info"),g(e,"class","svelte-1c877gz")},m(l,c){A(l,e,c),i[t].m(e,null),n=!0},p(l,[c]){let u=t;t=a(l),t===u?i[t].p(l,c):(he(),O(i[u],1,1,()=>{i[u]=null}),fe(),r=i[t],r?r.p(l,c):(r=i[t]=o[t](l),r.c()),j(r,1),r.m(e,null))},i(l){n||(j(r),n=!0)},o(l){O(r),n=!1},d(l){l&&f(e),i[t].d()}}}const Jo="there is no active game right now. launching sep. 23!",Ko="loading today's game...";function Yo(s,e,t){let r,n,o,i,a,l;B(s,ct,u=>t(3,a=u)),B(s,ut,u=>t(6,l=u));let{loaded:c}=e;return s.$$set=u=>{"loaded"in u&&t(0,c=u.loaded)},s.$$.update=()=>{s.$$.dirty&8&&t(5,r=a?a.pronoun.split("/")[1]:void 0),s.$$.dirty&8&&t(1,n=!(a!=null&&a.location)),s.$$.dirty&8&&t(2,o=!(a!=null&&a.bio)),s.$$.dirty&6&&t(4,i=o&&n?"bump":"")},[c,n,o,a,i,r,l]}class Xo extends Z{constructor(e){super(),ee(this,e,Yo,Wo,X,{loaded:0})}}function Qo(s){let e,t,r,n,o,i,a,l,c,u,h,m,p,_,b,S,$,I,E,k,R,q,C,G,L,te,U,Y;return t=new Bo({props:{text:s[2]}}),o=new Go({props:{text:s[3]}}),a=new Xo({props:{loaded:s[0]}}),{c(){e=v("div"),F(t.$$.fragment),r=N(),n=v("div"),F(o.$$.fragment),i=N(),F(a.$$.fragment),l=N(),c=v("div"),u=v("div"),h=v("button"),m=z("play"),_=N(),b=v("div"),S=v("div"),$=v("button"),I=z("rules"),E=N(),k=v("div"),R=v("p"),q=z("want to be the next stranger?"),C=N(),G=v("a"),L=z("sign up"),this.h()},l(M){e=w(M,"DIV",{class:!0});var y=T(e);x(t.$$.fragment,y),r=D(y),n=w(y,"DIV",{class:!0});var P=T(n);x(o.$$.fragment,P),i=D(P),x(a.$$.fragment,P),P.forEach(f),l=D(y),c=w(y,"DIV",{class:!0});var J=T(c);u=w(J,"DIV",{class:!0});var re=T(u);h=w(re,"BUTTON",{class:!0});var ve=T(h);m=H(ve,"play"),ve.forEach(f),re.forEach(f),_=D(J),b=w(J,"DIV",{class:!0});var oe=T(b);S=w(oe,"DIV",{class:!0});var Oe=T(S);$=w(Oe,"BUTTON",{class:!0});var Ie=T($);I=H(Ie,"rules"),Ie.forEach(f),Oe.forEach(f),E=D(oe),k=w(oe,"DIV",{class:!0});var Ee=T(k);R=w(Ee,"P",{class:!0});var Ve=T(R);q=H(Ve,"want to be the next stranger?"),Ve.forEach(f),C=D(Ee),G=w(Ee,"A",{role:!0,href:!0,target:!0,class:!0});var We=T(G);L=H(We,"sign up"),We.forEach(f),Ee.forEach(f),oe.forEach(f),J.forEach(f),y.forEach(f),this.h()},h(){g(n,"class","details svelte-1s82arw"),h.disabled=p=!s[0],g(h,"class","svelte-1s82arw"),g(u,"class","play svelte-1s82arw"),g($,"class","svelte-1s82arw"),g(S,"class","rules"),g(R,"class","svelte-1s82arw"),g(G,"role","button"),g(G,"href","https://www.getrevue.co/profile/wordsagainststrangers/"),g(G,"target","_blank"),g(G,"class","svelte-1s82arw"),g(k,"class","signup svelte-1s82arw"),g(b,"class","other svelte-1s82arw"),g(c,"class","cta svelte-1s82arw"),g(e,"class","wrapper svelte-1s82arw")},m(M,y){A(M,e,y),V(t,e,null),d(e,r),d(e,n),V(o,n,null),d(n,i),V(a,n,null),d(e,l),d(e,c),d(c,u),d(u,h),d(h,m),d(c,_),d(c,b),d(b,S),d(S,$),d($,I),d(b,E),d(b,k),d(k,R),d(R,q),d(k,C),d(k,G),d(G,L),te=!0,U||(Y=[le(h,"click",s[6]),le($,"click",s[7])],U=!0)},p(M,[y]){const P={};y&1&&(P.loaded=M[0]),a.$set(P),(!te||y&1&&p!==(p=!M[0]))&&(h.disabled=p)},i(M){te||(j(t.$$.fragment,M),j(o.$$.fragment,M),j(a.$$.fragment,M),te=!0)},o(M){O(t.$$.fragment,M),O(o.$$.fragment,M),O(a.$$.fragment,M),te=!1},d(M){M&&f(e),W(t),W(o),W(a),U=!1,De(Y)}}}function Zo(s,e,t){let r,n,o;B(s,ut,p=>t(5,r=p)),B(s,ct,p=>t(8,n=p)),B(s,Ne,p=>t(1,o=p));let{loaded:i}=e;const{title:a,description:l}=is("copy"),c=ft(),u=async()=>{const[p]=await Uo(r);_e(ct,n=p,n)},h=()=>c("play"),m=()=>{_e(Ne,o="rules",o)};return s.$$set=p=>{"loaded"in p&&t(0,i=p.loaded)},s.$$.update=()=>{s.$$.dirty&32&&r&&u()},[i,o,a,l,c,r,h,m]}class ea extends Z{constructor(e){super(),ee(this,e,Zo,Qo,X,{loaded:0})}}const ta="1.35.4",_s={"X-Client-Info":`supabase-js/${ta}`},ra="supabase.auth.token";function na(s){return s.replace(/\/$/,"")}const sa=()=>typeof window<"u",ia="1.22.20",oa="http://localhost:9999",aa={"X-Client-Info":`gotrue-js/${ia}`},It=10,He={ERROR_MESSAGE:"Request Failed",MAX_RETRIES:10,RETRY_INTERVAL:2},_t="supabase.auth.token",la={name:"sb",lifetime:60*60*8,domain:"",path:"/",sameSite:"lax"};var Tt=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(u){try{c(r.next(u))}catch(h){i(h)}}function l(u){try{c(r.throw(u))}catch(h){i(h)}}function c(u){u.done?o(u.value):n(u.value).then(a,l)}c((r=r.apply(s,e||[])).next())})};const ua=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),ca=(s,e)=>{if(!(s!=null&&s.status))return e({message:He.ERROR_MESSAGE});if(typeof s.json!="function")return e(s);s.json().then(t=>e({message:ua(t),status:(s==null?void 0:s.status)||500}))},ha=(s,e,t)=>{const r={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"||(r.headers=Object.assign({"Content-Type":"text/plain;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(t)),r};function Lt(s,e,t,r,n){return Tt(this,void 0,void 0,function*(){return new Promise((o,i)=>{s(t,ha(e,r,n)).then(a=>{if(!a.ok)throw a;return r!=null&&r.noResolveJson?o:a.json()}).then(a=>o(a)).catch(a=>ca(a,i))})})}function pr(s,e,t){return Tt(this,void 0,void 0,function*(){return Lt(s,"GET",e,t)})}function me(s,e,t,r){return Tt(this,void 0,void 0,function*(){return Lt(s,"POST",e,r,t)})}function qn(s,e,t,r){return Tt(this,void 0,void 0,function*(){return Lt(s,"PUT",e,r,t)})}function fa(s,e,t,r){return Tt(this,void 0,void 0,function*(){return Lt(s,"DELETE",e,r,t)})}function da(s,e,t){const r=t||{},n=encodeURIComponent,o=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;if(typeof n!="function")throw new TypeError("option encode is invalid");if(!o.test(s))throw new TypeError("argument name is invalid");const i=n(e);if(i&&!o.test(i))throw new TypeError("argument val is invalid");let a=s+"="+i;if(r.maxAge!=null){const l=r.maxAge-0;if(isNaN(l)||!isFinite(l))throw new TypeError("option maxAge is invalid");a+="; Max-Age="+Math.floor(l)}if(r.domain){if(!o.test(r.domain))throw new TypeError("option domain is invalid");a+="; Domain="+r.domain}if(r.path){if(!o.test(r.path))throw new TypeError("option path is invalid");a+="; Path="+r.path}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");a+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return a}function ma(s){if(!s||!s.headers||!s.headers.host)throw new Error('The "host" request header is not available');const e=s.headers.host.indexOf(":")>-1&&s.headers.host.split(":")[0]||s.headers.host;return!(["localhost","127.0.0.1"].indexOf(e)>-1||e.endsWith(".local"))}function pa(s,e){var t,r,n;return da(s.name,s.value,{maxAge:s.maxAge,expires:new Date(Date.now()+s.maxAge*1e3),httpOnly:!0,secure:e,path:(t=s.path)!==null&&t!==void 0?t:"/",domain:(r=s.domain)!==null&&r!==void 0?r:"",sameSite:(n=s.sameSite)!==null&&n!==void 0?n:"lax"})}function yr(s,e,t){const r=t.map(o=>pa(o,ma(s))),n=e.getHeader("Set-Cookie");return n&&(n instanceof Array?Array.prototype.push.apply(r,n):typeof n=="string"&&r.push(n)),r}function Rt(s,e,t){e.setHeader("Set-Cookie",yr(s,e,t))}var Bt=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(u){try{c(r.next(u))}catch(h){i(h)}}function l(u){try{c(r.throw(u))}catch(h){i(h)}}function c(u){u.done?o(u.value):n(u.value).then(a,l)}c((r=r.apply(s,e||[])).next())})};function Ae(s){return Math.round(Date.now()/1e3)+s}function ga(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}const je=()=>typeof window<"u";function Pe(s,e){var t;e||(e=((t=window==null?void 0:window.location)===null||t===void 0?void 0:t.href)||""),s=s.replace(/[\[\]]/g,"\\$&");const r=new RegExp("[?&#]"+s+"(=([^&#]*)|&|#|$)"),n=r.exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}const _a=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Bt(void 0,void 0,void 0,function*(){return yield(yield Ut(()=>import("./browser-ponyfill-2e15ed5e.js").then(r=>r.b),["_app/immutable/chunks/browser-ponyfill-2e15ed5e.js","_app/immutable/chunks/_commonjsHelpers-e864563f.js"])).fetch(...t)}):e=fetch,(...t)=>e(...t)},va=(s,e,t)=>Bt(void 0,void 0,void 0,function*(){je()&&(yield s==null?void 0:s.setItem(e,JSON.stringify(t)))}),wa=(s,e)=>Bt(void 0,void 0,void 0,function*(){const t=je()&&(yield s==null?void 0:s.getItem(e));if(!t)return null;try{return JSON.parse(t)}catch{return t}}),ba=(s,e)=>{const t=je()&&(s==null?void 0:s.getItem(e));if(!t||typeof t!="string")return null;try{return JSON.parse(t)}catch{return t}},ya=(s,e)=>Bt(void 0,void 0,void 0,function*(){je()&&(yield s==null?void 0:s.removeItem(e))});var ae=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(u){try{c(r.next(u))}catch(h){i(h)}}function l(u){try{c(r.throw(u))}catch(h){i(h)}}function c(u){u.done?o(u.value):n(u.value).then(a,l)}c((r=r.apply(s,e||[])).next())})};class ka{constructor({url:e="",headers:t={},cookieOptions:r,fetch:n}){this.url=e,this.headers=t,this.cookieOptions=Object.assign(Object.assign({},la),r),this.fetch=_a(n)}_createRequestHeaders(e){const t=Object.assign({},this.headers);return t.Authorization=`Bearer ${e}`,t}cookieName(){var e;return(e=this.cookieOptions.name)!==null&&e!==void 0?e:""}getUrlForProvider(e,t){const r=[`provider=${encodeURIComponent(e)}`];if(t!=null&&t.redirectTo&&r.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t!=null&&t.scopes&&r.push(`scopes=${encodeURIComponent(t.scopes)}`),t!=null&&t.queryParams){const n=new URLSearchParams(t.queryParams);r.push(`${n}`)}return`${this.url}/authorize?${r.join("&")}`}signUpWithEmail(e,t,r={}){return ae(this,void 0,void 0,function*(){try{const n=Object.assign({},this.headers);let o="";r.redirectTo&&(o="?redirect_to="+encodeURIComponent(r.redirectTo));const i=yield me(this.fetch,`${this.url}/signup${o}`,{email:e,password:t,data:r.data,gotrue_meta_security:{captcha_token:r.captchaToken}},{headers:n}),a=Object.assign({},i);return a.expires_in&&(a.expires_at=Ae(i.expires_in)),{data:a,error:null}}catch(n){return{data:null,error:n}}})}signInWithEmail(e,t,r={}){return ae(this,void 0,void 0,function*(){try{const n=Object.assign({},this.headers);let o="?grant_type=password";r.redirectTo&&(o+="&redirect_to="+encodeURIComponent(r.redirectTo));const i=yield me(this.fetch,`${this.url}/token${o}`,{email:e,password:t},{headers:n}),a=Object.assign({},i);return a.expires_in&&(a.expires_at=Ae(i.expires_in)),{data:a,error:null}}catch(n){return{data:null,error:n}}})}signUpWithPhone(e,t,r={}){return ae(this,void 0,void 0,function*(){try{const n=Object.assign({},this.headers),o=yield me(this.fetch,`${this.url}/signup`,{phone:e,password:t,data:r.data,gotrue_meta_security:{captcha_token:r.captchaToken}},{headers:n}),i=Object.assign({},o);return i.expires_in&&(i.expires_at=Ae(o.expires_in)),{data:i,error:null}}catch(n){return{data:null,error:n}}})}signInWithPhone(e,t){return ae(this,void 0,void 0,function*(){try{const r=Object.assign({},this.headers),n="?grant_type=password",o=yield me(this.fetch,`${this.url}/token${n}`,{phone:e,password:t},{headers:r}),i=Object.assign({},o);return i.expires_in&&(i.expires_at=Ae(o.expires_in)),{data:i,error:null}}catch(r){return{data:null,error:r}}})}signInWithOpenIDConnect({id_token:e,nonce:t,client_id:r,issuer:n,provider:o}){return ae(this,void 0,void 0,function*(){try{const i=Object.assign({},this.headers),a="?grant_type=id_token",l=yield me(this.fetch,`${this.url}/token${a}`,{id_token:e,nonce:t,client_id:r,issuer:n,provider:o},{headers:i}),c=Object.assign({},l);return c.expires_in&&(c.expires_at=Ae(l.expires_in)),{data:c,error:null}}catch(i){return{data:null,error:i}}})}sendMagicLinkEmail(e,t={}){var r;return ae(this,void 0,void 0,function*(){try{const n=Object.assign({},this.headers);let o="";t.redirectTo&&(o+="?redirect_to="+encodeURIComponent(t.redirectTo));const i=(r=t.shouldCreateUser)!==null&&r!==void 0?r:!0;return{data:yield me(this.fetch,`${this.url}/otp${o}`,{email:e,create_user:i,gotrue_meta_security:{captcha_token:t.captchaToken}},{headers:n}),error:null}}catch(n){return{data:null,error:n}}})}sendMobileOTP(e,t={}){var r;return ae(this,void 0,void 0,function*(){try{const n=(r=t.shouldCreateUser)!==null&&r!==void 0?r:!0,o=Object.assign({},this.headers);return{data:yield me(this.fetch,`${this.url}/otp`,{phone:e,create_user:n,gotrue_meta_security:{captcha_token:t.captchaToken}},{headers:o}),error:null}}catch(n){return{data:null,error:n}}})}signOut(e){return ae(this,void 0,void 0,function*(){try{return yield me(this.fetch,`${this.url}/logout`,{},{headers:this._createRequestHeaders(e),noResolveJson:!0}),{error:null}}catch(t){return{error:t}}})}verifyMobileOTP(e,t,r={}){return ae(this,void 0,void 0,function*(){try{const n=Object.assign({},this.headers),o=yield me(this.fetch,`${this.url}/verify`,{phone:e,token:t,type:"sms",redirect_to:r.redirectTo},{headers:n}),i=Object.assign({},o);return i.expires_in&&(i.expires_at=Ae(o.expires_in)),{data:i,error:null}}catch(n){return{data:null,error:n}}})}verifyOTP({email:e,phone:t,token:r,type:n="sms"},o={}){return ae(this,void 0,void 0,function*(){try{const i=Object.assign({},this.headers),a=yield me(this.fetch,`${this.url}/verify`,{email:e,phone:t,token:r,type:n,redirect_to:o.redirectTo},{headers:i}),l=Object.assign({},a);return l.expires_in&&(l.expires_at=Ae(a.expires_in)),{data:l,error:null}}catch(i){return{data:null,error:i}}})}inviteUserByEmail(e,t={}){return ae(this,void 0,void 0,function*(){try{const r=Object.assign({},this.headers);let n="";return t.redirectTo&&(n+="?redirect_to="+encodeURIComponent(t.redirectTo)),{data:yield me(this.fetch,`${this.url}/invite${n}`,{email:e,data:t.data},{headers:r}),error:null}}catch(r){return{data:null,error:r}}})}resetPasswordForEmail(e,t={}){return ae(this,void 0,void 0,function*(){try{const r=Object.assign({},this.headers);let n="";return t.redirectTo&&(n+="?redirect_to="+encodeURIComponent(t.redirectTo)),{data:yield me(this.fetch,`${this.url}/recover${n}`,{email:e,gotrue_meta_security:{captcha_token:t.captchaToken}},{headers:r}),error:null}}catch(r){return{data:null,error:r}}})}refreshAccessToken(e){return ae(this,void 0,void 0,function*(){try{const t=yield me(this.fetch,`${this.url}/token?grant_type=refresh_token`,{refresh_token:e},{headers:this.headers}),r=Object.assign({},t);return r.expires_in&&(r.expires_at=Ae(t.expires_in)),{data:r,error:null}}catch(t){return{data:null,error:t}}})}setAuthCookie(e,t){e.method!=="POST"&&(t.setHeader("Allow","POST"),t.status(405).end("Method Not Allowed"));const{event:r,session:n}=e.body;if(!r)throw new Error("Auth event missing!");if(r==="SIGNED_IN"){if(!n)throw new Error("Auth session missing!");Rt(e,t,[{key:"access-token",value:n.access_token},{key:"refresh-token",value:n.refresh_token}].map(o=>{var i;return{name:`${this.cookieName()}-${o.key}`,value:o.value,domain:this.cookieOptions.domain,maxAge:(i=this.cookieOptions.lifetime)!==null&&i!==void 0?i:0,path:this.cookieOptions.path,sameSite:this.cookieOptions.sameSite}}))}r==="SIGNED_OUT"&&Rt(e,t,["access-token","refresh-token"].map(o=>({name:`${this.cookieName()}-${o}`,value:"",maxAge:-1}))),t.status(200).json({})}deleteAuthCookie(e,t,{redirectTo:r="/"}){return Rt(e,t,["access-token","refresh-token"].map(n=>({name:`${this.cookieName()}-${n}`,value:"",maxAge:-1}))),t.redirect(307,r)}getAuthCookieString(e,t){e.method!=="POST"&&(t.setHeader("Allow","POST"),t.status(405).end("Method Not Allowed"));const{event:r,session:n}=e.body;if(!r)throw new Error("Auth event missing!");if(r==="SIGNED_IN"){if(!n)throw new Error("Auth session missing!");return yr(e,t,[{key:"access-token",value:n.access_token},{key:"refresh-token",value:n.refresh_token}].map(o=>{var i;return{name:`${this.cookieName()}-${o.key}`,value:o.value,domain:this.cookieOptions.domain,maxAge:(i=this.cookieOptions.lifetime)!==null&&i!==void 0?i:0,path:this.cookieOptions.path,sameSite:this.cookieOptions.sameSite}}))}return r==="SIGNED_OUT"?yr(e,t,["access-token","refresh-token"].map(o=>({name:`${this.cookieName()}-${o}`,value:"",maxAge:-1}))):t.getHeader("Set-Cookie")}generateLink(e,t,r={}){return ae(this,void 0,void 0,function*(){try{return{data:yield me(this.fetch,`${this.url}/admin/generate_link`,{type:e,email:t,password:r.password,data:r.data,redirect_to:r.redirectTo},{headers:this.headers}),error:null}}catch(n){return{data:null,error:n}}})}createUser(e){return ae(this,void 0,void 0,function*(){try{const t=yield me(this.fetch,`${this.url}/admin/users`,e,{headers:this.headers});return{user:t,data:t,error:null}}catch(t){return{user:null,data:null,error:t}}})}listUsers(){return ae(this,void 0,void 0,function*(){try{return{data:(yield pr(this.fetch,`${this.url}/admin/users`,{headers:this.headers})).users,error:null}}catch(e){return{data:null,error:e}}})}getUserById(e){return ae(this,void 0,void 0,function*(){try{return{data:yield pr(this.fetch,`${this.url}/admin/users/${e}`,{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}getUserByCookie(e,t){return ae(this,void 0,void 0,function*(){try{if(!e.cookies)throw new Error("Not able to parse cookies! When using Express make sure the cookie-parser middleware is in use!");const r=e.cookies[`${this.cookieName()}-access-token`],n=e.cookies[`${this.cookieName()}-refresh-token`];if(!r)throw new Error("No cookie found!");const{user:o,error:i}=yield this.getUser(r);if(i){if(!n)throw new Error("No refresh_token cookie found!");if(!t)throw new Error("You need to pass the res object to automatically refresh the session!");const{data:a,error:l}=yield this.refreshAccessToken(n);if(l)throw l;if(a)return Rt(e,t,[{key:"access-token",value:a.access_token},{key:"refresh-token",value:a.refresh_token}].map(c=>{var u;return{name:`${this.cookieName()}-${c.key}`,value:c.value,domain:this.cookieOptions.domain,maxAge:(u=this.cookieOptions.lifetime)!==null&&u!==void 0?u:0,path:this.cookieOptions.path,sameSite:this.cookieOptions.sameSite}})),{token:a.access_token,user:a.user,data:a.user,error:null}}return{token:r,user:o,data:o,error:null}}catch(r){return{token:null,user:null,data:null,error:r}}})}updateUserById(e,t){return ae(this,void 0,void 0,function*(){try{const r=yield qn(this.fetch,`${this.url}/admin/users/${e}`,t,{headers:this.headers});return{user:r,data:r,error:null}}catch(r){return{user:null,data:null,error:r}}})}deleteUser(e){return ae(this,void 0,void 0,function*(){try{const t=yield fa(this.fetch,`${this.url}/admin/users/${e}`,{},{headers:this.headers});return{user:t,data:t,error:null}}catch(t){return{user:null,data:null,error:t}}})}getUser(e){return ae(this,void 0,void 0,function*(){try{const t=yield pr(this.fetch,`${this.url}/user`,{headers:this._createRequestHeaders(e)});return{user:t,data:t,error:null}}catch(t){return{user:null,data:null,error:t}}})}updateUser(e,t){return ae(this,void 0,void 0,function*(){try{const r=yield qn(this.fetch,`${this.url}/user`,t,{headers:this._createRequestHeaders(e)});return{user:r,data:r,error:null}}catch(r){return{user:null,data:null,error:r}}})}}function Ea(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var pe=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(u){try{c(r.next(u))}catch(h){i(h)}}function l(u){try{c(r.throw(u))}catch(h){i(h)}}function c(u){u.done?o(u.value):n(u.value).then(a,l)}c((r=r.apply(s,e||[])).next())})};Ea();const Ta={url:oa,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,multiTab:!0,headers:aa};class Sa{constructor(e){this.stateChangeEmitters=new Map,this.networkRetries=0;const t=Object.assign(Object.assign({},Ta),e);this.currentUser=null,this.currentSession=null,this.autoRefreshToken=t.autoRefreshToken,this.persistSession=t.persistSession,this.multiTab=t.multiTab,this.localStorage=t.localStorage||globalThis.localStorage,this.api=new ka({url:t.url,headers:t.headers,cookieOptions:t.cookieOptions,fetch:t.fetch}),this._recoverSession(),this._recoverAndRefresh(),this._listenForMultiTabEvents(),this._handleVisibilityChange(),t.detectSessionInUrl&&je()&&!!Pe("access_token")&&this.getSessionFromUrl({storeSession:!0}).then(({error:r})=>{if(r)throw new Error("Error getting session from URL.")})}signUp({email:e,password:t,phone:r},n={}){return pe(this,void 0,void 0,function*(){try{this._removeSession();const{data:o,error:i}=r&&t?yield this.api.signUpWithPhone(r,t,{data:n.data,captchaToken:n.captchaToken}):yield this.api.signUpWithEmail(e,t,{redirectTo:n.redirectTo,data:n.data,captchaToken:n.captchaToken});if(i)throw i;if(!o)throw"An error occurred on sign up.";let a=null,l=null;return o.access_token&&(a=o,l=a.user,this._saveSession(a),this._notifyAllSubscribers("SIGNED_IN")),o.id&&(l=o),{user:l,session:a,error:null}}catch(o){return{user:null,session:null,error:o}}})}signIn({email:e,phone:t,password:r,refreshToken:n,provider:o,oidc:i},a={}){return pe(this,void 0,void 0,function*(){try{if(this._removeSession(),e&&!r){const{error:l}=yield this.api.sendMagicLinkEmail(e,{redirectTo:a.redirectTo,shouldCreateUser:a.shouldCreateUser,captchaToken:a.captchaToken});return{user:null,session:null,error:l}}if(e&&r)return this._handleEmailSignIn(e,r,{redirectTo:a.redirectTo});if(t&&!r){const{error:l}=yield this.api.sendMobileOTP(t,{shouldCreateUser:a.shouldCreateUser,captchaToken:a.captchaToken});return{user:null,session:null,error:l}}if(t&&r)return this._handlePhoneSignIn(t,r);if(n){const{error:l}=yield this._callRefreshToken(n);if(l)throw l;return{user:this.currentUser,session:this.currentSession,error:null}}if(o)return this._handleProviderSignIn(o,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});if(i)return this._handleOpenIDConnectSignIn(i);throw new Error("You must provide either an email, phone number, a third-party provider or OpenID Connect.")}catch(l){return{user:null,session:null,error:l}}})}verifyOTP(e,t={}){return pe(this,void 0,void 0,function*(){try{this._removeSession();const{data:r,error:n}=yield this.api.verifyOTP(e,t);if(n)throw n;if(!r)throw"An error occurred on token verification.";let o=null,i=null;return r.access_token&&(o=r,i=o.user,this._saveSession(o),this._notifyAllSubscribers("SIGNED_IN")),r.id&&(i=r),{user:i,session:o,error:null}}catch(r){return{user:null,session:null,error:r}}})}user(){return this.currentUser}session(){return this.currentSession}refreshSession(){var e;return pe(this,void 0,void 0,function*(){try{if(!(!((e=this.currentSession)===null||e===void 0)&&e.access_token))throw new Error("Not logged in.");const{error:t}=yield this._callRefreshToken();if(t)throw t;return{data:this.currentSession,user:this.currentUser,error:null}}catch(t){return{data:null,user:null,error:t}}})}update(e){var t;return pe(this,void 0,void 0,function*(){try{if(!(!((t=this.currentSession)===null||t===void 0)&&t.access_token))throw new Error("Not logged in.");const{user:r,error:n}=yield this.api.updateUser(this.currentSession.access_token,e);if(n)throw n;if(!r)throw Error("Invalid user data.");const o=Object.assign(Object.assign({},this.currentSession),{user:r});return this._saveSession(o),this._notifyAllSubscribers("USER_UPDATED"),{data:r,user:r,error:null}}catch(r){return{data:null,user:null,error:r}}})}setSession(e){return pe(this,void 0,void 0,function*(){try{if(!e)throw new Error("No current session.");const{data:t,error:r}=yield this.api.refreshAccessToken(e);return r?{session:null,error:r}:(this._saveSession(t),this._notifyAllSubscribers("SIGNED_IN"),{session:t,error:null})}catch(t){return{error:t,session:null}}})}setAuth(e){return this.currentSession=Object.assign(Object.assign({},this.currentSession),{access_token:e,token_type:"bearer",user:this.user()}),this._notifyAllSubscribers("TOKEN_REFRESHED"),this.currentSession}getSessionFromUrl(e){return pe(this,void 0,void 0,function*(){try{if(!je())throw new Error("No browser detected.");const t=Pe("error_description");if(t)throw new Error(t);const r=Pe("provider_token"),n=Pe("access_token");if(!n)throw new Error("No access_token detected.");const o=Pe("expires_in");if(!o)throw new Error("No expires_in detected.");const i=Pe("refresh_token");if(!i)throw new Error("No refresh_token detected.");const a=Pe("token_type");if(!a)throw new Error("No token_type detected.");const c=Math.round(Date.now()/1e3)+parseInt(o),{user:u,error:h}=yield this.api.getUser(n);if(h)throw h;const m={provider_token:r,access_token:n,expires_in:parseInt(o),expires_at:c,refresh_token:i,token_type:a,user:u};if(e!=null&&e.storeSession){this._saveSession(m);const p=Pe("type");this._notifyAllSubscribers("SIGNED_IN"),p==="recovery"&&this._notifyAllSubscribers("PASSWORD_RECOVERY")}return window.location.hash="",{data:m,error:null}}catch(t){return{data:null,error:t}}})}signOut(){var e;return pe(this,void 0,void 0,function*(){const t=(e=this.currentSession)===null||e===void 0?void 0:e.access_token;if(this._removeSession(),this._notifyAllSubscribers("SIGNED_OUT"),t){const{error:r}=yield this.api.signOut(t);if(r)return{error:r}}return{error:null}})}onAuthStateChange(e){try{const t=ga(),r={id:t,callback:e,unsubscribe:()=>{this.stateChangeEmitters.delete(t)}};return this.stateChangeEmitters.set(t,r),{data:r,error:null}}catch(t){return{data:null,error:t}}}_handleEmailSignIn(e,t,r={}){var n,o;return pe(this,void 0,void 0,function*(){try{const{data:i,error:a}=yield this.api.signInWithEmail(e,t,{redirectTo:r.redirectTo});return a||!i?{data:null,user:null,session:null,error:a}:((((n=i==null?void 0:i.user)===null||n===void 0?void 0:n.confirmed_at)||((o=i==null?void 0:i.user)===null||o===void 0?void 0:o.email_confirmed_at))&&(this._saveSession(i),this._notifyAllSubscribers("SIGNED_IN")),{data:i,user:i.user,session:i,error:null})}catch(i){return{data:null,user:null,session:null,error:i}}})}_handlePhoneSignIn(e,t){var r;return pe(this,void 0,void 0,function*(){try{const{data:n,error:o}=yield this.api.signInWithPhone(e,t);return o||!n?{data:null,user:null,session:null,error:o}:(!((r=n==null?void 0:n.user)===null||r===void 0)&&r.phone_confirmed_at&&(this._saveSession(n),this._notifyAllSubscribers("SIGNED_IN")),{data:n,user:n.user,session:n,error:null})}catch(n){return{data:null,user:null,session:null,error:n}}})}_handleProviderSignIn(e,t={}){const r=this.api.getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});try{return je()&&(window.location.href=r),{provider:e,url:r,data:null,session:null,user:null,error:null}}catch(n){return r?{provider:e,url:r,data:null,session:null,user:null,error:null}:{data:null,user:null,session:null,error:n}}}_handleOpenIDConnectSignIn({id_token:e,nonce:t,client_id:r,issuer:n,provider:o}){return pe(this,void 0,void 0,function*(){if(e&&t&&(r&&n||o))try{const{data:i,error:a}=yield this.api.signInWithOpenIDConnect({id_token:e,nonce:t,client_id:r,issuer:n,provider:o});return a||!i?{user:null,session:null,error:a}:(this._saveSession(i),this._notifyAllSubscribers("SIGNED_IN"),{user:i.user,session:i,error:null})}catch(i){return{user:null,session:null,error:i}}throw new Error("You must provide a OpenID Connect provider with your id token and nonce.")})}_recoverSession(){try{const e=ba(this.localStorage,_t);if(!e)return null;const{currentSession:t,expiresAt:r}=e,n=Math.round(Date.now()/1e3);r>=n+It&&(t==null?void 0:t.user)&&(this._saveSession(t),this._notifyAllSubscribers("SIGNED_IN"))}catch(e){console.log("error",e)}}_recoverAndRefresh(){return pe(this,void 0,void 0,function*(){try{const e=yield wa(this.localStorage,_t);if(!e)return null;const{currentSession:t,expiresAt:r}=e,n=Math.round(Date.now()/1e3);if(r<n+It)if(this.autoRefreshToken&&t.refresh_token){this.networkRetries++;const{error:o}=yield this._callRefreshToken(t.refresh_token);if(o){if(console.log(o.message),o.message===He.ERROR_MESSAGE&&this.networkRetries<He.MAX_RETRIES){this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),this.refreshTokenTimer=setTimeout(()=>this._recoverAndRefresh(),Math.pow(He.RETRY_INTERVAL,this.networkRetries)*100);return}yield this._removeSession()}this.networkRetries=0}else this._removeSession();else t?(this._saveSession(t),this._notifyAllSubscribers("SIGNED_IN")):(console.log("Current session is missing data."),this._removeSession())}catch(e){return console.error(e),null}})}_callRefreshToken(e){var t;return e===void 0&&(e=(t=this.currentSession)===null||t===void 0?void 0:t.refresh_token),pe(this,void 0,void 0,function*(){try{if(!e)throw new Error("No current session.");const{data:r,error:n}=yield this.api.refreshAccessToken(e);if(n)throw n;if(!r)throw Error("Invalid session data.");return this._saveSession(r),this._notifyAllSubscribers("TOKEN_REFRESHED"),this._notifyAllSubscribers("SIGNED_IN"),{data:r,error:null}}catch(r){return{data:null,error:r}}})}_notifyAllSubscribers(e){this.stateChangeEmitters.forEach(t=>t.callback(e,this.currentSession))}_saveSession(e){this.currentSession=e,this.currentUser=e.user;const t=e.expires_at;if(t){const r=Math.round(Date.now()/1e3),n=t-r,o=n>It?It:.5;this._startAutoRefreshToken((n-o)*1e3)}this.persistSession&&e.expires_at&&this._persistSession(this.currentSession)}_persistSession(e){const t={currentSession:e,expiresAt:e.expires_at};va(this.localStorage,_t,t)}_removeSession(){return pe(this,void 0,void 0,function*(){this.currentSession=null,this.currentUser=null,this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),ya(this.localStorage,_t)})}_startAutoRefreshToken(e){this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),!(e<=0||!this.autoRefreshToken)&&(this.refreshTokenTimer=setTimeout(()=>pe(this,void 0,void 0,function*(){this.networkRetries++;const{error:t}=yield this._callRefreshToken();t||(this.networkRetries=0),(t==null?void 0:t.message)===He.ERROR_MESSAGE&&this.networkRetries<He.MAX_RETRIES&&this._startAutoRefreshToken(Math.pow(He.RETRY_INTERVAL,this.networkRetries)*100)}),e),typeof this.refreshTokenTimer.unref=="function"&&this.refreshTokenTimer.unref())}_listenForMultiTabEvents(){if(!this.multiTab||!je()||!(window!=null&&window.addEventListener))return!1;try{window==null||window.addEventListener("storage",e=>{var t;if(e.key===_t){const r=JSON.parse(String(e.newValue));!((t=r==null?void 0:r.currentSession)===null||t===void 0)&&t.access_token?(this._saveSession(r.currentSession),this._notifyAllSubscribers("SIGNED_IN")):(this._removeSession(),this._notifyAllSubscribers("SIGNED_OUT"))}})}catch(e){console.error("_listenForMultiTabEvents",e)}}_handleVisibilityChange(){if(!this.multiTab||!je()||!(window!=null&&window.addEventListener))return!1;try{window==null||window.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this._recoverAndRefresh()})}catch(e){console.error("_handleVisibilityChange",e)}}}class $a extends Sa{constructor(e){super(e)}}var Fn=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(u){try{c(r.next(u))}catch(h){i(h)}}function l(u){try{c(r.throw(u))}catch(h){i(h)}}function c(u){u.done?o(u.value):n(u.value).then(a,l)}c((r=r.apply(s,e||[])).next())})};class Rr{constructor(e){Object.assign(this,e);let t;e.fetch?t=e.fetch:typeof fetch>"u"?t=(...r)=>Fn(this,void 0,void 0,function*(){return yield(yield Ut(()=>import("./browser-ponyfill-2e15ed5e.js").then(n=>n.b),["_app/immutable/chunks/browser-ponyfill-2e15ed5e.js","_app/immutable/chunks/_commonjsHelpers-e864563f.js"])).fetch(...r)}):t=fetch,this.fetch=(...r)=>t(...r),this.shouldThrowOnError=e.shouldThrowOnError||!1,this.allowEmpty=e.allowEmpty||!1}throwOnError(e){return e==null&&(e=!0),this.shouldThrowOnError=e,this}then(e,t){typeof this.schema>"u"||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let r=this.fetch(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(n=>Fn(this,void 0,void 0,function*(){var o,i,a,l;let c=null,u=null,h=null,m=n.status,p=n.statusText;if(n.ok){const b=(o=this.headers.Prefer)===null||o===void 0?void 0:o.split(",").includes("return=minimal");if(this.method!=="HEAD"&&!b){const I=yield n.text();I&&(this.headers.Accept==="text/csv"?u=I:u=JSON.parse(I))}const S=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),$=(a=n.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");S&&$&&$.length>1&&(h=parseInt($[1]))}else{const b=yield n.text();try{c=JSON.parse(b)}catch{c={message:b}}if(c&&this.allowEmpty&&((l=c==null?void 0:c.details)===null||l===void 0?void 0:l.includes("Results contain 0 rows"))&&(c=null,m=200,p="OK"),c&&this.shouldThrowOnError)throw c}return{error:c,data:u,count:h,status:m,statusText:p,body:u}}));return this.shouldThrowOnError||(r=r.catch(n=>({error:{message:`FetchError: ${n.message}`,details:"",hint:"",code:n.code||""},data:null,body:null,count:null,status:400,statusText:"Bad Request"}))),r.then(e,t)}}class ja extends Rr{select(e="*"){let t=!1;const r=e.split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this}order(e,{ascending:t=!0,nullsFirst:r=!1,foreignTable:n}={}){const o=typeof n>"u"?"order":`${n}.order`,i=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${i?`${i},`:""}${e}.${t?"asc":"desc"}.${r?"nullsfirst":"nullslast"}`),this}limit(e,{foreignTable:t}={}){const r=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:r}={}){const n=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.headers.Accept="application/vnd.pgrst.object+json",this.allowEmpty=!0,this}csv(){return this.headers.Accept="text/csv",this}}class it extends ja{constructor(){super(...arguments),this.cs=this.contains,this.cd=this.containedBy,this.sl=this.rangeLt,this.sr=this.rangeGt,this.nxl=this.rangeGte,this.nxr=this.rangeLte,this.adj=this.rangeAdjacent,this.ov=this.overlaps}not(e,t,r){return this.url.searchParams.append(`${e}`,`not.${t}.${r}`),this}or(e,{foreignTable:t}={}){const r=typeof t>"u"?"or":`${t}.or`;return this.url.searchParams.append(r,`(${e})`),this}eq(e,t){return this.url.searchParams.append(`${e}`,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(`${e}`,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(`${e}`,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(`${e}`,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(`${e}`,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(`${e}`,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(`${e}`,`like.${t}`),this}ilike(e,t){return this.url.searchParams.append(`${e}`,`ilike.${t}`),this}is(e,t){return this.url.searchParams.append(`${e}`,`is.${t}`),this}in(e,t){const r=t.map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(`${e}`,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(`${e}`,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(`${e}`,`cs.{${t.join(",")}}`):this.url.searchParams.append(`${e}`,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(`${e}`,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(`${e}`,`cd.{${t.join(",")}}`):this.url.searchParams.append(`${e}`,`cd.${JSON.stringify(t)}`),this}rangeLt(e,t){return this.url.searchParams.append(`${e}`,`sl.${t}`),this}rangeGt(e,t){return this.url.searchParams.append(`${e}`,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(`${e}`,`nxl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(`${e}`,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(`${e}`,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(`${e}`,`ov.${t}`):this.url.searchParams.append(`${e}`,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n=null}={}){let o="";n==="plain"?o="pl":n==="phrase"?o="ph":n==="websearch"&&(o="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(`${e}`,`${o}fts${i}.${t}`),this}fts(e,t,{config:r}={}){const n=typeof r>"u"?"":`(${r})`;return this.url.searchParams.append(`${e}`,`fts${n}.${t}`),this}plfts(e,t,{config:r}={}){const n=typeof r>"u"?"":`(${r})`;return this.url.searchParams.append(`${e}`,`plfts${n}.${t}`),this}phfts(e,t,{config:r}={}){const n=typeof r>"u"?"":`(${r})`;return this.url.searchParams.append(`${e}`,`phfts${n}.${t}`),this}wfts(e,t,{config:r}={}){const n=typeof r>"u"?"":`(${r})`;return this.url.searchParams.append(`${e}`,`wfts${n}.${t}`),this}filter(e,t,r){return this.url.searchParams.append(`${e}`,`${t}.${r}`),this}match(e){return Object.keys(e).forEach(t=>{this.url.searchParams.append(`${t}`,`eq.${e[t]}`)}),this}}class vs extends Rr{constructor(e,{headers:t={},schema:r,fetch:n,shouldThrowOnError:o}={}){super({fetch:n,shouldThrowOnError:o}),this.url=new URL(e),this.headers=Object.assign({},t),this.schema=r}select(e="*",{head:t=!1,count:r=null}={}){this.method="GET";let n=!1;const o=e.split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),t&&(this.method="HEAD"),new it(this)}insert(e,{upsert:t=!1,onConflict:r,returning:n="representation",count:o=null}={}){this.method="POST";const i=[`return=${n}`];if(t&&i.push("resolution=merge-duplicates"),t&&r!==void 0&&this.url.searchParams.set("on_conflict",r),this.body=e,o&&i.push(`count=${o}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),Array.isArray(e)){const a=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new it(this)}upsert(e,{onConflict:t,returning:r="representation",count:n=null,ignoreDuplicates:o=!1}={}){this.method="POST";const i=[`resolution=${o?"ignore":"merge"}-duplicates`,`return=${r}`];return t!==void 0&&this.url.searchParams.set("on_conflict",t),this.body=e,n&&i.push(`count=${n}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new it(this)}update(e,{returning:t="representation",count:r=null}={}){this.method="PATCH";const n=[`return=${t}`];return this.body=e,r&&n.push(`count=${r}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new it(this)}delete({returning:e="representation",count:t=null}={}){this.method="DELETE";const r=[`return=${e}`];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new it(this)}}class Oa extends Rr{constructor(e,{headers:t={},schema:r,fetch:n,shouldThrowOnError:o}={}){super({fetch:n,shouldThrowOnError:o}),this.url=new URL(e),this.headers=Object.assign({},t),this.schema=r}rpc(e,{head:t=!1,count:r=null}={}){return t?(this.method="HEAD",e&&Object.entries(e).forEach(([n,o])=>{this.url.searchParams.append(n,o)})):(this.method="POST",this.body=e),r&&(this.headers.Prefer!==void 0?this.headers.Prefer+=`,count=${r}`:this.headers.Prefer=`count=${r}`),new it(this)}}const Ia="0.37.4",Ra={"X-Client-Info":`postgrest-js/${Ia}`};class Aa{constructor(e,{headers:t={},schema:r,fetch:n,throwOnError:o}={}){this.url=e,this.headers=Object.assign(Object.assign({},Ra),t),this.schema=r,this.fetch=n,this.shouldThrowOnError=o}auth(e){return this.headers.Authorization=`Bearer ${e}`,this}from(e){const t=`${this.url}/${e}`;return new vs(t,{headers:this.headers,schema:this.schema,fetch:this.fetch,shouldThrowOnError:this.shouldThrowOnError})}rpc(e,t,{head:r=!1,count:n=null}={}){const o=`${this.url}/rpc/${e}`;return new Oa(o,{headers:this.headers,schema:this.schema,fetch:this.fetch,shouldThrowOnError:this.shouldThrowOnError}).rpc(t,{head:r,count:n})}}var ne;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(ne||(ne={}));const xn=(s,e,t={})=>{var r;const n=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((o,i)=>(o[i]=Pa(i,s,e,n),o),{})},Pa=(s,e,t,r)=>{const n=e.find(a=>a.name===s),o=n==null?void 0:n.type,i=t[s];return o&&!r.includes(o)?ws(o,i):kr(i)},ws=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return Ua(e,t)}switch(s){case ne.bool:return Ca(e);case ne.float4:case ne.float8:case ne.int2:case ne.int4:case ne.int8:case ne.numeric:case ne.oid:return Na(e);case ne.json:case ne.jsonb:return Da(e);case ne.timestamp:return Ma(e);case ne.abstime:case ne.date:case ne.daterange:case ne.int4range:case ne.int8range:case ne.money:case ne.reltime:case ne.text:case ne.time:case ne.timestamptz:case ne.timetz:case ne.tsrange:case ne.tstzrange:return kr(e);default:return kr(e)}},kr=s=>s,Ca=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},Na=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},Da=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},Ua=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,r=s[t];if(s[0]==="{"&&r==="}"){let o;const i=s.slice(1,t);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(a=>ws(e,a))}return s},Ma=s=>typeof s=="string"?s.replace(" ","T"):s;var gr,Vn;function La(){if(Vn)return gr;Vn=1;var s=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return gr=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return s()}try{return __global__||s()}finally{delete Object.prototype.__global__}}(),gr}const Ba="websocket",za="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",Ha=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],Ga="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",qa=["I\xF1aki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],Fa="1.0.34",xa={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},Va="https://github.com/theturtle32/WebSocket-Node",Wa={node:">=4.0.0"},Ja={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},Ka={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},Ya={verbose:!1},Xa={test:"tape test/unit/*.js",gulp:"gulp"},Qa="index",Za={lib:"./lib"},el="lib/browser.js",tl="Apache-2.0",rl={name:Ba,description:za,keywords:Ha,author:Ga,contributors:qa,version:Fa,repository:xa,homepage:Va,engines:Wa,dependencies:Ja,devDependencies:Ka,config:Ya,scripts:Xa,main:Qa,directories:Za,browser:el,license:tl};var nl=rl.version,Ge;if(typeof globalThis=="object")Ge=globalThis;else try{Ge=La()}catch{}finally{if(!Ge&&typeof window<"u"&&(Ge=window),!Ge)throw new Error("Could not determine global this")}var kt=Ge.WebSocket||Ge.MozWebSocket,sl=nl;function bs(s,e){var t;return e?t=new kt(s,e):t=new kt(s),t}kt&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(s){Object.defineProperty(bs,s,{get:function(){return kt[s]}})});var il={w3cwebsocket:kt?bs:null,version:sl};const ol="1.7.3",al={"X-Client-Info":`realtime-js/${ol}`},ll="1.0.0",ys=1e4,ul=1e3;var bt;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(bt||(bt={}));var se;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(se||(se={}));var de;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(de||(de={}));var Er;(function(s){s.websocket="websocket"})(Er||(Er={}));var qe;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(qe||(qe={}));class Ar{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class cl{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const n=t.getUint8(1),o=t.getUint8(2);let i=this.HEADER_LENGTH+2;const a=r.decode(e.slice(i,i+n));i=i+n;const l=r.decode(e.slice(i,i+o));i=i+o;const c=JSON.parse(r.decode(e.slice(i,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class at{constructor(e,t,r={},n=ys){this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel instanceof Tr?this.channel.on(this.refEvent,e):this.channel.on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel.trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){!this.refEvent||(this.channel instanceof Tr?this.channel.off(this.refEvent):this.channel.off(this.refEvent,{}))}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}class Tr{constructor(e,t={},r){this.topic=e,this.params=t,this.socket=r,this.bindings=[],this.state=se.closed,this.joinedOnce=!1,this.pushBuffer=[],this.timeout=this.socket.timeout,this.joinPush=new at(this,de.join,this.params,this.timeout),this.rejoinTimer=new Ar(()=>this.rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=se.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this.onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=se.closed,this.socket.remove(this)}),this.onError(n=>{this.isLeaving()||this.isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{!this.isJoining()||(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this.on(de.reply,(n,o)=>{this.trigger(this.replyEventName(o),n)})}rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this.rejoin()}subscribe(e=this.timeout){if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";return this.joinedOnce=!0,this.rejoin(e),this.joinPush}onClose(e){this.on(de.close,e)}onError(e){this.on(de.error,t=>e(t))}on(e,t){this.bindings.push({event:e,callback:t})}off(e){this.bindings=this.bindings.filter(t=>t.event!==e)}canPush(){return this.socket.isConnected()&&this.isJoined()}push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new at(this,e,t,r);return this.canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=se.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this.trigger(de.close,"leave",this.joinRef())};this.joinPush.destroy();let r=new at(this,de.leave,{},e);return r.receive("ok",()=>t()).receive("timeout",()=>t()),r.send(),this.canPush()||r.trigger("ok",{}),r}onMessage(e,t,r){return t}isMember(e){return this.topic===e}joinRef(){return this.joinPush.ref}rejoin(e=this.timeout){this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=se.joining,this.joinPush.resend(e))}trigger(e,t,r){let{close:n,error:o,leave:i,join:a}=de;if(r&&[n,o,i,a].indexOf(e)>=0&&r!==this.joinRef())return;let c=this.onMessage(e,t,r);if(t&&!c)throw"channel onMessage callbacks must return the payload, modified or unmodified";this.bindings.filter(u=>u.event==="*"?e===(t==null?void 0:t.type):u.event===e).map(u=>u.callback(c,r))}replyEventName(e){return`chan_reply_${e}`}isClosed(){return this.state===se.closed}isErrored(){return this.state===se.errored}isJoined(){return this.state===se.joined}isJoining(){return this.state===se.joining}isLeaving(){return this.state===se.leaving}}class ot{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel.on(r.state,{},n=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.joinRef=this.channel.joinRef(),this.state=ot.syncState(this.state,n,o,i),this.pendingDiffs.forEach(l=>{this.state=ot.syncDiff(this.state,l,o,i)}),this.pendingDiffs=[],a()}),this.channel.on(r.diff,{},n=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=ot.syncDiff(this.state,n,o,i),a())})}static syncState(e,t,r,n){const o=this.cloneDeep(e),i=this.transformState(t),a={},l={};return this.map(o,(c,u)=>{i[c]||(l[c]=u)}),this.map(i,(c,u)=>{const h=o[c];if(h){const m=u.map(S=>S.presence_id),p=h.map(S=>S.presence_id),_=u.filter(S=>p.indexOf(S.presence_id)<0),b=h.filter(S=>m.indexOf(S.presence_id)<0);_.length>0&&(a[c]=_),b.length>0&&(l[c]=b)}else a[c]=u}),this.syncDiff(o,{joins:a,leaves:l},r,n)}static syncDiff(e,t,r,n){const{joins:o,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(o,(a,l)=>{const c=e[a];if(e[a]=this.cloneDeep(l),c){const u=e[a].map(m=>m.presence_id),h=c.filter(m=>u.indexOf(m.presence_id)<0);e[a].unshift(...h)}r(a,c,l)}),this.map(i,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(h=>h.presence_id);c=c.filter(h=>u.indexOf(h.presence_id)<0),e[a]=c,n(a,c,l),c.length===0&&delete e[a]}),e}static list(e,t){return t||(t=(r,n)=>n),this.map(e,(r,n)=>t(r,n))}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const n=e[r];return"metas"in n?t[r]=n.metas.map(o=>(o.presence_id=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[r]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}list(e){return ot.list(this.state,e)}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel.joinRef()}}class Nt{constructor(e,t={},r){this.topic=e,this.params=t,this.socket=r,this.bindings=[],this.state=se.closed,this.joinedOnce=!1,this.pushBuffer=[],this.timeout=this.socket.timeout,this.joinPush=new at(this,de.join,this.params,this.timeout),this.rejoinTimer=new Ar(()=>this.rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=se.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this.onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=se.closed,this.socket.remove(this)}),this.onError(n=>{this.isLeaving()||this.isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{!this.isJoining()||(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this.on(de.reply,{},(n,o)=>{this.trigger(this.replyEventName(o),n)}),this.presence=new ot(this)}list(){return this.presence.list()}rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this.rejoin()}subscribe(e=this.timeout){if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const t=this.bindings.reduce((r,n)=>{const{type:o}=n;return["phx_close","phx_error","phx_reply","presence_diff","presence_state"].includes(o)||(r[o]=n),r},{});return Object.keys(t).length&&this.updateJoinPayload({configs:t}),this.joinedOnce=!0,this.rejoin(e),this.joinPush}}onClose(e){this.on(de.close,{},e)}onError(e){this.on(de.error,{},t=>e(t))}on(e,t,r){this.bindings.push({type:e,filter:t!=null?t:{},callback:r!=null?r:()=>{}})}off(e,t){this.bindings=this.bindings.filter(r=>!(r.type===e&&Nt.isEqual(r.filter,t)))}canPush(){return this.socket.isConnected()&&this.isJoined()}push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new at(this,e,t,r);return this.canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=se.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this.trigger(de.close,"leave",this.joinRef())};this.joinPush.destroy();const r=new at(this,de.leave,{},e);return r.receive("ok",()=>t()).receive("timeout",()=>t()),r.send(),this.canPush()||r.trigger("ok",{}),r}onMessage(e,t,r){return t}isMember(e){return this.topic===e}joinRef(){return this.joinPush.ref}rejoin(e=this.timeout){this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=se.joining,this.joinPush.resend(e))}trigger(e,t,r){const{close:n,error:o,leave:i,join:a}=de;if(r&&[n,o,i,a].indexOf(e)>=0&&r!==this.joinRef())return;const c=this.onMessage(e,t,r);if(t&&!c)throw"channel onMessage callbacks must return the payload, modified or unmodified";this.bindings.filter(u=>{var h,m;return(u==null?void 0:u.type)===e&&(((h=u==null?void 0:u.filter)===null||h===void 0?void 0:h.event)==="*"||((m=u==null?void 0:u.filter)===null||m===void 0?void 0:m.event)===(t==null?void 0:t.event))}).map(u=>u.callback(c,r))}send(e){const t=this.push(e.type,e);return new Promise(r=>{t.receive("ok",()=>r("ok")),t.receive("timeout",()=>r("timeout"))})}replyEventName(e){return`chan_reply_${e}`}isClosed(){return this.state===se.closed}isErrored(){return this.state===se.errored}isJoined(){return this.state===se.joined}isJoining(){return this.state===se.joining}isLeaving(){return this.state===se.leaving}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}}var hl=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(u){try{c(r.next(u))}catch(h){i(h)}}function l(u){try{c(r.throw(u))}catch(h){i(h)}}function c(u){u.done?o(u.value):n(u.value).then(a,l)}c((r=r.apply(s,e||[])).next())})},fl=globalThis&&globalThis.__rest||function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(s);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(s,r[n])&&(t[r[n]]=s[r[n]]);return t};const dl=()=>{};class ml{constructor(e,t){this.accessToken=null,this.channels=[],this.endPoint="",this.headers=al,this.params={},this.timeout=ys,this.transport=il.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.longpollerTimeout=2e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=dl,this.conn=null,this.sendBuffer=[],this.serializer=new cl,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.endPoint=`${e}/${Er.websocket}`,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.transport&&(this.transport=t.transport),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs),t!=null&&t.longpollerTimeout&&(this.longpollerTimeout=t.longpollerTimeout),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:r=>[1e3,2e3,5e3,1e4][r-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(r,n)=>n(JSON.stringify(r)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Ar(()=>hl(this,void 0,void 0,function*(){yield this.disconnect(),this.connect()}),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this.endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this.onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){return new Promise((r,n)=>{try{this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t||""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset()),r({error:null,data:!0})}catch(o){r({error:o,data:!1})}})}log(e,t,r){this.logger(e,t,r)}onOpen(e){this.stateChangeCallbacks.open.push(e)}onClose(e){this.stateChangeCallbacks.close.push(e)}onError(e){this.stateChangeCallbacks.error.push(e)}onMessage(e){this.stateChangeCallbacks.message.push(e)}connectionState(){switch(this.conn&&this.conn.readyState){case bt.connecting:return qe.Connecting;case bt.open:return qe.Open;case bt.closing:return qe.Closing;default:return qe.Closed}}isConnected(){return this.connectionState()===qe.Open}remove(e){this.channels=this.channels.filter(t=>t.joinRef()!==e.joinRef())}channel(e,t={}){var r;const{selfBroadcast:n}=t,o=fl(t,["selfBroadcast"]);n&&(o.self_broadcast=n);const i=!((r=this.params)===null||r===void 0)&&r.vsndate?new Nt(e,o,this):new Tr(e,o,this);return i instanceof Nt&&(i.presence.onJoin((a,l,c)=>{i.trigger("presence",{event:"JOIN",key:a,currentPresences:l,newPresences:c})}),i.presence.onLeave((a,l,c)=>{i.trigger("presence",{event:"LEAVE",key:a,currentPresences:l,leftPresences:c})}),i.presence.onSync(()=>{i.trigger("presence",{event:"SYNC"})})),this.channels.push(i),i}push(e){const{topic:t,event:r,payload:n,ref:o}=e;let i=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${r} (${o})`,n),this.isConnected()?i():this.sendBuffer.push(i)}onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:n,payload:o,ref:i}=t;(i&&i===this.pendingHeartbeatRef||n===(o==null?void 0:o.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${n} ${i&&"("+i+")"||""}`,o),this.channels.filter(a=>a.isMember(r)).forEach(a=>a.trigger(n,o,i)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ll}))}makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({user_token:e}),t.joinedOnce&&t.isJoined()&&t.push(de.access_token,{access_token:e})})}leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r.isJoined()||r.isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_onConnOpen(){this.log("transport",`connected to ${this.endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e.trigger(de.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${r}${n}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(!!this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(ul,"hearbeat timeout");return}this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class pl{constructor(e,t,r,n){const o={},i=n==="*"?`realtime:${r}`:`realtime:${r}:${n}`,a=t.Authorization.split(" ")[1];a&&(o.user_token=a),this.subscription=e.channel(i,o)}getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=xn(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=xn(e.columns,e.old_record)),t}on(e,t){return this.subscription.on(e,r=>{let n={schema:r.schema,table:r.table,commit_timestamp:r.commit_timestamp,eventType:r.type,new:{},old:{},errors:r.errors};n=Object.assign(Object.assign({},n),this.getPayloadRecords(r)),t(n)}),this}subscribe(e=()=>{}){return this.subscription.onError(t=>e("SUBSCRIPTION_ERROR",t)),this.subscription.onClose(()=>e("CLOSED")),this.subscription.subscribe().receive("ok",()=>e("SUBSCRIBED")).receive("error",t=>e("SUBSCRIPTION_ERROR",t)).receive("timeout",()=>e("RETRYING_AFTER_TIMEOUT")),this.subscription}}class gl extends vs{constructor(e,{headers:t={},schema:r,realtime:n,table:o,fetch:i,shouldThrowOnError:a}){super(e,{headers:t,schema:r,fetch:i,shouldThrowOnError:a}),this._subscription=null,this._realtime=n,this._headers=t,this._schema=r,this._table=o}on(e,t){return this._realtime.isConnected()||this._realtime.connect(),this._subscription||(this._subscription=new pl(this._realtime,this._headers,this._schema,this._table)),this._subscription.on(e,t)}}const _l="0.0.0",vl={"X-Client-Info":`storage-js/${_l}`};var St=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(u){try{c(r.next(u))}catch(h){i(h)}}function l(u){try{c(r.throw(u))}catch(h){i(h)}}function c(u){u.done?o(u.value):n(u.value).then(a,l)}c((r=r.apply(s,e||[])).next())})};const wl=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),bl=(s,e)=>{if(typeof s.json!="function")return e(s);s.json().then(t=>e({message:wl(t),status:(s==null?void 0:s.status)||500}))},yl=(s,e,t,r)=>{const n={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),t))};function zt(s,e,t,r,n,o){return St(this,void 0,void 0,function*(){return new Promise((i,a)=>{s(t,yl(e,r,n,o)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?i(l):l.json()}).then(l=>i(l)).catch(l=>bl(l,a))})})}function Sr(s,e,t,r){return St(this,void 0,void 0,function*(){return zt(s,"GET",e,t,r)})}function Fe(s,e,t,r,n){return St(this,void 0,void 0,function*(){return zt(s,"POST",e,r,n,t)})}function kl(s,e,t,r,n){return St(this,void 0,void 0,function*(){return zt(s,"PUT",e,r,n,t)})}function ks(s,e,t,r,n){return St(this,void 0,void 0,function*(){return zt(s,"DELETE",e,r,n,t)})}var El=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(u){try{c(r.next(u))}catch(h){i(h)}}function l(u){try{c(r.throw(u))}catch(h){i(h)}}function c(u){u.done?o(u.value):n(u.value).then(a,l)}c((r=r.apply(s,e||[])).next())})};const Es=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>El(void 0,void 0,void 0,function*(){return yield(yield Ut(()=>import("./browser-ponyfill-2e15ed5e.js").then(r=>r.b),["_app/immutable/chunks/browser-ponyfill-2e15ed5e.js","_app/immutable/chunks/_commonjsHelpers-e864563f.js"])).fetch(...t)}):e=fetch,(...t)=>e(...t)};var st=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(u){try{c(r.next(u))}catch(h){i(h)}}function l(u){try{c(r.throw(u))}catch(h){i(h)}}function c(u){u.done?o(u.value):n(u.value).then(a,l)}c((r=r.apply(s,e||[])).next())})};class Tl{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},vl),t),this.fetch=Es(r)}listBuckets(){return st(this,void 0,void 0,function*(){try{return{data:yield Sr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){return{data:null,error:e}}})}getBucket(e){return st(this,void 0,void 0,function*(){try{return{data:yield Sr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}createBucket(e,t={public:!1}){return st(this,void 0,void 0,function*(){try{return{data:(yield Fe(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public},{headers:this.headers})).name,error:null}}catch(r){return{data:null,error:r}}})}updateBucket(e,t){return st(this,void 0,void 0,function*(){try{return{data:yield kl(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public},{headers:this.headers}),error:null}}catch(r){return{data:null,error:r}}})}emptyBucket(e){return st(this,void 0,void 0,function*(){try{return{data:yield Fe(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}deleteBucket(e){return st(this,void 0,void 0,function*(){try{return{data:yield ks(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}}var Se=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(u){try{c(r.next(u))}catch(h){i(h)}}function l(u){try{c(r.throw(u))}catch(h){i(h)}}function c(u){u.done?o(u.value):n(u.value).then(a,l)}c((r=r.apply(s,e||[])).next())})};const Sl={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$l={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class jl{constructor(e,t={},r,n){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Es(n)}uploadOrUpdate(e,t,r,n){return Se(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},$l),n),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",i.cacheControl)):(o=r,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType);const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield this.fetch(`${this.url}/object/${c}`,{method:e,body:o,headers:a});if(u.ok)return{data:{Key:c},error:null};{const h=yield u.json();return{data:null,error:h}}}catch(o){return{data:null,error:o}}})}upload(e,t,r){return Se(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}update(e,t,r){return Se(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t){return Se(this,void 0,void 0,function*(){try{return{data:yield Fe(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(r){return{data:null,error:r}}})}copy(e,t){return Se(this,void 0,void 0,function*(){try{return{data:yield Fe(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(r){return{data:null,error:r}}})}createSignedUrl(e,t){return Se(this,void 0,void 0,function*(){try{const r=this._getFinalPath(e);let n=yield Fe(this.fetch,`${this.url}/object/sign/${r}`,{expiresIn:t},{headers:this.headers});const o=`${this.url}${n.signedURL}`;return n={signedURL:o},{data:n,error:null,signedURL:o}}catch(r){return{data:null,error:r,signedURL:null}}})}createSignedUrls(e,t){return Se(this,void 0,void 0,function*(){try{return{data:(yield Fe(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers})).map(n=>Object.assign(Object.assign({},n),{signedURL:n.signedURL?`${this.url}${n.signedURL}`:null})),error:null}}catch(r){return{data:null,error:r}}})}download(e){return Se(this,void 0,void 0,function*(){try{const t=this._getFinalPath(e);return{data:yield(yield Sr(this.fetch,`${this.url}/object/${t}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(t){return{data:null,error:t}}})}getPublicUrl(e){try{const t=this._getFinalPath(e),r=`${this.url}/object/public/${t}`;return{data:{publicURL:r},error:null,publicURL:r}}catch(t){return{data:null,error:t,publicURL:null}}}remove(e){return Se(this,void 0,void 0,function*(){try{return{data:yield ks(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}list(e,t,r){return Se(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Sl),t),{prefix:e||""});return{data:yield Fe(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){return{data:null,error:n}}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}}class Ol extends Tl{constructor(e,t={},r){super(e,t,r)}from(e){return new jl(this.url,this.headers,e,this.fetch)}}var Il=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(u){try{c(r.next(u))}catch(h){i(h)}}function l(u){try{c(r.throw(u))}catch(h){i(h)}}function c(u){u.done?o(u.value):n(u.value).then(a,l)}c((r=r.apply(s,e||[])).next())})};const Rl=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Il(void 0,void 0,void 0,function*(){return yield(yield Ut(()=>import("./browser-ponyfill-2e15ed5e.js").then(r=>r.b),["_app/immutable/chunks/browser-ponyfill-2e15ed5e.js","_app/immutable/chunks/_commonjsHelpers-e864563f.js"])).fetch(...t)}):e=fetch,(...t)=>e(...t)};var Al=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(u){try{c(r.next(u))}catch(h){i(h)}}function l(u){try{c(r.throw(u))}catch(h){i(h)}}function c(u){u.done?o(u.value):n(u.value).then(a,l)}c((r=r.apply(s,e||[])).next())})};class Pl{constructor(e,{headers:t={},customFetch:r}={}){this.url=e,this.headers=t,this.fetch=Rl(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t){return Al(this,void 0,void 0,function*(){try{const{headers:r,body:n}=t!=null?t:{},o=yield this.fetch(`${this.url}/${e}`,{method:"POST",headers:Object.assign({},this.headers,r),body:n}),i=o.headers.get("x-relay-error");if(i&&i==="true")return{data:null,error:new Error(yield o.text())};let a;const{responseType:l}=t!=null?t:{};return!l||l==="json"?a=yield o.json():l==="arrayBuffer"?a=yield o.arrayBuffer():l==="blob"?a=yield o.blob():a=yield o.text(),{data:a,error:null}}catch(r){return{data:null,error:r}}})}}var At=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(u){try{c(r.next(u))}catch(h){i(h)}}function l(u){try{c(r.throw(u))}catch(h){i(h)}}function c(u){u.done?o(u.value):n(u.value).then(a,l)}c((r=r.apply(s,e||[])).next())})};const Cl={schema:"public",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,multiTab:!0,headers:_s};class Nl{constructor(e,t,r){if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const n=na(e),o=Object.assign(Object.assign({},Cl),r);if(this.restUrl=`${n}/rest/v1`,this.realtimeUrl=`${n}/realtime/v1`.replace("http","ws"),this.authUrl=`${n}/auth/v1`,this.storageUrl=`${n}/storage/v1`,n.match(/(supabase\.co)|(supabase\.in)/)){const a=n.split(".");this.functionsUrl=`${a[0]}.functions.${a[1]}.${a[2]}`}else this.functionsUrl=`${n}/functions/v1`;this.schema=o.schema,this.multiTab=o.multiTab,this.fetch=o.fetch,this.headers=Object.assign(Object.assign({},_s),r==null?void 0:r.headers),this.shouldThrowOnError=o.shouldThrowOnError||!1,this.auth=this._initSupabaseAuthClient(o),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},o.realtime)),this._listenForAuthEvents(),this._listenForMultiTabEvents()}get functions(){return new Pl(this.functionsUrl,{headers:this._getAuthHeaders(),customFetch:this.fetch})}get storage(){return new Ol(this.storageUrl,this._getAuthHeaders(),this.fetch)}from(e){const t=`${this.restUrl}/${e}`;return new gl(t,{headers:this._getAuthHeaders(),schema:this.schema,realtime:this.realtime,table:e,fetch:this.fetch,shouldThrowOnError:this.shouldThrowOnError})}rpc(e,t,{head:r=!1,count:n=null}={}){return this._initPostgRESTClient().rpc(e,t,{head:r,count:n})}channel(e,t){var r,n;const o=(n=(r=this.auth.session())===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:this.supabaseKey;return this.realtime.isConnected()||this.realtime.connect(),this.realtime.channel(e,Object.assign(Object.assign({},t),{user_token:o}))}removeAllSubscriptions(){return At(this,void 0,void 0,function*(){const e=this.getSubscriptions().slice(),t=e.map(n=>this.removeSubscription(n));return(yield Promise.all(t)).map(({error:n},o)=>({data:{subscription:e[o]},error:n}))})}removeChannel(e){return At(this,void 0,void 0,function*(){const{error:t}=yield this._closeSubscription(e),r=this.getSubscriptions(),n=r.filter(o=>o.isJoined()).length;return r.length===0&&(yield this.realtime.disconnect()),{data:{openChannels:n},error:t}})}removeSubscription(e){return At(this,void 0,void 0,function*(){const{error:t}=yield this._closeSubscription(e),r=this.getSubscriptions(),n=r.filter(o=>o.isJoined()).length;return r.length===0&&(yield this.realtime.disconnect()),{data:{openSubscriptions:n},error:t}})}_closeSubscription(e){return At(this,void 0,void 0,function*(){let t=null;if(!e.isClosed()){const{error:r}=yield this._unsubscribeSubscription(e);t=r}return this.realtime.remove(e),{error:t}})}_unsubscribeSubscription(e){return new Promise(t=>{e.unsubscribe().receive("ok",()=>t({error:null})).receive("error",r=>t({error:r})).receive("timeout",()=>t({error:new Error("timed out")}))})}getSubscriptions(){return this.realtime.channels}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,localStorage:n,headers:o,fetch:i,cookieOptions:a,multiTab:l}){const c={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new $a({url:this.authUrl,headers:Object.assign(Object.assign({},o),c),autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,localStorage:n,fetch:i,cookieOptions:a,multiTab:l})}_initRealtimeClient(e){return new ml(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign(Object.assign({},e==null?void 0:e.params),{apikey:this.supabaseKey})}))}_initPostgRESTClient(){return new Aa(this.restUrl,{headers:this._getAuthHeaders(),schema:this.schema,fetch:this.fetch,throwOnError:this.shouldThrowOnError})}_getAuthHeaders(){var e,t;const r=Object.assign({},this.headers),n=(t=(e=this.auth.session())===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey;return r.apikey=this.supabaseKey,r.Authorization=r.Authorization||`Bearer ${n}`,r}_listenForMultiTabEvents(){if(!this.multiTab||!sa()||!(window!=null&&window.addEventListener))return null;try{return window==null?void 0:window.addEventListener("storage",e=>{var t,r,n;if(e.key===ra){const o=JSON.parse(String(e.newValue)),i=(r=(t=o==null?void 0:o.currentSession)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:void 0,a=(n=this.auth.session())===null||n===void 0?void 0:n.access_token;i?!a&&i?this._handleTokenChanged("SIGNED_IN",i,"STORAGE"):a!==i&&this._handleTokenChanged("TOKEN_REFRESHED",i,"STORAGE"):this._handleTokenChanged("SIGNED_OUT",i,"STORAGE")}})}catch(e){return console.error("_listenForMultiTabEvents",e),null}}_listenForAuthEvents(){let{data:e}=this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,r==null?void 0:r.access_token,"CLIENT")});return e}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==t?(this.realtime.setAuth(t),r=="STORAGE"&&this.auth.setAuth(t),this.changedAccessToken=t):(e==="SIGNED_OUT"||e==="USER_DELETED")&&(this.realtime.setAuth(this.supabaseKey),r=="STORAGE"&&this.auth.signOut())}}const Dl=(s,e,t)=>new Nl(s,e,t),Ul="https://dbmtysppmiwwjwaeneex.supabase.co",Ml="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRibXR5c3BwbWl3d2p3YWVuZWV4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2NDQ5NTI0NDUsImV4cCI6MTk2MDUyODQ0NX0.i_1JrAfv5fieeVaiJrVIQPL6V0_-H9sR-PKIuGDAIfI",$t=Dl(Ul,Ml),Eu=async({email:s,password:e})=>{const t=await $t.auth.signIn({email:s,password:e});if(t.error)throw console.log(t.error),new Error("signIn failed");if(t.user)return!0;throw new Error("no user found")},Ll=async s=>{const e=await $t.from("wordgame_wod-questions");if(e.error)throw console.log(e.error),new Error("getQuestions failed");if(e.data.length)return e.data;throw new Error("no questions matching that game id")},Bl=async({gameId:s,column:e})=>{const t=await $t.from("wordgame_games").select(e).eq("game_id",s);if(t.error)throw console.log(t.error),new Error("getGameColumn failed");if(t.data.length)return t.data[0][e];throw new Error("no games matching this id")},Pr=async({table:s,column:e,value:t,gameId:r})=>{const n=await $t.from(s).update({[e]:t}).eq("game_id",r);if(n.error)throw console.log(n.error),new Error("update failed");if(n.data)return n.data},Ts=async({table:s,data:e})=>{const t={returning:"minimal"},r=await $t.from(s).insert(e,t);if(r.error)throw console.log(r.error),new Error("insert failed");return!0};function Wn(s,e,t){const r=s.slice();return r[22]=e[t].id,r[23]=e[t].text,r[24]=e[t].detail,r[25]=e[t].type,r[26]=e[t].limit,r[27]=e[t].required,r[28]=e,r[29]=t,r}function zl(s){let e,t,r,n,o,i,a,l,c,u;return{c(){e=v("div"),t=v("div"),r=v("button"),n=z("How to Play"),o=N(),i=v("div"),a=v("button"),l=z("play"),this.h()},l(h){e=w(h,"DIV",{class:!0});var m=T(e);t=w(m,"DIV",{class:!0});var p=T(t);r=w(p,"BUTTON",{});var _=T(r);n=H(_,"How to Play"),_.forEach(f),p.forEach(f),o=D(m),i=w(m,"DIV",{class:!0});var b=T(i);a=w(b,"BUTTON",{});var S=T(a);l=H(S,"play"),S.forEach(f),b.forEach(f),m.forEach(f),this.h()},h(){g(t,"class","rules"),g(i,"class","play"),g(e,"class","cta")},m(h,m){A(h,e,m),d(e,t),d(t,r),d(r,n),d(e,o),d(e,i),d(i,a),d(a,l),c||(u=[le(r,"click",s[17]),le(a,"click",s[18])],c=!0)},p:Q,d(h){h&&f(e),c=!1,De(u)}}}function Hl(s){let e,t,r,n,o,i;function a(u,h){return u[6]?ql:Gl}let l=a(s),c=l(s);return{c(){e=v("p"),t=z("tell us about yourself. "),r=v("strong"),n=z(`note: anything you submit below may appear for the rest of the internet
			to see. we may lightly edit answers for brevity.`),o=N(),c.c(),i=ie()},l(u){e=w(u,"P",{});var h=T(e);t=H(h,"tell us about yourself. "),r=w(h,"STRONG",{});var m=T(r);n=H(m,`note: anything you submit below may appear for the rest of the internet
			to see. we may lightly edit answers for brevity.`),m.forEach(f),h.forEach(f),o=D(u),c.l(u),i=ie()},m(u,h){A(u,e,h),d(e,t),d(e,r),d(r,n),A(u,o,h),c.m(u,h),A(u,i,h)},p(u,h){l===(l=a(u))&&c?c.p(u,h):(c.d(1),c=l(u),c&&(c.c(),c.m(i.parentNode,i)))},d(u){u&&f(e),u&&f(o),c.d(u),u&&f(i)}}}function Gl(s){let e,t,r,n,o,i,a,l,c,u,h,m,p,_,b,S=s[5],$=[];for(let I=0;I<S.length;I+=1)$[I]=Jn(Wn(s,S,I));return{c(){e=v("form");for(let I=0;I<$.length;I+=1)$[I].c();t=N(),r=v("div"),n=v("button"),o=z("give me a different question"),i=N(),a=v("label"),l=z(s[3]),c=N(),u=v("input"),h=N(),m=v("button"),p=z("Submit"),this.h()},l(I){e=w(I,"FORM",{});var E=T(e);for(let G=0;G<$.length;G+=1)$[G].l(E);t=D(E),r=w(E,"DIV",{});var k=T(r);n=w(k,"BUTTON",{type:!0});var R=T(n);o=H(R,"give me a different question"),R.forEach(f),i=D(k),a=w(k,"LABEL",{for:!0});var q=T(a);l=H(q,s[3]),q.forEach(f),c=D(k),u=w(k,"INPUT",{id:!0,maxlength:!0,placeholder:!0}),k.forEach(f),h=D(E),m=w(E,"BUTTON",{type:!0});var C=T(m);p=H(C,"Submit"),C.forEach(f),E.forEach(f),this.h()},h(){g(n,"type","button"),g(a,"for","question-bio"),u.required=!1,g(u,"id","question-bio"),g(u,"maxlength","100"),g(u,"placeholder","answer here"),g(m,"type","submit")},m(I,E){A(I,e,E);for(let k=0;k<$.length;k+=1)$[k].m(e,null);d(e,t),d(e,r),d(r,n),d(n,o),d(r,i),d(r,a),d(a,l),d(r,c),d(r,u),lt(u,s[4]),d(e,h),d(e,m),d(m,p),_||(b=[le(n,"click",s[9]),le(u,"input",s[16]),le(e,"submit",Ms(s[10]))],_=!0)},p(I,E){if(E&32){S=I[5];let k;for(k=0;k<S.length;k+=1){const R=Wn(I,S,k);$[k]?$[k].p(R,E):($[k]=Jn(R),$[k].c(),$[k].m(e,t))}for(;k<$.length;k+=1)$[k].d(1);$.length=S.length}E&8&&we(l,I[3]),E&16&&u.value!==I[4]&&lt(u,I[4])},d(I){I&&f(e),$e($,I),_=!1,De(b)}}}function ql(s){let e,t;return{c(){e=v("p"),t=z("Error")},l(r){e=w(r,"P",{});var n=T(e);t=H(n,"Error"),n.forEach(f)},m(r,n){A(r,e,n),d(e,t)},p:Q,d(r){r&&f(e)}}}function Fl(s){let e,t,r,n,o,i,a;function l(){s[15].call(e,s[29])}return{c(){e=v("input"),this.h()},l(c){e=w(c,"INPUT",{id:!0,placeholder:!0,maxlength:!0}),this.h()},h(){e.required=t=s[27],g(e,"id",r="question-"+s[22]),g(e,"placeholder",n=s[22]),g(e,"maxlength",o=s[26])},m(c,u){A(c,e,u),lt(e,s[5][s[29]].answer),i||(a=le(e,"input",l),i=!0)},p(c,u){s=c,u&32&&t!==(t=s[27])&&(e.required=t),u&32&&r!==(r="question-"+s[22])&&g(e,"id",r),u&32&&n!==(n=s[22])&&g(e,"placeholder",n),u&32&&o!==(o=s[26])&&g(e,"maxlength",o),u&32&&e.value!==s[5][s[29]].answer&&lt(e,s[5][s[29]].answer)},d(c){c&&f(e),i=!1,a()}}}function xl(s){let e,t,r,n,o,i,a,l,c,u,h,m,p,_,b,S,$,I;s[12][0][s[29]]=[];function E(){s[11].call(t,s[29])}function k(){s[13].call(a,s[29])}function R(){s[14].call(m,s[29])}return{c(){e=v("fieldset"),t=v("input"),r=N(),n=v("label"),o=z("they/them"),i=N(),a=v("input"),l=N(),c=v("label"),u=z("she/her"),h=N(),m=v("input"),p=N(),_=v("label"),b=z("he/him"),this.h()},l(q){e=w(q,"FIELDSET",{id:!0});var C=T(e);t=w(C,"INPUT",{id:!0,type:!0,name:!0}),r=D(C),n=w(C,"LABEL",{for:!0});var G=T(n);o=H(G,"they/them"),G.forEach(f),i=D(C),a=w(C,"INPUT",{id:!0,type:!0,name:!0}),l=D(C),c=w(C,"LABEL",{for:!0});var L=T(c);u=H(L,"she/her"),L.forEach(f),h=D(C),m=w(C,"INPUT",{id:!0,type:!0,name:!0}),p=D(C),_=w(C,"LABEL",{for:!0});var te=T(_);b=H(te,"he/him"),te.forEach(f),C.forEach(f),this.h()},h(){g(t,"id","pronoun-1"),g(t,"type","radio"),g(t,"name","pronoun"),t.__value="they/them",t.value=t.__value,s[12][0][s[29]].push(t),g(n,"for","pronoun-1"),g(a,"id","pronoun-2"),g(a,"type","radio"),g(a,"name","pronoun"),a.__value="she/her",a.value=a.__value,s[12][0][s[29]].push(a),g(c,"for","pronoun-2"),g(m,"id","pronoun-3"),g(m,"type","radio"),g(m,"name","pronoun"),m.__value="he/him",m.value=m.__value,s[12][0][s[29]].push(m),g(_,"for","pronoun-3"),g(e,"id",S="question-"+s[22])},m(q,C){A(q,e,C),d(e,t),t.checked=t.__value===s[5][s[29]].answer,d(e,r),d(e,n),d(n,o),d(e,i),d(e,a),a.checked=a.__value===s[5][s[29]].answer,d(e,l),d(e,c),d(c,u),d(e,h),d(e,m),m.checked=m.__value===s[5][s[29]].answer,d(e,p),d(e,_),d(_,b),$||(I=[le(t,"change",E),le(a,"change",k),le(m,"change",R)],$=!0)},p(q,C){s=q,C&32&&(t.checked=t.__value===s[5][s[29]].answer),C&32&&(a.checked=a.__value===s[5][s[29]].answer),C&32&&(m.checked=m.__value===s[5][s[29]].answer),C&32&&S!==(S="question-"+s[22])&&g(e,"id",S)},d(q){q&&f(e),s[12][0][s[29]].splice(s[12][0][s[29]].indexOf(t),1),s[12][0][s[29]].splice(s[12][0][s[29]].indexOf(a),1),s[12][0][s[29]].splice(s[12][0][s[29]].indexOf(m),1),$=!1,De(I)}}}function Jn(s){let e,t,r=s[23]+"",n,o,i,a,l=s[24]+"",c;function u(p,_){return p[22]==="pronoun"?xl:Fl}let h=u(s),m=h(s);return{c(){e=v("div"),t=v("label"),n=z(r),i=N(),a=v("p"),c=N(),m.c(),this.h()},l(p){e=w(p,"DIV",{});var _=T(e);t=w(_,"LABEL",{for:!0});var b=T(t);n=H(b,r),b.forEach(f),i=D(_),a=w(_,"P",{});var S=T(a);S.forEach(f),c=D(_),m.l(_),_.forEach(f),this.h()},h(){g(t,"for",o="question-"+s[22])},m(p,_){A(p,e,_),d(e,t),d(t,n),d(e,i),d(e,a),a.innerHTML=l,d(e,c),m.m(e,null)},p(p,_){_&32&&r!==(r=p[23]+"")&&we(n,r),_&32&&o!==(o="question-"+p[22])&&g(t,"for",o),_&32&&l!==(l=p[24]+"")&&(a.innerHTML=l),h===(h=u(p))&&m?m.p(p,_):(m.d(1),m=h(p),m&&(m.c(),m.m(e,null)))},d(p){p&&f(e),m.d()}}}function Vl(s){let e,t,r,n,o,i,a;function l(h,m){if(!h[0])return Hl;if(h[1]&&!h[2])return zl}let c=l(s),u=c&&c(s);return{c(){e=v("h2"),t=z("welcome, stranger!"),r=N(),n=v("p"),o=z("let's play a word game."),i=N(),u&&u.c(),a=ie(),this.h()},l(h){e=w(h,"H2",{class:!0});var m=T(e);t=H(m,"welcome, stranger!"),m.forEach(f),r=D(h),n=w(h,"P",{});var p=T(n);o=H(p,"let's play a word game."),p.forEach(f),i=D(h),u&&u.l(h),a=ie(),this.h()},h(){g(e,"class","svelte-1uum1kk")},m(h,m){A(h,e,m),d(e,t),A(h,r,m),A(h,n,m),d(n,o),A(h,i,m),u&&u.m(h,m),A(h,a,m)},p(h,[m]){c===(c=l(h))&&u?u.p(h,m):(u&&u.d(1),u=c&&c(h),u&&(u.c(),u.m(a.parentNode,a)))},i:Q,o:Q,d(h){h&&f(e),h&&f(r),h&&f(n),h&&f(i),u&&u.d(h),h&&f(a)}}}function Wl(s,e,t){let r,n,o;B(s,Or,L=>t(21,n=L)),B(s,Ne,L=>t(7,o=L));let{wodReady:i}=e,{loaded:a}=e,{hideButton:l}=e;const c=ft(),u=[{id:"name",limit:12,text:"What is your name?",detail:"e.g., <em>Jane Doe</em> or <em>J. Doe</em> or <em>Jane</em>",required:!0},{id:"location",limit:12,text:"Where are from/living?",detail:"Optional",required:!1},{id:"pronoun",text:"What are your preferred pronouns?",required:!0},{id:"plug",limit:48,text:"What would you like to plug (about yourself, something, etc) at the end of the game?",detail:"e.g., <em>Follow me on Twitter @wordsagainststrangers</em> or <em>Have a great day!</em>",required:!1}];let h=[],m,p,_;const b=()=>{const L=Math.floor(Math.random()*h.length);t(3,p=h[L].question)},S=async()=>{try{const L={game_id:n};[...u,{id:"bio",answer:r}].forEach(({id:Y,answer:M})=>{L[Y]=M}),await Ts({table:"wordgame_wod-info",data:[L]}),await Pr({table:"wordgame_games",column:"wod_info",value:!0,gameId:n}),t(0,i=!0)}catch(L){console.log(L)}};Et(async()=>{try{const L=await Bl({gameId:n,column:"wod_info"});t(0,i=L),L||(h=await Ll(n),b())}catch{t(6,m=!0)}});const $=[[]];function I(L){u[L].answer=this.__value,t(5,u)}function E(L){u[L].answer=this.__value,t(5,u)}function k(L){u[L].answer=this.__value,t(5,u)}function R(L){u[L].answer=this.value,t(5,u)}function q(){_=this.value,t(4,_)}const C=()=>{_e(Ne,o="rules",o)},G=()=>c("play");return s.$$set=L=>{"wodReady"in L&&t(0,i=L.wodReady),"loaded"in L&&t(1,a=L.loaded),"hideButton"in L&&t(2,l=L.hideButton)},s.$$.update=()=>{s.$$.dirty&24&&(r=`Q: ${p}
A: ${_}`)},[i,a,l,p,_,u,m,o,c,b,S,I,$,E,k,R,q,C,G]}class Jl extends Z{constructor(e){super(),ee(this,e,Wl,Vl,X,{wodReady:0,loaded:1,hideButton:2})}}function Kl(s){let e,t;return{c(){e=v("p"),t=z(s[1])},l(r){e=w(r,"P",{});var n=T(e);t=H(n,s[1]),n.forEach(f)},m(r,n){A(r,e,n),d(e,t)},p(r,n){n&2&&we(t,r[1])},d(r){r&&f(e)}}}function Yl(s){let e,t;return{c(){e=v("p"),t=z("Submitting responses...")},l(r){e=w(r,"P",{});var n=T(e);t=H(n,"Submitting responses..."),n.forEach(f)},m(r,n){A(r,e,n),d(e,t)},p:Q,d(r){r&&f(e)}}}function Xl(s){let e,t,r,n;function o(l,c){return l[0]===void 0?Yl:Kl}let i=o(s),a=i(s);return{c(){e=v("h2"),t=z("Thanks for playing!"),r=N(),a.c(),n=ie()},l(l){e=w(l,"H2",{});var c=T(e);t=H(c,"Thanks for playing!"),c.forEach(f),r=D(l),a.l(l),n=ie()},m(l,c){A(l,e,c),d(e,t),A(l,r,c),a.m(l,c),A(l,n,c)},p(l,[c]){i===(i=o(l))&&a?a.p(l,c):(a.d(1),a=i(l),a&&(a.c(),a.m(n.parentNode,n)))},i:Q,o:Q,d(l){l&&f(e),l&&f(r),a.d(l),l&&f(n)}}}function Ql(s,e,t){let r,n,o;B(s,Or,a=>t(2,n=a)),B(s,Ce,a=>t(3,o=a));let i;return Et(async()=>{try{const l=[].concat(...o.user).filter(u=>u.valid).map(u=>({game_id:n,round:u.round,text:u.text,timestamp:u.timestamp,points:u.points,lemmas:u.lemmas}));await Ts({table:"wordgame_wod-answers",data:l})?(t(0,i=!0),await Pr({table:"wordgame_games",column:"wod_played",value:!0,gameId:n})):t(0,i=!1)}catch{t(0,i=!1)}}),s.$$.update=()=>{s.$$.dirty&1&&t(1,r=i?"Game successfully submitted!":"There was an error submitting your game. Please contact the admin: russell@pudding.cool.")},[i,r]}class Zl extends Z{constructor(e){super(),ee(this,e,Ql,Xl,X,{})}}function Kn(s){let e,t,r,n;const o=[tu,eu],i=[];function a(l,c){return l[3]?0:1}return e=a(s),t=i[e]=o[e](s),{c(){t.c(),r=ie()},l(l){t.l(l),r=ie()},m(l,c){i[e].m(l,c),A(l,r,c),n=!0},p(l,c){let u=e;e=a(l),e===u?i[e].p(l,c):(he(),O(i[u],1,1,()=>{i[u]=null}),fe(),t=i[e],t?t.p(l,c):(t=i[e]=o[e](l),t.c()),j(t,1),t.m(r.parentNode,r))},i(l){n||(j(t),n=!0)},o(l){O(t),n=!1},d(l){i[e].d(l),l&&f(r)}}}function eu(s){let e,t;return e=new ea({props:{loaded:s[0]}}),e.$on("play",s[5]),{c(){F(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,n){V(e,r,n),t=!0},p(r,n){const o={};n&1&&(o.loaded=r[0]),e.$set(o)},i(r){t||(j(e.$$.fragment,r),t=!0)},o(r){O(e.$$.fragment,r),t=!1},d(r){W(e,r)}}}function tu(s){let e,t,r;function n(i){s[6](i)}let o={loaded:s[0],hideButton:s[4]};return s[1]!==void 0&&(o.wodReady=s[1]),e=new Jl({props:o}),Dt.push(()=>ns(e,"wodReady",n)),e.$on("play",s[5]),{c(){F(e.$$.fragment)},l(i){x(e.$$.fragment,i)},m(i,a){V(e,i,a),r=!0},p(i,a){const l={};a&1&&(l.loaded=i[0]),a&16&&(l.hideButton=i[4]),!t&&a&2&&(t=!0,l.wodReady=i[1],ss(()=>t=!1)),e.$set(l)},i(i){r||(j(e.$$.fragment,i),r=!0)},o(i){O(e.$$.fragment,i),r=!1},d(i){W(e,i)}}}function Yn(s){let e,t;return e=new Do({}),{c(){F(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,n){V(e,r,n),t=!0},i(r){t||(j(e.$$.fragment,r),t=!0)},o(r){O(e.$$.fragment,r),t=!1},d(r){W(e,r)}}}function Xn(s){let e,t,r=s[3]&&Qn();return{c(){r&&r.c(),e=ie()},l(n){r&&r.l(n),e=ie()},m(n,o){r&&r.m(n,o),A(n,e,o),t=!0},p(n,o){n[3]?r?o&8&&j(r,1):(r=Qn(),r.c(),j(r,1),r.m(e.parentNode,e)):r&&(he(),O(r,1,1,()=>{r=null}),fe())},i(n){t||(j(r),t=!0)},o(n){O(r),t=!1},d(n){r&&r.d(n),n&&f(e)}}}function Qn(s){let e,t;return e=new Zl({}),{c(){F(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,n){V(e,r,n),t=!0},i(r){t||(j(e.$$.fragment,r),t=!0)},o(r){O(e.$$.fragment,r),t=!1},d(r){W(e,r)}}}function Zn(s){let e,t,r,n,o;return{c(){e=v("div"),t=v("button"),r=z("next round"),this.h()},l(i){e=w(i,"DIV",{class:!0});var a=T(e);t=w(a,"BUTTON",{class:!0});var l=T(t);r=H(l,"next round"),l.forEach(f),a.forEach(f),this.h()},h(){g(t,"class","svelte-120unyc"),g(e,"class","mid svelte-120unyc")},m(i,a){A(i,e,a),d(e,t),d(t,r),n||(o=le(t,"click",s[5]),n=!0)},p:Q,d(i){i&&f(e),n=!1,o()}}}function ru(s){let e,t,r,n,o,i=s[2]==="pre"&&Kn(s),a=s[2]!=="pre"&&Yn(),l=s[2]==="post"&&Xn(s),c=s[2]==="mid"&&Zn(s);return{c(){i&&i.c(),e=N(),a&&a.c(),t=N(),l&&l.c(),r=N(),c&&c.c(),n=ie()},l(u){i&&i.l(u),e=D(u),a&&a.l(u),t=D(u),l&&l.l(u),r=D(u),c&&c.l(u),n=ie()},m(u,h){i&&i.m(u,h),A(u,e,h),a&&a.m(u,h),A(u,t,h),l&&l.m(u,h),A(u,r,h),c&&c.m(u,h),A(u,n,h),o=!0},p(u,[h]){u[2]==="pre"?i?(i.p(u,h),h&4&&j(i,1)):(i=Kn(u),i.c(),j(i,1),i.m(e.parentNode,e)):i&&(he(),O(i,1,1,()=>{i=null}),fe()),u[2]!=="pre"?a?h&4&&j(a,1):(a=Yn(),a.c(),j(a,1),a.m(t.parentNode,t)):a&&(he(),O(a,1,1,()=>{a=null}),fe()),u[2]==="post"?l?(l.p(u,h),h&4&&j(l,1)):(l=Xn(u),l.c(),j(l,1),l.m(r.parentNode,r)):l&&(he(),O(l,1,1,()=>{l=null}),fe()),u[2]==="mid"?c?c.p(u,h):(c=Zn(u),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null)},i(u){o||(j(i),j(a),j(l),o=!0)},o(u){O(i),O(a),O(l),o=!1},d(u){i&&i.d(u),u&&f(e),a&&a.d(u),u&&f(t),l&&l.d(u),u&&f(r),c&&c.d(u),u&&f(n)}}}function nu(s,e,t){let r,n,o,i,a,l;B(s,jr,p=>t(2,n=p)),B(s,dt,p=>t(3,o=p)),B(s,xe,p=>t(7,i=p)),B(s,ke,p=>t(8,a=p)),B(s,ut,p=>t(9,l=p));let{loaded:c}=e,u;const h=async()=>{o&&n==="pre"?await Pr({table:"wordgame_games",column:"wod_started",value:!0,gameId:l}):n==="mid"&&_e(ke,a=!1,a),_e(xe,i+=1,i)};function m(p){u=p,t(1,u)}return s.$$set=p=>{"loaded"in p&&t(0,c=p.loaded)},s.$$.update=()=>{s.$$.dirty&14&&t(4,r=o&&n==="pre"&&!u)},[c,u,n,o,r,h,m]}class su extends Z{constructor(e){super(),ee(this,e,nu,ru,X,{loaded:0})}}async function iu(s){const e=`https://pudding.cool/games/words-against-strangers-data/game-clues/${s}.csv?version=${Date.now()}`,r=(await Mt(e)).map(n=>({...n,round:+n.round}));return r.sort((n,o)=>Bs(n.round,o.round)),r}async function ou(s){const e=[];for(let t of s){const r=`https://pudding.cool/games/words-against-strangers-data/clue-answers/${t}.csv?version=${Date.now()}`,o=(await Mt(r)).map(i=>({...i,points:+i.points}));e.push(o)}return e}async function au(s){return await(await fetch(s)).json()}function es(s){let e,t;return e=new ai({}),{c(){F(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,n){V(e,r,n),t=!0},i(r){t||(j(e.$$.fragment,r),t=!0)},o(r){O(e.$$.fragment,r),t=!1},d(r){W(e,r)}}}function ts(s){let e,t,r;return t=new io({props:{clues:s[0],answers:s[1]}}),{c(){e=v("section"),F(t.$$.fragment),this.h()},l(n){e=w(n,"SECTION",{id:!0});var o=T(e);x(t.$$.fragment,o),o.forEach(f),this.h()},h(){g(e,"id","play")},m(n,o){A(n,e,o),V(t,e,null),r=!0},p(n,o){const i={};o&1&&(i.clues=n[0]),o&2&&(i.answers=n[1]),t.$set(i)},i(n){r||(j(t.$$.fragment,n),r=!0)},o(n){O(t.$$.fragment,n),r=!1},d(n){n&&f(e),W(t)}}}function lu(s){let e,t,r,n,o,i=s[5]&&es(),a=s[4]&&ts(s);return n=new su({props:{loaded:s[2]}}),{c(){i&&i.c(),e=N(),a&&a.c(),t=N(),r=v("section"),F(n.$$.fragment),this.h()},l(l){i&&i.l(l),e=D(l),a&&a.l(l),t=D(l),r=w(l,"SECTION",{id:!0,class:!0});var c=T(r);x(n.$$.fragment,c),c.forEach(f),this.h()},h(){g(r,"id","modal"),g(r,"class","svelte-p31hnx"),K(r,"visible",s[3])},m(l,c){i&&i.m(l,c),A(l,e,c),a&&a.m(l,c),A(l,t,c),A(l,r,c),V(n,r,null),o=!0},p(l,[c]){l[5]?i?c&32&&j(i,1):(i=es(),i.c(),j(i,1),i.m(e.parentNode,e)):i&&(he(),O(i,1,1,()=>{i=null}),fe()),l[4]?a?(a.p(l,c),c&16&&j(a,1)):(a=ts(l),a.c(),j(a,1),a.m(t.parentNode,t)):a&&(he(),O(a,1,1,()=>{a=null}),fe());const u={};c&4&&(u.loaded=l[2]),n.$set(u),c&8&&K(r,"visible",l[3])},i(l){o||(j(i),j(a),j(n.$$.fragment,l),o=!0)},o(l){O(i),O(a),O(n.$$.fragment,l),o=!1},d(l){i&&i.d(l),l&&f(e),a&&a.d(l),l&&f(t),l&&f(r),W(n)}}}function uu(s,e,t){let r,n,o,i,a,l,c,u;B(s,ut,b=>t(5,o=b)),B(s,jr,b=>t(6,i=b)),B(s,ke,b=>t(7,a=b)),B(s,xe,b=>t(8,l=b)),B(s,Or,b=>t(10,c=b)),B(s,dt,b=>t(11,u=b));let h,m,p;const _=async()=>{if(u)return c;const S=`https://pudding.cool/games/words-against-strangers-data/games.json?version=${Date.now()}`,{updated:$,games:I}=await au(S);console.log("updated:",$);const E=I.find(k=>k.live);if(E)return E.id};return Et(async()=>{if(_e(ut,o=await _(),o),o){const b=await iu(o);t(0,h=b.map(S=>S.clue)),t(1,m=await ou(b.map(S=>S.clueId)))}t(2,p=!0)}),s.$$.update=()=>{s.$$.dirty&263&&t(4,r=p&&h&&m&&l>=0),s.$$.dirty&192,s.$$.dirty&192&&t(3,n=a||["pre","post"].includes(i))},[h,m,p,n,r,o,i,a,l]}class cu extends Z{constructor(e){super(),ee(this,e,uu,lu,X,{})}}function hu(s){let e,t,r,n,o,i,a,l,c,u,h,m,p,_,b,S,$,I,E,k,R,q,C,G,L,te,U,Y,M,y,P,J,re,ve,oe,Oe,Ie,Ee,Ve,We,Ht,Ue,mt,Gt,qt,Ft,Me,pt,xt,Vt,Wt,Je,Ke,Jt,Kt,be,Ye,Yt,Xt,Xe,Qt,Zt,Qe,er,tr,Ze,rr,nr,et,Le,sr,ir,Cr;return{c(){e=v("section"),t=v("div"),r=v("h3"),n=v("span"),o=z("how to play"),i=N(),a=v("ul"),l=v("li"),c=v("strong"),u=z("goal:"),h=z(" score more points than the stranger."),m=N(),p=v("li"),_=v("strong"),b=z("duration:"),S=z(" four one-minute rounds."),$=N(),I=v("li"),E=v("strong"),k=z("gameplay:"),R=z(` enter as many words as possible that satisfy
				a clue.
				`),q=v("ul"),C=v("li"),G=v("strong"),L=z("sample clue"),te=z(`:
						`),U=v("em"),Y=z("starts with "),M=v("strong"),y=z("A"),P=z(`
						answers: `),J=v("em"),re=z("apple"),ve=z(", "),oe=v("em"),Oe=z("awesome"),Ie=z(", "),Ee=v("em"),Ve=z("activate"),We=z(", etc."),Ht=N(),Ue=v("li"),mt=v("strong"),Gt=z("blocking:"),qt=z(` whoever gets a word first gets points. If
						the stranger enters the word before you, you get no points, and vice
						versa.`),Ft=N(),Me=v("li"),pt=v("strong"),xt=z("obscure = more points:"),Vt=z(` you get more points for less
						commonly used words.`),Wt=N(),Je=v("h3"),Ke=v("span"),Jt=z("rules"),Kt=N(),be=v("ul"),Ye=v("li"),Yt=z("4+ letter words"),Xt=N(),Xe=v("li"),Qt=z("no proper nouns"),Zt=N(),Qe=v("li"),er=z("no hyphenated words"),tr=N(),Ze=v("li"),rr=z("no variations (e.g. plurals) of a played word"),nr=N(),et=v("p"),Le=v("button"),sr=z("CLOSE"),this.h()},l(Be){e=w(Be,"SECTION",{class:!0});var tt=T(e);t=w(tt,"DIV",{});var Te=T(t);r=w(Te,"H3",{class:!0});var Nr=T(r);n=w(Nr,"SPAN",{class:!0});var Dr=T(n);o=H(Dr,"how to play"),Dr.forEach(f),Nr.forEach(f),i=D(Te),a=w(Te,"UL",{});var rt=T(a);l=w(rt,"LI",{class:!0});var or=T(l);c=w(or,"STRONG",{});var Ur=T(c);u=H(Ur,"goal:"),Ur.forEach(f),h=H(or," score more points than the stranger."),or.forEach(f),m=D(rt),p=w(rt,"LI",{class:!0});var ar=T(p);_=w(ar,"STRONG",{});var Mr=T(_);b=H(Mr,"duration:"),Mr.forEach(f),S=H(ar," four one-minute rounds."),ar.forEach(f),$=D(rt),I=w(rt,"LI",{class:!0});var jt=T(I);E=w(jt,"STRONG",{});var Lr=T(E);k=H(Lr,"gameplay:"),Lr.forEach(f),R=H(jt,` enter as many words as possible that satisfy
				a clue.
				`),q=w(jt,"UL",{});var nt=T(q);C=w(nt,"LI",{class:!0});var ye=T(C);G=w(ye,"STRONG",{});var Br=T(G);L=H(Br,"sample clue"),Br.forEach(f),te=H(ye,`:
						`),U=w(ye,"EM",{class:!0});var lr=T(U);Y=H(lr,"starts with "),M=w(lr,"STRONG",{});var zr=T(M);y=H(zr,"A"),zr.forEach(f),lr.forEach(f),P=H(ye,`
						answers: `),J=w(ye,"EM",{});var Hr=T(J);re=H(Hr,"apple"),Hr.forEach(f),ve=H(ye,", "),oe=w(ye,"EM",{});var Gr=T(oe);Oe=H(Gr,"awesome"),Gr.forEach(f),Ie=H(ye,", "),Ee=w(ye,"EM",{});var qr=T(Ee);Ve=H(qr,"activate"),qr.forEach(f),We=H(ye,", etc."),ye.forEach(f),Ht=D(nt),Ue=w(nt,"LI",{class:!0});var ur=T(Ue);mt=w(ur,"STRONG",{});var Fr=T(mt);Gt=H(Fr,"blocking:"),Fr.forEach(f),qt=H(ur,` whoever gets a word first gets points. If
						the stranger enters the word before you, you get no points, and vice
						versa.`),ur.forEach(f),Ft=D(nt),Me=w(nt,"LI",{class:!0});var cr=T(Me);pt=w(cr,"STRONG",{});var xr=T(pt);xt=H(xr,"obscure = more points:"),xr.forEach(f),Vt=H(cr,` you get more points for less
						commonly used words.`),cr.forEach(f),nt.forEach(f),jt.forEach(f),rt.forEach(f),Wt=D(Te),Je=w(Te,"H3",{class:!0});var Vr=T(Je);Ke=w(Vr,"SPAN",{class:!0});var Wr=T(Ke);Jt=H(Wr,"rules"),Wr.forEach(f),Vr.forEach(f),Kt=D(Te),be=w(Te,"UL",{});var Re=T(be);Ye=w(Re,"LI",{class:!0});var Jr=T(Ye);Yt=H(Jr,"4+ letter words"),Jr.forEach(f),Xt=D(Re),Xe=w(Re,"LI",{class:!0});var Kr=T(Xe);Qt=H(Kr,"no proper nouns"),Kr.forEach(f),Zt=D(Re),Qe=w(Re,"LI",{class:!0});var Yr=T(Qe);er=H(Yr,"no hyphenated words"),Yr.forEach(f),tr=D(Re),Ze=w(Re,"LI",{class:!0});var Xr=T(Ze);rr=H(Xr,"no variations (e.g. plurals) of a played word"),Xr.forEach(f),Re.forEach(f),nr=D(Te),et=w(Te,"P",{class:!0});var Qr=T(et);Le=w(Qr,"BUTTON",{class:!0});var Zr=T(Le);sr=H(Zr,"CLOSE"),Zr.forEach(f),Qr.forEach(f),Te.forEach(f),tt.forEach(f),this.h()},h(){g(n,"class","chunk combo-wod svelte-5yez3j"),g(r,"class","svelte-5yez3j"),g(l,"class","svelte-5yez3j"),g(p,"class","svelte-5yez3j"),g(U,"class","clue svelte-5yez3j"),g(C,"class","svelte-5yez3j"),g(Ue,"class","svelte-5yez3j"),g(Me,"class","svelte-5yez3j"),g(I,"class","svelte-5yez3j"),g(Ke,"class","chunk combo-wod svelte-5yez3j"),g(Je,"class","svelte-5yez3j"),g(Ye,"class","svelte-5yez3j"),g(Xe,"class","svelte-5yez3j"),g(Qe,"class","svelte-5yez3j"),g(Ze,"class","svelte-5yez3j"),g(Le,"class","svelte-5yez3j"),g(et,"class","svelte-5yez3j"),g(e,"class","svelte-5yez3j"),K(e,"visible",s[0]==="rules")},m(Be,tt){A(Be,e,tt),d(e,t),d(t,r),d(r,n),d(n,o),d(t,i),d(t,a),d(a,l),d(l,c),d(c,u),d(l,h),d(a,m),d(a,p),d(p,_),d(_,b),d(p,S),d(a,$),d(a,I),d(I,E),d(E,k),d(I,R),d(I,q),d(q,C),d(C,G),d(G,L),d(C,te),d(C,U),d(U,Y),d(U,M),d(M,y),d(C,P),d(C,J),d(J,re),d(C,ve),d(C,oe),d(oe,Oe),d(C,Ie),d(C,Ee),d(Ee,Ve),d(C,We),d(q,Ht),d(q,Ue),d(Ue,mt),d(mt,Gt),d(Ue,qt),d(q,Ft),d(q,Me),d(Me,pt),d(pt,xt),d(Me,Vt),d(t,Wt),d(t,Je),d(Je,Ke),d(Ke,Jt),d(t,Kt),d(t,be),d(be,Ye),d(Ye,Yt),d(be,Xt),d(be,Xe),d(Xe,Qt),d(be,Zt),d(be,Qe),d(Qe,er),d(be,tr),d(be,Ze),d(Ze,rr),d(t,nr),d(t,et),d(et,Le),d(Le,sr),ir||(Cr=[le(Le,"click",s[1]),le(e,"click",s[1])],ir=!0)},p(Be,[tt]){tt&1&&K(e,"visible",Be[0]==="rules")},i:Q,o:Q,d(Be){Be&&f(e),ir=!1,De(Cr)}}}function fu(s,e,t){let r;return B(s,Ne,o=>t(0,r=o)),[r,()=>{_e(Ne,r=void 0,r)}]}class du extends Z{constructor(e){super(),ee(this,e,fu,hu,X,{})}}function mu(s){let e,t,r,n,o,i,a,l,c,u,h,m,p,_;return{c(){e=v("section"),t=v("div"),r=v("h3"),n=z("About"),o=N(),i=v("p"),a=N(),l=v("p"),c=N(),u=v("p"),h=v("button"),m=z("CLOSE"),this.h()},l(b){e=w(b,"SECTION",{class:!0});var S=T(e);t=w(S,"DIV",{class:!0});var $=T(t);r=w($,"H3",{});var I=T(r);n=H(I,"About"),I.forEach(f),o=D($),i=w($,"P",{class:!0});var E=T(i);E.forEach(f),a=D($),l=w($,"P",{class:!0});var k=T(l);k.forEach(f),c=D($),u=w($,"P",{class:!0});var R=T(u);h=w(R,"BUTTON",{});var q=T(h);m=H(q,"CLOSE"),q.forEach(f),R.forEach(f),$.forEach(f),S.forEach(f),this.h()},h(){g(i,"class","svelte-jnogko"),g(l,"class","svelte-jnogko"),g(u,"class","svelte-jnogko"),g(t,"class","svelte-jnogko"),g(e,"class","svelte-jnogko"),K(e,"visible",s[0]==="about")},m(b,S){A(b,e,S),d(e,t),d(t,r),d(r,n),d(t,o),d(t,i),i.innerHTML=s[1],d(t,a),d(t,l),l.innerHTML=s[2],d(t,c),d(t,u),d(u,h),d(h,m),p||(_=[le(h,"click",s[3]),le(e,"click",s[3])],p=!0)},p(b,[S]){S&1&&K(e,"visible",b[0]==="about")},i:Q,o:Q,d(b){b&&f(e),p=!1,De(_)}}}function pu(s,e,t){let r;B(s,Ne,a=>t(0,r=a));const{byline:n,source:o}=is("copy");return[r,n,o,()=>{_e(Ne,r=void 0,r)}]}class gu extends Z{constructor(e){super(),ee(this,e,pu,mu,X,{})}}function _u(s){let e,t,r,n,o,i,a;return t=new cu({}),n=new du({}),i=new gu({}),{c(){e=v("article"),F(t.$$.fragment),r=N(),F(n.$$.fragment),o=N(),F(i.$$.fragment),this.h()},l(l){e=w(l,"ARTICLE",{class:!0});var c=T(e);x(t.$$.fragment,c),r=D(c),x(n.$$.fragment,c),o=D(c),x(i.$$.fragment,c),c.forEach(f),this.h()},h(){g(e,"class","svelte-17xk6p2")},m(l,c){A(l,e,c),V(t,e,null),d(e,r),V(n,e,null),d(e,o),V(i,e,null),a=!0},p:Q,i(l){a||(j(t.$$.fragment,l),j(n.$$.fragment,l),j(i.$$.fragment,l),a=!0)},o(l){O(t.$$.fragment,l),O(n.$$.fragment,l),O(i.$$.fragment,l),a=!1},d(l){l&&f(e),W(t),W(n),W(i)}}}class Tu extends Z{constructor(e){super(),ee(this,e,null,_u,X,{})}}function Su(){console.log("--- --- --- --- --- ---"),console.log("svelte-starter: 3.1.0"),console.log("build: 2022-08-23-12:59"),console.log("--- --- --- --- --- ---")}export{Tu as A,ku as M,Bl as g,Eu as s,Su as v};

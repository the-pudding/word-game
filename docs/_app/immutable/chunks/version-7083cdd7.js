import{S as X,i as Q,s as Y,l as v,e as se,Q as Es,m as w,h as f,p as g,I as d,E as K,R as $e,b as C,K as H,o as Et,L as _e,C as gr,T as Ts,U as $s,V as Ss,r as B,n as E,u as x,W as en,X as te,v as we,Y as es,Z as Os,g as he,_ as js,d as fe,f as S,t as R,w as z,x as F,y as V,B as W,$ as Is,a as U,c as M,q as ue,a0 as Rs,a1 as at,J as oe,G as Pe,a2 as ht,D as As,a3 as $r,a4 as Ps,a5 as Cs,a6 as ts,a7 as rs,a8 as tn,z as Ns,a9 as ns,aa as Ds}from"./index-3bf8f48a.js";import{w as ss,r as Us}from"./index-7a7c18f7.js";import{g as lt,w as ft,r as He,a as Re,l as Sr,b as is,t as os,d as ut,e as bt,i as yt,p as _r,f as Or,o as Ae,h as jr}from"./misc-a22ac786.js";import{_ as Dt}from"./preload-helper-43c63d57.js";function Ms(s,e){return s==null||e==null?NaN:s<e?-1:s>e?1:s>=e?0:NaN}const Ls=qs(Math.random);function qs(s){return function(t,r=0,n=t.length){let o=n-(r=+r);for(;o;){const i=s()*o--|0,a=t[o+r];t[o+r]=t[i+r],t[i+r]=a}return t}}var rn={},cr={},hr=34,pt=10,fr=13;function as(s){return new Function("d","return {"+s.map(function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'}).join(",")+"}")}function Bs(s,e){var t=as(s);return function(r,n){return e(t(r),n,s)}}function nn(s){var e=Object.create(null),t=[];return s.forEach(function(r){for(var n in r)n in e||t.push(e[n]=n)}),t}function ge(s,e){var t=s+"",r=t.length;return r<e?new Array(e-r+1).join(0)+t:t}function xs(s){return s<0?"-"+ge(-s,6):s>9999?"+"+ge(s,6):ge(s,4)}function Hs(s){var e=s.getUTCHours(),t=s.getUTCMinutes(),r=s.getUTCSeconds(),n=s.getUTCMilliseconds();return isNaN(s)?"Invalid Date":xs(s.getUTCFullYear())+"-"+ge(s.getUTCMonth()+1,2)+"-"+ge(s.getUTCDate(),2)+(n?"T"+ge(e,2)+":"+ge(t,2)+":"+ge(r,2)+"."+ge(n,3)+"Z":r?"T"+ge(e,2)+":"+ge(t,2)+":"+ge(r,2)+"Z":t||e?"T"+ge(e,2)+":"+ge(t,2)+"Z":"")}function Gs(s){var e=new RegExp('["'+s+`
\r]`),t=s.charCodeAt(0);function r(h,p){var m,_,b=n(h,function(y,O){if(m)return m(y,O-1);_=y,m=p?Bs(y,p):as(y)});return b.columns=_||[],b}function n(h,p){var m=[],_=h.length,b=0,y=0,O,P=_<=0,j=!1;h.charCodeAt(_-1)===pt&&--_,h.charCodeAt(_-1)===fr&&--_;function I(){if(P)return cr;if(j)return j=!1,rn;var N,D=b,J;if(h.charCodeAt(D)===hr){for(;b++<_&&h.charCodeAt(b)!==hr||h.charCodeAt(++b)===hr;);return(N=b)>=_?P=!0:(J=h.charCodeAt(b++))===pt?j=!0:J===fr&&(j=!0,h.charCodeAt(b)===pt&&++b),h.slice(D+1,N-1).replace(/""/g,'"')}for(;b<_;){if((J=h.charCodeAt(N=b++))===pt)j=!0;else if(J===fr)j=!0,h.charCodeAt(b)===pt&&++b;else if(J!==t)continue;return h.slice(D,N)}return P=!0,h.slice(D,_)}for(;(O=I())!==cr;){for(var k=[];O!==rn&&O!==cr;)k.push(O),O=I();p&&(k=p(k,y++))==null||m.push(k)}return m}function o(h,p){return h.map(function(m){return p.map(function(_){return c(m[_])}).join(s)})}function i(h,p){return p==null&&(p=nn(h)),[p.map(c).join(s)].concat(o(h,p)).join(`
`)}function a(h,p){return p==null&&(p=nn(h)),o(h,p).join(`
`)}function l(h){return h.map(u).join(`
`)}function u(h){return h.map(c).join(s)}function c(h){return h==null?"":h instanceof Date?Hs(h):e.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:r,parseRows:n,format:i,formatBody:a,formatRows:l,formatRow:u,formatValue:c}}var zs=Gs(","),Fs=zs.parse;function Vs(s){return Math.abs(s=Math.round(s))>=1e21?s.toLocaleString("en").replace(/,/g,""):s.toString(10)}function Ct(s,e){if((t=(s=e?s.toExponential(e-1):s.toExponential()).indexOf("e"))<0)return null;var t,r=s.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+s.slice(t+1)]}function Ws(s){return s=Ct(Math.abs(s)),s?s[1]:NaN}function Js(s,e){return function(t,r){for(var n=t.length,o=[],i=0,a=s[0],l=0;n>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(t.substring(n-=a,n+a)),!((l+=a+1)>r));)a=s[i=(i+1)%s.length];return o.reverse().join(e)}}function Ks(s){return function(e){return e.replace(/[0-9]/g,function(t){return s[+t]})}}var Ys=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vr(s){if(!(e=Ys.exec(s)))throw new Error("invalid format: "+s);var e;return new Ir({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}vr.prototype=Ir.prototype;function Ir(s){this.fill=s.fill===void 0?" ":s.fill+"",this.align=s.align===void 0?">":s.align+"",this.sign=s.sign===void 0?"-":s.sign+"",this.symbol=s.symbol===void 0?"":s.symbol+"",this.zero=!!s.zero,this.width=s.width===void 0?void 0:+s.width,this.comma=!!s.comma,this.precision=s.precision===void 0?void 0:+s.precision,this.trim=!!s.trim,this.type=s.type===void 0?"":s.type+""}Ir.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Xs(s){e:for(var e=s.length,t=1,r=-1,n;t<e;++t)switch(s[t]){case".":r=n=t;break;case"0":r===0&&(r=t),n=t;break;default:if(!+s[t])break e;r>0&&(r=0);break}return r>0?s.slice(0,r)+s.slice(n+1):s}var ls;function Qs(s,e){var t=Ct(s,e);if(!t)return s+"";var r=t[0],n=t[1],o=n-(ls=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,i=r.length;return o===i?r:o>i?r+new Array(o-i+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Ct(s,Math.max(0,e+o-1))[0]}function sn(s,e){var t=Ct(s,e);if(!t)return s+"";var r=t[0],n=t[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}const on={"%":(s,e)=>(s*100).toFixed(e),b:s=>Math.round(s).toString(2),c:s=>s+"",d:Vs,e:(s,e)=>s.toExponential(e),f:(s,e)=>s.toFixed(e),g:(s,e)=>s.toPrecision(e),o:s=>Math.round(s).toString(8),p:(s,e)=>sn(s*100,e),r:sn,s:Qs,X:s=>Math.round(s).toString(16).toUpperCase(),x:s=>Math.round(s).toString(16)};function an(s){return s}var ln=Array.prototype.map,un=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Zs(s){var e=s.grouping===void 0||s.thousands===void 0?an:Js(ln.call(s.grouping,Number),s.thousands+""),t=s.currency===void 0?"":s.currency[0]+"",r=s.currency===void 0?"":s.currency[1]+"",n=s.decimal===void 0?".":s.decimal+"",o=s.numerals===void 0?an:Ks(ln.call(s.numerals,String)),i=s.percent===void 0?"%":s.percent+"",a=s.minus===void 0?"\u2212":s.minus+"",l=s.nan===void 0?"NaN":s.nan+"";function u(h){h=vr(h);var p=h.fill,m=h.align,_=h.sign,b=h.symbol,y=h.zero,O=h.width,P=h.comma,j=h.precision,I=h.trim,k=h.type;k==="n"?(P=!0,k="g"):on[k]||(j===void 0&&(j=12),I=!0,k="g"),(y||p==="0"&&m==="=")&&(y=!0,p="0",m="=");var N=b==="$"?t:b==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",D=b==="$"?r:/[%p]/.test(k)?i:"",J=on[k],L=/[defgprs%]/.test(k);j=j===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function Z($){var G=N,A=D,T,q,ee;if(k==="c")A=J($)+A,$="";else{$=+$;var pe=$<0||1/$<0;if($=isNaN($)?l:J(Math.abs($),j),I&&($=Xs($)),pe&&+$==0&&_!=="+"&&(pe=!1),G=(pe?_==="("?_:a:_==="-"||_==="("?"":_)+G,A=(k==="s"?un[8+ls/3]:"")+A+(pe&&_==="("?")":""),L){for(T=-1,q=$.length;++T<q;)if(ee=$.charCodeAt(T),48>ee||ee>57){A=(ee===46?n+$.slice(T+1):$.slice(T))+A,$=$.slice(0,T);break}}}P&&!y&&($=e($,1/0));var ve=G.length+$.length+A.length,le=ve<O?new Array(O-ve+1).join(p):"";switch(P&&y&&($=e(le+$,le.length?O-A.length:1/0),le=""),m){case"<":$=G+$+A+le;break;case"=":$=G+le+$+A;break;case"^":$=le.slice(0,ve=le.length>>1)+G+$+A+le.slice(ve);break;default:$=le+G+$+A;break}return o($)}return Z.toString=function(){return h+""},Z}function c(h,p){var m=u((h=vr(h),h.type="f",h)),_=Math.max(-8,Math.min(8,Math.floor(Ws(p)/3)))*3,b=Math.pow(10,-_),y=un[8+_/3];return function(O){return m(b*O)+y}}return{format:u,formatPrefix:c}}var jt,us;ei({thousands:",",grouping:[3],currency:["$",""]});function ei(s){return jt=Zs(s),us=jt.format,jt.formatPrefix,jt}function cn(s,e,t){const r=s.slice();return r[5]=e[t],r}function hn(s){let e,t;return{c(){e=v("link"),this.h()},l(r){e=w(r,"LINK",{rel:!0,href:!0,as:!0,type:!0,crossorigin:!0}),this.h()},h(){g(e,"rel","preload"),g(e,"href",t=s[5]),g(e,"as","font"),g(e,"type","font/woff2"),g(e,"crossorigin","")},m(r,n){C(r,e,n)},p(r,n){n&16&&t!==(t=r[5])&&g(e,"href",t)},d(r){r&&f(e)}}}function ti(s){let e,t,r,n,o,i,a,l,u,c,h,p,m,_,b,y,O,P,j,I,k,N,D,J,L,Z;document.title=e=s[0];let $=s[4],G=[];for(let A=0;A<$.length;A+=1)G[A]=hn(cn(s,$,A));return{c(){t=v("meta"),r=v("meta"),n=v("meta"),o=v("meta"),i=v("meta"),a=v("meta"),l=v("meta"),u=v("meta"),c=v("meta"),h=v("meta"),m=v("meta"),_=v("meta"),b=v("meta"),y=v("meta"),O=v("meta"),P=v("meta"),j=v("meta"),I=v("meta"),k=v("meta"),D=v("meta"),J=v("link");for(let A=0;A<G.length;A+=1)G[A].c();Z=se(),this.h()},l(A){const T=Es('[data-svelte="svelte-1htu80s"]',document.head);t=w(T,"META",{name:!0,content:!0}),r=w(T,"META",{name:!0,content:!0}),n=w(T,"META",{name:!0,content:!0}),o=w(T,"META",{property:!0,content:!0}),i=w(T,"META",{property:!0,content:!0}),a=w(T,"META",{property:!0,content:!0}),l=w(T,"META",{property:!0,content:!0}),u=w(T,"META",{property:!0,content:!0}),c=w(T,"META",{property:!0,content:!0}),h=w(T,"META",{property:!0,content:!0}),m=w(T,"META",{property:!0,content:!0}),_=w(T,"META",{property:!0,content:!0}),b=w(T,"META",{property:!0,content:!0}),y=w(T,"META",{name:!0,content:!0}),O=w(T,"META",{name:!0,content:!0}),P=w(T,"META",{name:!0,content:!0}),j=w(T,"META",{name:!0,content:!0}),I=w(T,"META",{name:!0,content:!0}),k=w(T,"META",{name:!0,content:!0}),D=w(T,"META",{name:!0,content:!0}),J=w(T,"LINK",{rel:!0,href:!0});for(let q=0;q<G.length;q+=1)G[q].l(T);Z=se(),T.forEach(f),this.h()},h(){g(t,"name","description"),g(t,"content",s[1]),g(r,"name","author"),g(r,"content","The Pudding"),g(n,"name","news_keywords"),g(n,"content",s[3]),g(o,"property","og:title"),g(o,"content",s[0]),g(i,"property","og:site_name"),g(i,"content","The Pudding"),g(a,"property","og:url"),g(a,"content",s[2]),g(l,"property","og:description"),g(l,"content",s[1]),g(u,"property","og:type"),g(u,"content","article"),g(c,"property","og:locale"),g(c,"content","en_US"),g(h,"property","og:image"),g(h,"content",p=s[2]+"/assets/social-facebook.jpg"),g(m,"property","og:image:type"),g(m,"content","image/jpeg"),g(_,"property","og:image:width"),g(_,"content","1200"),g(b,"property","og:image:height"),g(b,"content","600"),g(y,"name","twitter:card"),g(y,"content","summary_large_image"),g(O,"name","twitter:site"),g(O,"content","https://pudding.cool"),g(P,"name","twitter:creator"),g(P,"content","@puddingviz"),g(j,"name","twitter:title"),g(j,"content",s[0]),g(I,"name","twitter:description"),g(I,"content",s[1]),g(k,"name","twitter:image:src"),g(k,"content",N=s[2]+"/assets/social-twitter.jpg"),g(D,"name","robots"),g(D,"content","max-image-preview:large"),g(J,"rel","canonical"),g(J,"href",L=s[2]+"/")},m(A,T){d(document.head,t),d(document.head,r),d(document.head,n),d(document.head,o),d(document.head,i),d(document.head,a),d(document.head,l),d(document.head,u),d(document.head,c),d(document.head,h),d(document.head,m),d(document.head,_),d(document.head,b),d(document.head,y),d(document.head,O),d(document.head,P),d(document.head,j),d(document.head,I),d(document.head,k),d(document.head,D),d(document.head,J);for(let q=0;q<G.length;q+=1)G[q].m(document.head,null);d(document.head,Z)},p(A,[T]){if(T&1&&e!==(e=A[0])&&(document.title=e),T&2&&g(t,"content",A[1]),T&8&&g(n,"content",A[3]),T&1&&g(o,"content",A[0]),T&4&&g(a,"content",A[2]),T&2&&g(l,"content",A[1]),T&4&&p!==(p=A[2]+"/assets/social-facebook.jpg")&&g(h,"content",p),T&1&&g(j,"content",A[0]),T&2&&g(I,"content",A[1]),T&4&&N!==(N=A[2]+"/assets/social-twitter.jpg")&&g(k,"content",N),T&4&&L!==(L=A[2]+"/")&&g(J,"href",L),T&16){$=A[4];let q;for(q=0;q<$.length;q+=1){const ee=cn(A,$,q);G[q]?G[q].p(ee,T):(G[q]=hn(ee),G[q].c(),G[q].m(Z.parentNode,Z))}for(;q<G.length;q+=1)G[q].d(1);G.length=$.length}},i:K,o:K,d(A){f(t),f(r),f(n),f(o),f(i),f(a),f(l),f(u),f(c),f(h),f(m),f(_),f(b),f(y),f(O),f(P),f(j),f(I),f(k),f(D),f(J),$e(G,A),f(Z)}}}function ri(s,e,t){let{title:r="Title TK"}=e,{description:n="Description TK"}=e,{url:o="https://pudding.cool"}=e,{keywords:i=""}=e,{preloadFont:a=[]}=e;return s.$$set=l=>{"title"in l&&t(0,r=l.title),"description"in l&&t(1,n=l.description),"url"in l&&t(2,o=l.url),"keywords"in l&&t(3,i=l.keywords),"preloadFont"in l&&t(4,a=l.preloadFont)},[r,n,o,i,a]}class bu extends X{constructor(e){super(),Q(this,e,ri,ti,Y,{title:0,description:1,url:2,keywords:3,preloadFont:4})}}let Me,_t;const ct=ss(0),cs=s=>{_t||(_t=s);const e=Math.round(s-_t);_t=s,ct.update(t=>t+e),Me=window.requestAnimationFrame(cs)},vt={start(){Me||(_t=null,Me=window.requestAnimationFrame(cs))},stop(){Me&&(window.cancelAnimationFrame(Me),Me=null)},toggle(){Me?vt.stop():vt.start()},set(s){typeof s=="number"&&ct.set(s)},reset(){ct.set(0)}},Pt=({lemmas:s,corpus:e})=>!!s.split("|").filter(r=>!!e.find(n=>n===r)).length;async function Ut(s){const t=await(await fetch(s)).text();return Fs(t)}async function ni(s){const e=`https://pudding.cool/projects/word-game-data/wod-answers/${s}.csv?version=${Date.now()}`;return(await Ut(e)).map(n=>({...n,round:+n.round,timestamp:+n.timestamp,points:+n.points}))}function si(s,e,t){let r,n,o,i,a,l;H(s,lt,m=>t(2,r=m)),H(s,ft,m=>t(3,n=m)),H(s,He,m=>t(4,o=m)),H(s,Re,m=>t(5,i=m)),H(s,ct,m=>t(0,a=m)),H(s,Sr,m=>t(6,l=m));let u=[];const c=m=>Pt({lemmas:m,corpus:l}),h=({lemmas:m})=>{const _=!c(m);return{valid:_,reason:_?void 0:0}},p=()=>{const m=u.findIndex(_=>_.round===o&&a>=_.timestamp);if(m>-1){const[_]=u.splice(m,1),b={..._,...h(_)};_e(Re,i.wod[o]=[...i.wod[o],b],i)}};return Et(async()=>{n||(u=await ni(r))}),s.$$.update=()=>{s.$$.dirty&1&&p()},[a]}class ii extends X{constructor(e){super(),Q(this,e,si,null,Y,{})}}function oi(s){const e=s-1;return e*e*e+1}function ai(s){return Math.pow(s,4)}function fn(s){return Object.prototype.toString.call(s)==="[object Date]"}function wr(s,e){if(s===e||s!==s)return()=>s;const t=typeof s;if(t!==typeof e||Array.isArray(s)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(s)){const r=e.map((n,o)=>wr(s[o],n));return n=>r.map(o=>o(n))}if(t==="object"){if(!s||!e)throw new Error("Object cannot be null");if(fn(s)&&fn(e)){s=s.getTime(),e=e.getTime();const o=e-s;return i=>new Date(s+i*o)}const r=Object.keys(e),n={};return r.forEach(o=>{n[o]=wr(s[o],e[o])}),o=>{const i={};return r.forEach(a=>{i[a]=n[a](o)}),i}}if(t==="number"){const r=e-s;return n=>s+n*r}throw new Error(`Cannot interpolate ${t} values`)}function hs(s,e={}){const t=ss(s);let r,n=s;function o(i,a){if(s==null)return t.set(s=i),Promise.resolve();n=i;let l=r,u=!1,{delay:c=0,duration:h=400,easing:p=Ss,interpolate:m=wr}=gr(gr({},e),a);if(h===0)return l&&(l.abort(),l=null),t.set(s=n),Promise.resolve();const _=Ts()+c;let b;return r=$s(y=>{if(y<_)return!0;u||(b=m(s,i),typeof h=="function"&&(h=h(s,i)),u=!0),l&&(l.abort(),l=null);const O=y-_;return O>h?(t.set(s=i),!1):(t.set(s=b(p(O/h))),!0)}),r.promise}return{set:o,update:(i,a)=>o(i(n,s),a),subscribe:t.subscribe}}function li(s,{delay:e=0,duration:t=400,easing:r=oi,x:n=0,y:o=0,opacity:i=0}={}){const a=getComputedStyle(s),l=+a.opacity,u=a.transform==="none"?"":a.transform,c=l*(1-i);return{delay:e,duration:t,easing:r,css:(h,p)=>`
			transform: ${u} translate(${(1-h)*n}px, ${(1-h)*o}px);
			opacity: ${l-c*p}`}}function ui(s){let e,t,r,n,o,i;return{c(){e=v("li"),t=v("span"),r=B(s[1]),this.h()},l(a){e=w(a,"LI",{class:!0,style:!0});var l=E(e);t=w(l,"SPAN",{class:!0});var u=E(t);r=x(u,s[1]),u.forEach(f),l.forEach(f),this.h()},h(){g(t,"class","svelte-16xj2sf"),g(e,"class",n=en(s[3])+" svelte-16xj2sf"),g(e,"style",o=`--height: ${s[4]}px`),te(e,"wod",s[0])},m(a,l){C(a,e,l),d(e,t),d(t,r)},p(a,[l]){s=a,l&2&&we(r,s[1]),l&8&&n!==(n=en(s[3])+" svelte-16xj2sf")&&g(e,"class",n),l&16&&o!==(o=`--height: ${s[4]}px`)&&g(e,"style",o),l&9&&te(e,"wod",s[0])},i(a){i||es(()=>{i=Os(e,li,{y:s[2],duration:s[5]*(s[0]?.5:1),easing:ai}),i.start()})},o:K,d(a){a&&f(e)}}}function ci(s,e,t){let r,n,o;H(s,is,p=>t(5,o=p));let{wod:i}=e,{text:a}=e,{points:l}=e,{liHeight:u}=e,{startOffset:c}=e;return hs(0,{duration:o}).set(1).then(()=>{}),s.$$set=p=>{"wod"in p&&t(0,i=p.wod),"text"in p&&t(1,a=p.text),"points"in p&&t(6,l=p.points),"liHeight"in p&&t(7,u=p.liHeight),"startOffset"in p&&t(2,c=p.startOffset)},s.$$.update=()=>{s.$$.dirty&192&&t(4,r=l*u),s.$$.dirty&1&&t(3,n=i?"combo-wod":"combo-user")},[i,a,c,n,r,o,l,u]}class hi extends X{constructor(e){super(),Q(this,e,ci,ui,Y,{wod:0,text:1,points:6,liHeight:7,startOffset:2})}}function dn(s,e,t){const r=s.slice();return r[4]=e[t].valid,r[5]=e[t].text,r[6]=e[t].revealWod,r[7]=e[t].points,r}function mn(s,e){let t,r,n;return r=new hi({props:{wod:e[1],valid:e[4],text:e[5],revealWod:e[6],points:e[7],liHeight:e[2],startOffset:e[3]}}),{key:s,first:null,c(){t=se(),z(r.$$.fragment),this.h()},l(o){t=se(),F(r.$$.fragment,o),this.h()},h(){this.first=t},m(o,i){C(o,t,i),V(r,o,i),n=!0},p(o,i){e=o;const a={};i&2&&(a.wod=e[1]),i&1&&(a.valid=e[4]),i&1&&(a.text=e[5]),i&1&&(a.revealWod=e[6]),i&1&&(a.points=e[7]),i&4&&(a.liHeight=e[2]),i&8&&(a.startOffset=e[3]),r.$set(a)},i(o){n||(S(r.$$.fragment,o),n=!0)},o(o){R(r.$$.fragment,o),n=!1},d(o){o&&f(t),W(r,o)}}}function fi(s){let e,t=[],r=new Map,n,o=s[0];const i=a=>a[5];for(let a=0;a<o.length;a+=1){let l=dn(s,o,a),u=i(l);r.set(u,t[a]=mn(u,l))}return{c(){e=v("ul");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=w(a,"UL",{class:!0});var l=E(e);for(let u=0;u<t.length;u+=1)t[u].l(l);l.forEach(f),this.h()},h(){g(e,"class","svelte-10641va"),te(e,"wod",s[1])},m(a,l){C(a,e,l);for(let u=0;u<t.length;u+=1)t[u].m(e,null);n=!0},p(a,[l]){l&15&&(o=a[0],he(),t=js(t,l,i,1,a,o,r,e,Is,mn,null,dn),fe()),l&2&&te(e,"wod",a[1])},i(a){if(!n){for(let l=0;l<o.length;l+=1)S(t[l]);n=!0}},o(a){for(let l=0;l<t.length;l+=1)R(t[l]);n=!1},d(a){a&&f(e);for(let l=0;l<t.length;l+=1)t[l].d()}}}function di(s,e,t){let{guesses:r}=e,{wod:n=!1}=e,{liHeight:o}=e,{startOffset:i}=e;return s.$$set=a=>{"guesses"in a&&t(0,r=a.guesses),"wod"in a&&t(1,n=a.wod),"liHeight"in a&&t(2,o=a.liHeight),"startOffset"in a&&t(3,i=a.startOffset)},[r,n,o,i]}class fs extends X{constructor(e){super(),Q(this,e,di,fi,Y,{guesses:0,wod:1,liHeight:2,startOffset:3})}}function mi(s){let e,t,r,n,o,i,a;return{c(){e=v("div"),t=v("div"),r=v("span"),n=B(s[0]),o=U(),i=v("p"),a=B(s[1]),this.h()},l(l){e=w(l,"DIV",{class:!0,style:!0});var u=E(e);t=w(u,"DIV",{class:!0});var c=E(t);r=w(c,"SPAN",{class:!0});var h=E(r);n=x(h,s[0]),h.forEach(f),c.forEach(f),o=M(u),i=w(u,"P",{class:!0});var p=E(i);a=x(p,s[1]),p.forEach(f),u.forEach(f),this.h()},h(){g(r,"class","points svelte-j4beyk"),g(t,"class","pill combo-mark svelte-j4beyk"),te(t,"triple",s[5]),te(t,"above",s[2]),te(t,"below",s[3]),te(t,"hasArrowBelow",s[7]),ue(t,"bottom",s[6],!1),g(i,"class","name svelte-j4beyk"),g(e,"class","wrapper svelte-j4beyk"),ue(e,"--delay",s[8]+"ms"),ue(e,"--gutter-width",ds+"px"),te(e,"wod",s[4])},m(l,u){C(l,e,u),d(e,t),d(t,r),d(r,n),d(e,o),d(e,i),d(i,a)},p(l,[u]){u&1&&we(n,l[0]),u&32&&te(t,"triple",l[5]),u&4&&te(t,"above",l[2]),u&8&&te(t,"below",l[3]),u&128&&te(t,"hasArrowBelow",l[7]),u&64&&ue(t,"bottom",l[6],!1),u&2&&we(a,l[1]),u&256&&ue(e,"--delay",l[8]+"ms"),u&16&&te(e,"wod",l[4])},i:K,o:K,d(l){l&&f(e)}}}const ds=36;function pi(s,e,t){let r,n,o,i,a,l;H(s,is,m=>t(8,l=m));let{points:u}=e,{name:c}=e,{y:h=0}=e,{above:p}=e;return s.$$set=m=>{"points"in m&&t(0,u=m.points),"name"in m&&t(1,c=m.name),"y"in m&&t(9,h=m.y),"above"in m&&t(2,p=m.above)},s.$$.update=()=>{s.$$.dirty&2&&t(4,r=c!=="you"),s.$$.dirty&528&&t(3,n=r?h<=ds:h<=0),s.$$.dirty&25&&t(7,o=r&&n&&u>1),s.$$.dirty&536&&t(6,i=`${r&&n?0:h}px`),s.$$.dirty&1&&t(5,a=u>99)},[u,c,p,n,r,a,i,o,l,h]}class ms extends X{constructor(e){super(),Q(this,e,pi,mi,Y,{points:0,name:1,y:9,above:2})}}const pn={"20rem":"(min-width: 20rem)","30rem":"(min-width: 30rem)","40rem":"(min-width: 40rem)","50rem":"(min-width: 50rem)","60rem":"(min-width: 60rem)","70rem":"(min-width: 70rem)","80rem":"(min-width: 80rem)",reducedMotion:"(prefers-reduced-motion: reduce)"};function gi(s){const e={classNames:""},t=[];for(let r in s)e[r]=s[r].matches,e[r]&&t.push(`mq-${r}`);return e.classNames=t.join(" "),e}const _i=Us({},s=>{const e={},t=()=>s(gi(e));{for(let r in pn)e[r]=window.matchMedia(pn[r]),e[r].addListener(t);t()}return()=>{for(let r in e)e[r].removeListener(t)}});function gn(s){let e,t,r,n,o;return e=new fs({props:{guesses:s[4],wod:!0,liHeight:s[3]}}),n=new ms({props:{name:s[11].name,points:s[6].wod,y:s[1],above:s[7]}}),{c(){t=v("div"),z(e.$$.fragment),r=U(),z(n.$$.fragment),this.h()},l(i){t=w(i,"DIV",{style:!0});var a=E(t);F(e.$$.fragment,a),r=M(i),F(n.$$.fragment,i),this.h()},h(){ue(t,"display","contents"),ue(t,"--offsetY",s[9])},m(i,a){C(i,t,a),V(e,t,null),C(i,r,a),V(n,i,a),o=!0},p(i,a){a&512&&ue(t,"--offsetY",i[9]);const l={};a&16&&(l.guesses=i[4]),a&8&&(l.liHeight=i[3]),e.$set(l);const u={};a&2048&&(u.name=i[11].name),a&64&&(u.points=i[6].wod),a&2&&(u.y=i[1]),a&128&&(u.above=i[7]),n.$set(u)},i(i){o||(S(e.$$.fragment,i),S(n.$$.fragment,i),o=!0)},o(i){R(e.$$.fragment,i),R(n.$$.fragment,i),o=!1},d(i){i&&f(t),W(e,i),i&&f(r),W(n,i)}}}function vi(s){let e,t,r,n,o,i,a,l;t=new ms({props:{name:"you",points:s[6].user,y:s[2]}}),n=new fs({props:{guesses:s[5],liHeight:s[3],startOffset:s[8]}});let u=!s[10]&&gn(s);return{c(){e=v("div"),z(t.$$.fragment),r=U(),o=v("div"),z(n.$$.fragment),i=U(),u&&u.c(),this.h()},l(c){e=w(c,"DIV",{id:!0,class:!0});var h=E(e);F(t.$$.fragment,h),r=M(h),o=w(h,"DIV",{style:!0});var p=E(o);F(n.$$.fragment,p),i=M(h),u&&u.l(h),h.forEach(f),this.h()},h(){ue(o,"display","contents"),ue(o,"--offsetY",s[9]),g(e,"id","play-guesses"),g(e,"class","svelte-9xp0da"),es(()=>s[22].call(e))},m(c,h){C(c,e,h),V(t,e,null),d(e,r),d(e,o),V(n,o,null),d(e,i),u&&u.m(e,null),a=Rs(e,s[22].bind(e)),l=!0},p(c,[h]){const p={};h&64&&(p.points=c[6].user),h&4&&(p.y=c[2]),t.$set(p),h&512&&ue(o,"--offsetY",c[9]);const m={};h&32&&(m.guesses=c[5]),h&8&&(m.liHeight=c[3]),h&256&&(m.startOffset=c[8]),n.$set(m),c[10]?u&&(he(),R(u,1,1,()=>{u=null}),fe()):u?(u.p(c,h),h&1024&&S(u,1)):(u=gn(c),u.c(),S(u,1),u.m(e,null))},i(c){l||(S(t.$$.fragment,c),S(n.$$.fragment,c),S(u),l=!0)},o(c){R(t.$$.fragment,c),R(n.$$.fragment,c),R(u),l=!1},d(c){c&&f(e),W(t),W(n),u&&u.d(),a()}}}const wi=.75,_n=2;function bi(s,e,t){let r,n,o,i,a,l,u,c,h,p,m,_,b,y,O,P,j,I,k,N,D;H(s,os,$=>t(6,j=$)),H(s,Re,$=>t(20,I=$)),H(s,_i,$=>t(21,k=$)),H(s,ft,$=>t(10,N=$)),H(s,ut,$=>t(11,D=$));const J=$=>$.reason===void 0;let L=0;function Z(){L=this.clientHeight,t(0,L)}return s.$$.update=()=>{s.$$.dirty&2097152&&t(3,r=k["40rem"]?32:24),s.$$.dirty&1048576&&t(5,n=[].concat(...I.user).filter(J)),s.$$.dirty&1048576&&t(4,o=[].concat(...I.wod).filter(J)),s.$$.dirty&32&&t(19,i=n.length*_n),s.$$.dirty&16&&t(18,a=o.length*_n),s.$$.dirty&524360&&t(13,l=j.user*r-i),s.$$.dirty&262216&&t(17,u=j.wod*r-a),s.$$.dirty&139264&&t(12,c=u-l),s.$$.dirty&1&&t(14,h=L*wi),s.$$.dirty&24576&&t(16,p=l-h),s.$$.dirty&65536&&t(15,m=Math.max(0,p)),s.$$.dirty&32768&&t(9,_=`${m}px`),s.$$.dirty&81921&&t(8,b=(L-h+Math.min(0,p)*-1)*-1),s.$$.dirty&57344&&t(2,y=m>0?h:l),s.$$.dirty&4101&&t(1,O=Math.min(L,Math.max(0,c+y))),s.$$.dirty&3&&t(7,P=O===L)},[L,O,y,r,o,n,j,P,b,_,N,D,c,l,h,m,p,u,a,i,I,k,Z]}class yi extends X{constructor(e){super(),Q(this,e,bi,vi,Y,{})}}function ki(s){let e,t,r,n,o,i,a,l,u,c,h,p;return{c(){e=v("div"),t=v("form"),r=v("div"),n=v("div"),o=B(s[0]),i=U(),a=v("input"),l=U(),u=v("button"),c=B("\u2192"),this.h()},l(m){e=w(m,"DIV",{id:!0,class:!0});var _=E(e);t=w(_,"FORM",{class:!0});var b=E(t);r=w(b,"DIV",{class:!0});var y=E(r);n=w(y,"DIV",{class:!0,"aria-hidden":!0});var O=E(n);o=x(O,s[0]),O.forEach(f),i=M(y),a=w(y,"INPUT",{spellcheck:!0,maxlength:!0,placeholder:!0,class:!0}),l=M(y),u=w(y,"BUTTON",{type:!0,class:!0});var P=E(u);c=x(P,"\u2192"),P.forEach(f),y.forEach(f),b.forEach(f),_.forEach(f),this.h()},h(){g(n,"class","bg svelte-nlhu16"),g(n,"aria-hidden","true"),g(a,"spellcheck","false"),g(a,"maxlength","15"),g(a,"placeholder","enter word"),a.disabled=s[2],g(a,"class","svelte-nlhu16"),g(u,"type","submit"),g(u,"class","svelte-nlhu16"),g(r,"class","box svelte-nlhu16"),g(t,"class","svelte-nlhu16"),g(e,"id","play-input"),g(e,"class","svelte-nlhu16")},m(m,_){C(m,e,_),d(e,t),d(t,r),d(r,n),d(n,o),d(r,i),d(r,a),at(a,s[0]),s[6](a),d(r,l),d(r,u),d(u,c),h||(p=[oe(a,"input",s[5]),oe(t,"submit",s[3])],h=!0)},p(m,[_]){_&1&&we(o,m[0]),_&4&&(a.disabled=m[2]),_&1&&a.value!==m[0]&&at(a,m[0])},i:K,o:K,d(m){m&&f(e),s[6](null),h=!1,Pe(p)}}}function Ei(s,e,t){let r,n;H(s,bt,m=>t(4,n=m));const o=ht();let{value:i=""}=e,a;const l=()=>{i&&o("submit",i),t(0,i="")},u=m=>{m.preventDefault(),t(0,i=i.trim().toLowerCase()),l()},c=async()=>{await As(),a.focus()};function h(){i=this.value,t(0,i)}function p(m){$r[m?"unshift":"push"](()=>{a=m,t(1,a)})}return s.$$set=m=>{"value"in m&&t(0,i=m.value)},s.$$.update=()=>{s.$$.dirty&1&&i.length*20,s.$$.dirty&16&&t(2,r=!n),s.$$.dirty&16&&n&&c()},[i,a,r,u,n,h,p]}class Ti extends X{constructor(e){super(),Q(this,e,Ei,ki,Y,{value:0})}}const $i=[{row:0,value:"q"},{row:0,value:"w"},{row:0,value:"e"},{row:0,value:"r"},{row:0,value:"t"},{row:0,value:"y"},{row:0,value:"u"},{row:0,value:"i"},{row:0,value:"o"},{row:0,value:"p"},{row:1,value:"a"},{row:1,value:"s"},{row:1,value:"d"},{row:1,value:"f"},{row:1,value:"g"},{row:1,value:"h"},{row:1,value:"j"},{row:1,value:"k"},{row:1,value:"l"},{row:2,value:"Shift"},{row:2,value:"z"},{row:2,value:"x"},{row:2,value:"c"},{row:2,value:"v"},{row:2,value:"b"},{row:2,value:"n"},{row:2,value:"m"},{row:2,value:"Backspace"},{row:3,value:"Page1"},{row:3,value:","},{row:3,value:"Space"},{row:3,value:"."},{row:3,value:"Enter"},{row:0,value:"1",page:1},{row:0,value:"2",page:1},{row:0,value:"3",page:1},{row:0,value:"4",page:1},{row:0,value:"5",page:1},{row:0,value:"6",page:1},{row:0,value:"7",page:1},{row:0,value:"8",page:1},{row:0,value:"9",page:1},{row:0,value:"0",page:1},{row:1,value:"!",page:1},{row:1,value:"@",page:1},{row:1,value:"#",page:1},{row:1,value:"$",page:1},{row:1,value:"%",page:1},{row:1,value:"^",page:1},{row:1,value:"&",page:1},{row:1,value:"*",page:1},{row:1,value:"(",page:1},{row:1,value:")",page:1},{row:2,value:"-",page:1},{row:2,value:"_",page:1},{row:2,value:"=",page:1},{row:2,value:"+",page:1},{row:2,value:";",page:1},{row:2,value:":",page:1},{row:2,value:"'",page:1},{row:2,value:'"',page:1},{row:2,value:"<",page:1},{row:2,value:">",page:1},{row:3,value:"Page0",page:1},{row:3,value:"/",page:1},{row:3,value:"?",page:1},{row:3,value:"[",page:1},{row:3,value:"]",page:1},{row:3,value:"{",page:1},{row:3,value:"}",page:1},{row:3,value:"|",page:1},{row:3,value:"\\",page:1},{row:3,value:"~",page:1}],Si=[{row:0,value:"q"},{row:0,value:"w"},{row:0,value:"e"},{row:0,value:"r"},{row:0,value:"t"},{row:0,value:"y"},{row:0,value:"u"},{row:0,value:"i"},{row:0,value:"o"},{row:0,value:"p"},{row:1,value:"a"},{row:1,value:"s"},{row:1,value:"d"},{row:1,value:"f"},{row:1,value:"g"},{row:1,value:"h"},{row:1,value:"j"},{row:1,value:"k"},{row:1,value:"l"},{row:2,value:"z"},{row:2,value:"x"},{row:2,value:"c"},{row:2,value:"v"},{row:2,value:"b"},{row:2,value:"n"},{row:2,value:"m"},{row:2,value:"Backspace"}],Oi=[{row:0,value:"q"},{row:0,value:"w"},{row:0,value:"e"},{row:0,value:"r"},{row:0,value:"t"},{row:0,value:"y"},{row:0,value:"u"},{row:0,value:"i"},{row:0,value:"o"},{row:0,value:"p"},{row:1,value:"a"},{row:1,value:"s"},{row:1,value:"d"},{row:1,value:"f"},{row:1,value:"g"},{row:1,value:"h"},{row:1,value:"j"},{row:1,value:"k"},{row:1,value:"l"},{row:2,value:"Enter"},{row:2,value:"z"},{row:2,value:"x"},{row:2,value:"c"},{row:2,value:"v"},{row:2,value:"b"},{row:2,value:"n"},{row:2,value:"m"},{row:2,value:"Backspace"}],ji=[{row:0,value:"a"},{row:0,value:"z"},{row:0,value:"e"},{row:0,value:"r"},{row:0,value:"t"},{row:0,value:"y"},{row:0,value:"u"},{row:0,value:"i"},{row:0,value:"o"},{row:0,value:"p"},{row:1,value:"q"},{row:1,value:"s"},{row:1,value:"d"},{row:1,value:"f"},{row:1,value:"g"},{row:1,value:"h"},{row:1,value:"j"},{row:1,value:"k"},{row:1,value:"l"},{row:1,value:"m"},{row:2,value:"Shift"},{row:2,value:"w"},{row:2,value:"x"},{row:2,value:"c"},{row:2,value:"v"},{row:2,value:"b"},{row:2,value:"n"},{row:2,value:"Backspace"},{row:3,value:"Page1"},{row:3,value:","},{row:3,value:"Space"},{row:3,value:"."},{row:3,value:"Enter"},{row:0,value:"1",page:1},{row:0,value:"2",page:1},{row:0,value:"3",page:1},{row:0,value:"4",page:1},{row:0,value:"5",page:1},{row:0,value:"6",page:1},{row:0,value:"7",page:1},{row:0,value:"8",page:1},{row:0,value:"9",page:1},{row:0,value:"0",page:1},{row:1,value:"!",page:1},{row:1,value:"@",page:1},{row:1,value:"#",page:1},{row:1,value:"$",page:1},{row:1,value:"%",page:1},{row:1,value:"^",page:1},{row:1,value:"&",page:1},{row:1,value:"*",page:1},{row:1,value:"(",page:1},{row:1,value:")",page:1},{row:2,value:"-",page:1},{row:2,value:"_",page:1},{row:2,value:"=",page:1},{row:2,value:"+",page:1},{row:2,value:";",page:1},{row:2,value:":",page:1},{row:2,value:"'",page:1},{row:2,value:'"',page:1},{row:2,value:"<",page:1},{row:2,value:">",page:1},{row:3,value:"Page0",page:1},{row:3,value:"/",page:1},{row:3,value:"?",page:1},{row:3,value:"[",page:1},{row:3,value:"]",page:1},{row:3,value:"{",page:1},{row:3,value:"}",page:1},{row:3,value:"|",page:1},{row:3,value:"\\",page:1},{row:3,value:"~",page:1}],Ii=[{row:0,value:"a"},{row:0,value:"z"},{row:0,value:"e"},{row:0,value:"r"},{row:0,value:"t"},{row:0,value:"y"},{row:0,value:"u"},{row:0,value:"i"},{row:0,value:"o"},{row:0,value:"p"},{row:1,value:"q"},{row:1,value:"s"},{row:1,value:"d"},{row:1,value:"f"},{row:1,value:"g"},{row:1,value:"h"},{row:1,value:"j"},{row:1,value:"k"},{row:1,value:"l"},{row:1,value:"m"},{row:2,value:"w"},{row:2,value:"x"},{row:2,value:"c"},{row:2,value:"v"},{row:2,value:"b"},{row:2,value:"n"},{row:2,value:"Backspace"}],Ri=[{row:0,value:"a"},{row:0,value:"z"},{row:0,value:"e"},{row:0,value:"r"},{row:0,value:"t"},{row:0,value:"y"},{row:0,value:"u"},{row:0,value:"i"},{row:0,value:"o"},{row:0,value:"p"},{row:1,value:"q"},{row:1,value:"s"},{row:1,value:"d"},{row:1,value:"f"},{row:1,value:"g"},{row:1,value:"h"},{row:1,value:"j"},{row:1,value:"k"},{row:1,value:"l"},{row:1,value:"m"},{row:2,value:"Enter"},{row:2,value:"w"},{row:2,value:"x"},{row:2,value:"c"},{row:2,value:"v"},{row:2,value:"b"},{row:2,value:"n"},{row:2,value:"Backspace"}],Ai='<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-delete"><path d="M21 4H8l-7 8 7 8h13a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"></path><line x1="18" y1="9" x2="12" y2="15"></line><line x1="12" y1="9" x2="18" y2="15"></line></svg>',Pi='<svg width="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-corner-down-left"><polyline points="9 10 4 15 9 20"></polyline><path d="M20 4v7a4 4 0 0 1-4 4H4"></path></svg>';function vn(s,e,t){const r=s.slice();return r[27]=e[t],r[29]=t,r}function wn(s,e,t){const r=s.slice();return r[30]=e[t],r}function bn(s,e,t){const r=s.slice();return r[33]=e[t].value,r[34]=e[t].display,r}function Ci(s){let e=s[34]+"",t;return{c(){t=B(e)},l(r){t=x(r,e)},m(r,n){C(r,t,n)},p(r,n){n[0]&8&&e!==(e=r[34]+"")&&we(t,e)},d(r){r&&f(t)}}}function Ni(s){let e,t=s[34]+"",r;return{c(){e=new Ps(!1),r=se(),this.h()},l(n){e=Cs(n,!1),r=se(),this.h()},h(){e.a=r},m(n,o){e.m(t,n,o),C(n,r,o)},p(n,o){o[0]&8&&t!==(t=n[34]+"")&&e.p(t)},d(n){n&&f(r),n&&e.d()}}}function yn(s){let e,t,r,n,o;function i(m,_){return _[0]&8&&(t=null),t==null&&(t=!!m[34].includes("<svg")),t?Ni:Ci}let a=i(s,[-1,-1]),l=a(s);function u(...m){return s[19](s[33],...m)}function c(...m){return s[20](s[33],...m)}function h(){return s[21](s[33])}function p(){return s[22](s[33])}return{c(){e=v("button"),l.c(),this.h()},l(m){e=w(m,"BUTTON",{class:!0});var _=E(e);l.l(_),_.forEach(f),this.h()},h(){g(e,"class",r="key key--"+s[33]+" "+(s[0][s[33]]||"")+" svelte-jsnwng"),te(e,"single",s[33].length===1),te(e,"active",s[33]===s[2])},m(m,_){C(m,e,_),l.m(e,null),n||(o=[oe(e,"touchstart",u),oe(e,"mousedown",c),oe(e,"touchend",h,{passive:!0}),oe(e,"mouseup",p)],n=!0)},p(m,_){s=m,a===(a=i(s,_))&&l?l.p(s,_):(l.d(1),l=a(s),l&&(l.c(),l.m(e,null))),_[0]&9&&r!==(r="key key--"+s[33]+" "+(s[0][s[33]]||"")+" svelte-jsnwng")&&g(e,"class",r),_[0]&9&&te(e,"single",s[33].length===1),_[0]&13&&te(e,"active",s[33]===s[2])},d(m){m&&f(e),l.d(),n=!1,Pe(o)}}}function kn(s){let e,t=s[30],r=[];for(let n=0;n<t.length;n+=1)r[n]=yn(bn(s,t,n));return{c(){e=v("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=w(n,"DIV",{class:!0});var o=E(e);for(let i=0;i<r.length;i+=1)r[i].l(o);o.forEach(f),this.h()},h(){g(e,"class","row row--"+s[29]+" svelte-jsnwng")},m(n,o){C(n,e,o);for(let i=0;i<r.length;i+=1)r[i].m(e,null)},p(n,o){if(o[0]&61){t=n[30];let i;for(i=0;i<t.length;i+=1){const a=bn(n,t,i);r[i]?r[i].p(a,o):(r[i]=yn(a),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=t.length}},d(n){n&&f(e),$e(r,n)}}}function En(s){let e,t,r=s[27],n=[];for(let o=0;o<r.length;o+=1)n[o]=kn(wn(s,r,o));return{c(){e=v("div");for(let o=0;o<n.length;o+=1)n[o].c();t=U(),this.h()},l(o){e=w(o,"DIV",{class:!0});var i=E(e);for(let a=0;a<n.length;a+=1)n[a].l(i);t=M(i),i.forEach(f),this.h()},h(){g(e,"class","page svelte-jsnwng"),te(e,"visible",s[29]===s[1])},m(o,i){C(o,e,i);for(let a=0;a<n.length;a+=1)n[a].m(e,null);d(e,t)},p(o,i){if(i[0]&61){r=o[27];let a;for(a=0;a<r.length;a+=1){const l=wn(o,r,a);n[a]?n[a].p(l,i):(n[a]=kn(l),n[a].c(),n[a].m(e,t))}for(;a<n.length;a+=1)n[a].d(1);n.length=r.length}i[0]&2&&te(e,"visible",o[29]===o[1])},d(o){o&&f(e),$e(n,o)}}}function Di(s){let e,t=s[3],r=[];for(let n=0;n<t.length;n+=1)r[n]=En(vn(s,t,n));return{c(){e=v("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=w(n,"DIV",{class:!0});var o=E(e);for(let i=0;i<r.length;i+=1)r[i].l(o);o.forEach(f),this.h()},h(){g(e,"class","svelte-keyboard")},m(n,o){C(n,e,o);for(let i=0;i<r.length;i+=1)r[i].m(e,null)},p(n,o){if(o[0]&63){t=n[3];let i;for(i=0;i<t.length;i+=1){const a=vn(n,t,i);r[i]?r[i].p(a,o):(r[i]=En(a),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=t.length}},i:K,o:K,d(n){n&&f(e),$e(r,n)}}}const Ui="abcdefghijklmnopqrstuvwxyz";function Mi(s,e,t){let r,n,o,i,a,l,u,c,h,{custom:p}=e,{localizationLayout:m="qwerty"}=e,{layout:_="standard"}=e,{noSwap:b=[]}=e,{keyClass:y={}}=e,O=0,P=!1,j;const I={qwerty:{standard:$i,crossword:Si,wordle:Oi},azerty:{standard:ji,crossword:Ii,wordle:Ri}},k=ht(),N={Page0:"abc",Page1:"?123",Space:" ",Shift:"abc",Enter:Pi,Backspace:Ai},D=T=>[...new Set(T)],J=(T,q)=>{if(T.preventDefault(),t(2,j=q),q.includes("Page"))t(1,O=+q.substr(-1));else if(q==="Shift")t(10,P=!P);else{let ee=q;P&&Ui.includes(q)&&(ee=q.toUpperCase()),k("keydown",ee)}return T.stopPropagation(),!1},L=T=>{setTimeout(()=>{T===j&&t(2,j=void 0)},50)},Z=(T,q)=>J(q,T),$=(T,q)=>J(q,T),G=T=>L(T),A=T=>L(T);return s.$$set=T=>{"custom"in T&&t(6,p=T.custom),"localizationLayout"in T&&t(7,m=T.localizationLayout),"layout"in T&&t(8,_=T.layout),"noSwap"in T&&t(9,b=T.noSwap),"keyClass"in T&&t(0,y=T.keyClass)},s.$$.update=()=>{s.$$.dirty[0]&448&&t(18,r=p||I[m][_]||standard),s.$$.dirty[0]&263680&&t(17,n=r.map(T=>{let q=T.display;const ee=N[T.value];return ee&&!b.includes(T.value)&&!T.noSwap&&(q=ee),q||(q=P?T.value.toUpperCase():T.value),T.value==="Shift"&&(q=P?ee:ee.toUpperCase()),{...T,display:q}})),s.$$.dirty[0]&131072&&t(15,o=n.filter(T=>!T.page)),s.$$.dirty[0]&131072&&t(13,i=n.filter(T=>T.page)),s.$$.dirty[0]&32768&&t(14,a=D(o.map(T=>T.row))),s.$$.dirty[0]&16384&&a.sort((T,q)=>T-q),s.$$.dirty[0]&8192&&t(16,l=D(i.map(T=>T.row))),s.$$.dirty[0]&65536&&l.sort((T,q)=>T-q),s.$$.dirty[0]&49152&&t(12,u=a.map(T=>o.filter(q=>q.row===T))),s.$$.dirty[0]&24576&&t(11,c=a.map(T=>i.filter(q=>q.row===T))),s.$$.dirty[0]&6144&&t(3,h=[u,c])},[y,O,j,h,J,L,p,m,_,b,P,c,u,i,a,o,l,n,r,Z,$,G,A]}class Li extends X{constructor(e){super(),Q(this,e,Mi,Di,Y,{custom:6,localizationLayout:7,layout:8,noSwap:9,keyClass:0},null,[-1,-1])}}function qi(s){let e,t,r,n;return t=new Li({props:{layout:"wordle"}}),t.$on("keydown",s[0]),{c(){e=v("div"),r=v("div"),z(t.$$.fragment),this.h()},l(o){e=w(o,"DIV",{id:!0,class:!0});var i=E(e);r=w(i,"DIV",{style:!0});var a=E(r);F(t.$$.fragment,a),i.forEach(f),this.h()},h(){ue(r,"display","contents"),ue(r,"--height","42px"),ue(r,"--margin","4px"),ue(r,"--min-width","28px"),ue(r,"--background","var(--color-bg-2)"),ue(r,"--active-background","var(--color-bg-3)"),ue(r,"--color","var(--color-fg)"),g(e,"id","play-keyboard"),g(e,"class","svelte-bw5qg5")},m(o,i){C(o,e,i),d(e,r),V(t,r,null),n=!0},p:K,i(o){n||(S(t.$$.fragment,o),n=!0)},o(o){R(t.$$.fragment,o),n=!1},d(o){o&&f(e),W(t)}}}function Bi(s,e,t){const r=ht();let{value:n=""}=e;const o=()=>{n&&r("submit",n),t(1,n="")},i=a=>{a.detail==="Enter"?o():a.detail==="Backspace"?t(1,n=n.substring(0,n.length-1)):t(1,n=`${n}${a.detail}`)};return s.$$set=a=>{"value"in a&&t(1,n=a.value)},[i,n]}class xi extends X{constructor(e){super(),Q(this,e,Bi,qi,Y,{value:1})}}function Hi(s){let e,t,r;return{c(){e=v("div"),t=v("div"),r=v("span"),this.h()},l(n){e=w(n,"DIV",{id:!0,class:!0});var o=E(e);t=w(o,"DIV",{class:!0});var i=E(t);r=w(i,"SPAN",{class:!0}),E(r).forEach(f),i.forEach(f),o.forEach(f),this.h()},h(){g(r,"class","progress combo-mark svelte-1fiv3sg"),ue(r,"width",s[0],!1),g(t,"class","margin svelte-1fiv3sg"),g(e,"id","play-clock"),g(e,"class","svelte-1fiv3sg")},m(n,o){C(n,e,o),d(e,t),d(t,r)},p(n,[o]){o&1&&ue(r,"width",n[0],!1)},i:K,o:K,d(n){n&&f(e)}}}const Tn=1e3;function Gi(s,e,t){let r,n,o,i,a,l;H(s,yt,h=>t(5,i=h)),H(s,bt,h=>t(3,a=h)),H(s,ct,h=>t(4,l=h));const u=60*Tn,c=h=>{h?vt.start():(vt.stop(),vt.reset())};return s.$$.update=()=>{s.$$.dirty&16&&t(1,o=Math.ceil((u-l)/Tn)),s.$$.dirty&2&&o<=0&&(_e(bt,a=!1,a),_e(yt,i=!0,i)),s.$$.dirty&8&&c(a),s.$$.dirty&16&&t(2,r=u-l),s.$$.dirty&4&&t(0,n=`${r/u*100}%`)},[n,o,r,a,l]}class zi extends X{constructor(e){super(),Q(this,e,Gi,Hi,Y,{})}}function $n(s,e,t){const r=s.slice();return r[2]=e[t],r[4]=t,r}function Sn(s){let e,t=s[2]+"",r;return{c(){e=v("li"),r=B(t),this.h()},l(n){e=w(n,"LI",{class:!0});var o=E(e);r=x(o,t),o.forEach(f),this.h()},h(){g(e,"class","svelte-alqtoq")},m(n,o){C(n,e,o),d(e,r)},p(n,o){o&1&&t!==(t=n[2]+"")&&we(r,t)},d(n){n&&f(e)}}}function Fi(s){let e,t,r=s[0],n=[];for(let o=0;o<r.length;o+=1)n[o]=Sn($n(s,r,o));return{c(){e=v("div"),t=v("ul");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=w(o,"DIV",{id:!0,class:!0});var i=E(e);t=w(i,"UL",{class:!0});var a=E(t);for(let l=0;l<n.length;l+=1)n[l].l(a);a.forEach(f),i.forEach(f),this.h()},h(){g(t,"class","svelte-alqtoq"),g(e,"id","play-clue"),g(e,"class","svelte-alqtoq")},m(o,i){C(o,e,i),d(e,t);for(let a=0;a<n.length;a+=1)n[a].m(t,null)},p(o,[i]){if(i&1){r=o[0];let a;for(a=0;a<r.length;a+=1){const l=$n(o,r,a);n[a]?n[a].p(l,i):(n[a]=Sn(l),n[a].c(),n[a].m(t,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=r.length}},i:K,o:K,d(o){o&&f(e),$e(n,o)}}}function Vi(s,e,t){let r,{clue:n}=e;return s.$$set=o=>{"clue"in o&&t(1,n=o.clue)},s.$$.update=()=>{s.$$.dirty&2&&t(0,r=n.split("|"))},[r,n]}class Wi extends X{constructor(e){super(),Q(this,e,Vi,Fi,Y,{clue:1})}}function On(s){let e,t,r=s[0].text+"",n,o,i=s[2][s[0].reason]+"",a;return{c(){e=v("p"),t=v("strong"),n=B(r),o=U(),a=B(i),this.h()},l(l){e=w(l,"P",{class:!0});var u=E(e);t=w(u,"STRONG",{});var c=E(t);n=x(c,r),c.forEach(f),o=M(u),a=x(u,i),u.forEach(f),this.h()},h(){g(e,"class","svelte-185b04q")},m(l,u){C(l,e,u),d(e,t),d(t,n),d(e,o),d(e,a)},p(l,u){u&1&&r!==(r=l[0].text+"")&&we(n,r),u&1&&i!==(i=l[2][l[0].reason]+"")&&we(a,i)},d(l){l&&f(e)}}}function Ji(s){let e,t=s[1]&&On(s);return{c(){e=v("div"),t&&t.c(),this.h()},l(r){e=w(r,"DIV",{id:!0,class:!0});var n=E(e);t&&t.l(n),n.forEach(f),this.h()},h(){g(e,"id","play-invalid"),g(e,"class","svelte-185b04q")},m(r,n){C(r,e,n),t&&t.m(e,null)},p(r,[n]){r[1]?t?t.p(r,n):(t=On(r),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:K,o:K,d(r){r&&f(e),t&&t.d()}}}const Ki=2500;function Yi(s,e,t){let r,n,o;H(s,He,h=>t(4,n=h)),H(s,Re,h=>t(5,o=h));let i,a=!1,l=0;const u=["(or a variation) was played by opponent","is too short","contains non-letters","is not in the word list","was already entered"],c=()=>{t(3,l=o.user[n].length),clearTimeout(i),r.valid?t(1,a=!1):(t(1,a=!0),i=setTimeout(()=>t(1,a=!1),Ki))};return s.$$.update=()=>{s.$$.dirty&48&&t(0,r=o.user[n][o.user[n].length-1]),s.$$.dirty&48&&(o.user[n].length||t(3,l=0)),s.$$.dirty&57&&r&&o.user[n].length!==l&&c()},[r,a,u,l,n,o]}class Xi extends X{constructor(e){super(),Q(this,e,Yi,Ji,Y,{})}}function Qi(s){let e,t;return{c(){e=v("p"),t=B(s[0]),this.h()},l(r){e=w(r,"P",{class:!0});var n=E(e);t=x(n,s[0]),n.forEach(f),this.h()},h(){g(e,"class","countdown svelte-b6zmue")},m(r,n){C(r,e,n),d(e,t)},p(r,[n]){n&1&&we(t,r[0])},i:K,o:K,d(r){r&&f(e)}}}function Zi(s,e,t){let r,n,{start:o=3}=e,{text:i=""}=e;const a=ht(),l=i?-1:0,u=o*1e3,c=hs(o,{duration:u});return H(s,c,h=>t(4,n=h)),Et(()=>{c.set(l).then(()=>a("end"))}),s.$$set=h=>{"start"in h&&t(2,o=h.start),"text"in h&&t(3,i=h.text)},s.$$.update=()=>{s.$$.dirty&24&&t(0,r=n<0?i:Math.floor(n)+1)},[r,c,o,i,n]}class eo extends X{constructor(e){super(),Q(this,e,Zi,Qi,Y,{start:2,text:3})}}function jn(s){let e,t;return e=new eo({props:{text:"begin!"}}),e.$on("end",s[4]),{c(){z(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,n){V(e,r,n),t=!0},p:K,i(r){t||(S(e.$$.fragment,r),t=!0)},o(r){R(e.$$.fragment,r),t=!1},d(r){W(e,r)}}}function to(s){let e,t,r,n,o,i,a,l,u,c,h,p,m,_,b;t=new Wi({props:{clue:s[2]}}),n=new Ti({props:{value:s[1]}}),n.$on("submit",s[3]);let y=s[0]&&jn(s);a=new Xi({}),u=new yi({}),h=new zi({});function O(j){s[9](j)}let P={};return s[1]!==void 0&&(P.value=s[1]),m=new xi({props:P}),$r.push(()=>ts(m,"value",O)),m.$on("submit",s[3]),{c(){e=v("div"),z(t.$$.fragment),r=U(),z(n.$$.fragment),o=U(),y&&y.c(),i=U(),z(a.$$.fragment),l=U(),z(u.$$.fragment),c=U(),z(h.$$.fragment),p=U(),z(m.$$.fragment),this.h()},l(j){e=w(j,"DIV",{class:!0});var I=E(e);F(t.$$.fragment,I),r=M(I),F(n.$$.fragment,I),o=M(I),y&&y.l(I),i=M(I),F(a.$$.fragment,I),l=M(I),F(u.$$.fragment,I),c=M(I),F(h.$$.fragment,I),p=M(I),F(m.$$.fragment,I),I.forEach(f),this.h()},h(){g(e,"class","svelte-foxip5")},m(j,I){C(j,e,I),V(t,e,null),d(e,r),V(n,e,null),d(e,o),y&&y.m(e,null),d(e,i),V(a,e,null),d(e,l),V(u,e,null),d(e,c),V(h,e,null),d(e,p),V(m,e,null),b=!0},p(j,[I]){const k={};I&4&&(k.clue=j[2]),t.$set(k);const N={};I&2&&(N.value=j[1]),n.$set(N),j[0]?y?(y.p(j,I),I&1&&S(y,1)):(y=jn(j),y.c(),S(y,1),y.m(e,i)):y&&(he(),R(y,1,1,()=>{y=null}),fe());const D={};!_&&I&2&&(_=!0,D.value=j[1],rs(()=>_=!1)),m.$set(D)},i(j){b||(S(t.$$.fragment,j),S(n.$$.fragment,j),S(y),S(a.$$.fragment,j),S(u.$$.fragment,j),S(h.$$.fragment,j),S(m.$$.fragment,j),b=!0)},o(j){R(t.$$.fragment,j),R(n.$$.fragment,j),R(y),R(a.$$.fragment,j),R(u.$$.fragment,j),R(h.$$.fragment,j),R(m.$$.fragment,j),b=!1},d(j){j&&f(e),W(t),W(n),y&&y.d(),W(a),W(u),W(h),W(m)}}}function ro(s,e,t){let r,n,o,i,a,l,u,c,h;H(s,bt,$=>t(11,i=$)),H(s,He,$=>t(8,a=$)),H(s,_r,$=>t(12,l=$)),H(s,Re,$=>t(13,u=$)),H(s,ct,$=>t(14,c=$)),H(s,Sr,$=>t(15,h=$));let{clues:p}=e,{answers:m}=e,_=!1,b="";const y=$=>{const G=n.find(A=>A.word===$);return G?G.lemmas:""},O=$=>!o.includes($),P=({text:$,lemmas:G})=>Pt({lemmas:G,corpus:h}),j=({text:$,lemmas:G})=>{const A=u.user[a].map(T=>T.lemmas);return Pt({lemmas:G,corpus:A})},I=$=>new RegExp(/([^a-z])/,"g").test($),k=({text:$,lemmas:G})=>{let A=!0,T;return $.length<4?(A=!1,T=1):I($)?(A=!1,T=2):O($)?(A=!1,T=3):j({text:$,lemmas:G})?(A=!1,T=4):P({text:$,lemmas:G})&&(A=!1,T=0),{valid:A,reason:T}},N=({text:$,timestamp:G})=>{const{points:A}=n.find(T=>T.word===$);return+A},D=$=>{u.wod[a].forEach(G=>{const A=G.lemmas.split("|");Pt({lemmas:$,corpus:A})&&(G.revealWod=!0)})},J=async({detail:$})=>{const G=$,A=y(G),{valid:T,reason:q}=k({text:G,lemmas:A}),ee=c,pe=T?N({text:G,timestamp:ee}):void 0,ve={text:G,lemmas:A,points:pe,timestamp:ee,round:a,valid:T,reason:q};_e(Re,u.user[a]=[...u.user[a],ve],u),D(A)},L=()=>{_e(bt,i=!0,i),t(0,_=!1)};function Z($){b=$,t(1,b)}return s.$$set=$=>{"clues"in $&&t(5,p=$.clues),"answers"in $&&t(6,m=$.answers)},s.$$.update=()=>{s.$$.dirty&288&&t(2,r=p[a]),s.$$.dirty&320&&t(7,n=m[a]),s.$$.dirty&128&&_e(_r,l=n,l),s.$$.dirty&128&&(o=n.map($=>$.word)),s.$$.dirty&256&&t(0,_=!0)},[_,b,r,J,L,p,m,n,a,Z]}class no extends X{constructor(e){super(),Q(this,e,ro,to,Y,{clues:5,answers:6})}}function In(s,e,t){const r=s.slice();return r[7]=e[t],r}function dr(s){let e,t=s[7]+"",r,n=[{class:r="chunk "+s[1]+" svelte-1rapxyz"}],o={};for(let i=0;i<n.length;i+=1)o=gr(o,n[i]);return{c(){e=v(s[0]),this.h()},l(i){e=w(i,(s[0]||"null").toUpperCase(),{class:!0});var a=E(e);a.forEach(f),this.h()},h(){tn(e,o)},m(i,a){C(i,e,a),e.innerHTML=t},p(i,a){a&4&&t!==(t=i[7]+"")&&(e.innerHTML=t),tn(e,o=Ns(n,[a&2&&r!==(r="chunk "+i[1]+" svelte-1rapxyz")&&{class:r}]))},d(i){i&&f(e)}}}function Rn(s){let e=s[0],t,r=s[0]&&dr(s);return{c(){r&&r.c(),t=se()},l(n){r&&r.l(n),t=se()},m(n,o){r&&r.m(n,o),C(n,t,o)},p(n,o){n[0]?e?Y(e,n[0])?(r.d(1),r=dr(n),r.c(),r.m(t.parentNode,t)):r.p(n,o):(r=dr(n),r.c(),r.m(t.parentNode,t)):e&&(r.d(1),r=null),e=n[0]},d(n){n&&f(t),r&&r.d(n)}}}function so(s){let e,t=s[2],r=[];for(let n=0;n<t.length;n+=1)r[n]=Rn(In(s,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=se()},l(n){for(let o=0;o<r.length;o+=1)r[o].l(n);e=se()},m(n,o){for(let i=0;i<r.length;i+=1)r[i].m(n,o);C(n,e,o)},p(n,[o]){if(o&7){t=n[2];let i;for(i=0;i<t.length;i+=1){const a=In(n,t,i);r[i]?r[i].p(a,o):(r[i]=Rn(a),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=t.length}},i:K,o:K,d(n){$e(r,n),n&&f(e)}}}function io(s,e,t){let r,n,{text:o=""}=e,{max:i=o.length}=e,{space:a=!1}=e,{tag:l="span"}=e,{className:u=""}=e;return s.$$set=c=>{"text"in c&&t(3,o=c.text),"max"in c&&t(4,i=c.max),"space"in c&&t(5,a=c.space),"tag"in c&&t(0,l=c.tag),"className"in c&&t(1,u=c.className)},s.$$.update=()=>{s.$$.dirty&16&&t(6,r=new RegExp(`[\\s\\S]{1,${i}}(?!\\S)`,"g")),s.$$.dirty&104&&t(2,n=o.replace(r,`$&
`).split(`
`).map(c=>c.trim()).filter(c=>c).map((c,h)=>`${h>0&&a?"&nbsp;":""}${c}`))},[l,u,n,o,i,a,r]}class ae extends X{constructor(e){super(),Q(this,e,io,so,Y,{text:3,max:4,space:5,tag:0,className:1})}}function oo(s){let e,t,r;return t=new ae({props:{text:s[0],className:"combo-default",max:"30"}}),{c(){e=v("p"),z(t.$$.fragment),this.h()},l(n){e=w(n,"P",{id:!0,class:!0});var o=E(e);F(t.$$.fragment,o),o.forEach(f),this.h()},h(){g(e,"id","chunk-possible"),g(e,"class","svelte-182p9bn")},m(n,o){C(n,e,o),V(t,e,null),r=!0},p(n,[o]){const i={};o&1&&(i.text=n[0]),t.$set(i)},i(n){r||(S(t.$$.fragment,n),r=!0)},o(n){R(t.$$.fragment,n),r=!1},d(n){n&&f(e),W(t)}}}function ao(s,e,t){let{text:r}=e;return s.$$set=n=>{"text"in n&&t(0,r=n.text)},[r]}class lo extends X{constructor(e){super(),Q(this,e,ao,oo,Y,{text:0})}}function An(s,e,t){const r=s.slice();return r[1]=e[t],r}function Pn(s){let e,t;return e=new ae({props:{text:s[1],max:"15",className:"combo-default"}}),{c(){z(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,n){V(e,r,n),t=!0},p(r,n){const o={};n&1&&(o.text=r[1]),e.$set(o)},i(r){t||(S(e.$$.fragment,r),t=!0)},o(r){R(e.$$.fragment,r),t=!1},d(r){W(e,r)}}}function uo(s){let e,t,r=s[0],n=[];for(let i=0;i<r.length;i+=1)n[i]=Pn(An(s,r,i));const o=i=>R(n[i],1,1,()=>{n[i]=null});return{c(){e=v("p");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=w(i,"P",{id:!0});var a=E(e);for(let l=0;l<n.length;l+=1)n[l].l(a);a.forEach(f),this.h()},h(){g(e,"id","chunk-wod-words-info")},m(i,a){C(i,e,a);for(let l=0;l<n.length;l+=1)n[l].m(e,null);t=!0},p(i,[a]){if(a&1){r=i[0];let l;for(l=0;l<r.length;l+=1){const u=An(i,r,l);n[l]?(n[l].p(u,a),S(n[l],1)):(n[l]=Pn(u),n[l].c(),S(n[l],1),n[l].m(e,null))}for(he(),l=r.length;l<n.length;l+=1)o(l);fe()}},i(i){if(!t){for(let a=0;a<r.length;a+=1)S(n[a]);t=!0}},o(i){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)R(n[a]);t=!1},d(i){i&&f(e),$e(n,i)}}}function co(s,e,t){let{lines:r}=e;return s.$$set=n=>{"lines"in n&&t(0,r=n.lines)},[r]}class ho extends X{constructor(e){super(),Q(this,e,co,uo,Y,{lines:0})}}function fo(s){let e,t,r;return t=new ae({props:{text:s[0],max:"1",className:"combo-wod"}}),{c(){e=v("p"),z(t.$$.fragment),this.h()},l(n){e=w(n,"P",{id:!0,class:!0});var o=E(e);F(t.$$.fragment,o),o.forEach(f),this.h()},h(){g(e,"id","chunk-wod-words-list"),g(e,"class","svelte-rspl7a")},m(n,o){C(n,e,o),V(t,e,null),r=!0},p(n,[o]){const i={};o&1&&(i.text=n[0]),t.$set(i)},i(n){r||(S(t.$$.fragment,n),r=!0)},o(n){R(t.$$.fragment,n),r=!1},d(n){n&&f(e),W(t)}}}function mo(s,e,t){let{text:r}=e;return s.$$set=n=>{"text"in n&&t(0,r=n.text)},[r]}class po extends X{constructor(e){super(),Q(this,e,mo,fo,Y,{text:0})}}function Cn(s,e,t){const r=s.slice();return r[1]=e[t],r}function Nn(s){let e,t;return e=new ae({props:{text:s[1],max:"15",className:"combo-default"}}),{c(){z(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,n){V(e,r,n),t=!0},p(r,n){const o={};n&1&&(o.text=r[1]),e.$set(o)},i(r){t||(S(e.$$.fragment,r),t=!0)},o(r){R(e.$$.fragment,r),t=!1},d(r){W(e,r)}}}function go(s){let e,t,r=s[0],n=[];for(let i=0;i<r.length;i+=1)n[i]=Nn(Cn(s,r,i));const o=i=>R(n[i],1,1,()=>{n[i]=null});return{c(){e=v("p");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=w(i,"P",{id:!0});var a=E(e);for(let l=0;l<n.length;l+=1)n[l].l(a);a.forEach(f),this.h()},h(){g(e,"id","chunk-common-words-info")},m(i,a){C(i,e,a);for(let l=0;l<n.length;l+=1)n[l].m(e,null);t=!0},p(i,[a]){if(a&1){r=i[0];let l;for(l=0;l<r.length;l+=1){const u=Cn(i,r,l);n[l]?(n[l].p(u,a),S(n[l],1)):(n[l]=Nn(u),n[l].c(),S(n[l],1),n[l].m(e,null))}for(he(),l=r.length;l<n.length;l+=1)o(l);fe()}},i(i){if(!t){for(let a=0;a<r.length;a+=1)S(n[a]);t=!0}},o(i){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)R(n[a]);t=!1},d(i){i&&f(e),$e(n,i)}}}function _o(s,e,t){let{lines:r}=e;return s.$$set=n=>{"lines"in n&&t(0,r=n.lines)},[r]}class vo extends X{constructor(e){super(),Q(this,e,_o,go,Y,{lines:0})}}function wo(s){let e,t,r;return t=new ae({props:{text:s[0],max:"1",className:"combo-wod"}}),{c(){e=v("p"),z(t.$$.fragment),this.h()},l(n){e=w(n,"P",{id:!0,class:!0});var o=E(e);F(t.$$.fragment,o),o.forEach(f),this.h()},h(){g(e,"id","chunk-common-words-list"),g(e,"class","svelte-1243s1f")},m(n,o){C(n,e,o),V(t,e,null),r=!0},p(n,[o]){const i={};o&1&&(i.text=n[0]),t.$set(i)},i(n){r||(S(t.$$.fragment,n),r=!0)},o(n){R(t.$$.fragment,n),r=!1},d(n){n&&f(e),W(t)}}}function bo(s,e,t){let{text:r}=e;return s.$$set=n=>{"text"in n&&t(0,r=n.text)},[r]}class yo extends X{constructor(e){super(),Q(this,e,bo,wo,Y,{text:0})}}function Dn(s){let e,t,r,n,o;return t=new ho({props:{lines:["some words",`${s[5].name} got`,"that you didn't"]}}),n=new po({props:{text:s[3]}}),{c(){e=v("div"),z(t.$$.fragment),r=U(),z(n.$$.fragment),this.h()},l(i){e=w(i,"DIV",{class:!0});var a=E(e);F(t.$$.fragment,a),r=M(a),F(n.$$.fragment,a),a.forEach(f),this.h()},h(){g(e,"class","words wod-words svelte-631pl9")},m(i,a){C(i,e,a),V(t,e,null),d(e,r),V(n,e,null),o=!0},p(i,a){const l={};a&32&&(l.lines=["some words",`${i[5].name} got`,"that you didn't"]),t.$set(l);const u={};a&8&&(u.text=i[3]),n.$set(u)},i(i){o||(S(t.$$.fragment,i),S(n.$$.fragment,i),o=!0)},o(i){R(t.$$.fragment,i),R(n.$$.fragment,i),o=!1},d(i){i&&f(e),W(t),W(n)}}}function ko(s){let e,t,r,n,o,i,a,l,u;e=new lo({props:{text:"in round "+(s[0]+1)+" there were <em>"+s[4]+"</em> possible words that satisfied the clue."}});let c=s[3].length&&Dn(s);return i=new vo({props:{lines:["common","words that",`${s[1]}`]}}),l=new yo({props:{text:s[2]}}),{c(){z(e.$$.fragment),t=U(),r=v("div"),c&&c.c(),n=U(),o=v("div"),z(i.$$.fragment),a=U(),z(l.$$.fragment),this.h()},l(h){F(e.$$.fragment,h),t=M(h),r=w(h,"DIV",{class:!0});var p=E(r);c&&c.l(p),n=M(p),o=w(p,"DIV",{class:!0});var m=E(o);F(i.$$.fragment,m),a=M(m),F(l.$$.fragment,m),m.forEach(f),p.forEach(f),this.h()},h(){g(o,"class","words common-words svelte-631pl9"),g(r,"class","words-wrapper svelte-631pl9")},m(h,p){V(e,h,p),C(h,t,p),C(h,r,p),c&&c.m(r,null),d(r,n),d(r,o),V(i,o,null),d(o,a),V(l,o,null),u=!0},p(h,[p]){const m={};p&17&&(m.text="in round "+(h[0]+1)+" there were <em>"+h[4]+"</em> possible words that satisfied the clue."),e.$set(m),h[3].length?c?(c.p(h,p),p&8&&S(c,1)):(c=Dn(h),c.c(),S(c,1),c.m(r,n)):c&&(he(),R(c,1,1,()=>{c=null}),fe());const _={};p&2&&(_.lines=["common","words that",`${h[1]}`]),i.$set(_);const b={};p&4&&(b.text=h[2]),l.$set(b)},i(h){u||(S(e.$$.fragment,h),S(c),S(i.$$.fragment,h),S(l.$$.fragment,h),u=!0)},o(h){R(e.$$.fragment,h),R(c),R(i.$$.fragment,h),R(l.$$.fragment,h),u=!1},d(h){W(e,h),h&&f(t),h&&f(r),c&&c.d(),W(i),W(l)}}}const Un=3;function Eo(s,e,t){let r,n,o,i,a,l,u,c,h,p,m;H(s,ft,b=>t(7,l=b)),H(s,_r,b=>t(8,u=b)),H(s,He,b=>t(0,c=b)),H(s,Re,b=>t(9,h=b)),H(s,Sr,b=>t(10,p=b)),H(s,ut,b=>t(5,m=b));const _=({word:b,lemmas:y})=>!!!y.split("|").find(P=>p.includes(P));return s.$$.update=()=>{s.$$.dirty&256&&t(4,r=us(",")(u.length)),s.$$.dirty&513&&t(3,n=h.wod[c].filter(b=>b.valid&&!b.guessedByUserLate).slice(0,Un).map(b=>b.text).join(" ")),s.$$.dirty&256&&t(6,o=Ls(u.filter(b=>+b.points==1).filter(_))),s.$$.dirty&64&&t(2,i=o.slice(0,Un).map(b=>b.word).join(" ")),s.$$.dirty&128&&t(1,a=l?"you didn't get:":"nobody got:")},[c,a,i,n,r,m,o,l,u,h]}class To extends X{constructor(e){super(),Q(this,e,Eo,ko,Y,{})}}function Mn(s,e,t){const r=s.slice();return r[2]=e[t],r}function Ln(s){let e,t;return e=new ae({props:{text:s[2],max:"20",className:"combo-"+s[1]}}),{c(){z(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,n){V(e,r,n),t=!0},p(r,n){const o={};n&1&&(o.text=r[2]),n&2&&(o.className="combo-"+r[1]),e.$set(o)},i(r){t||(S(e.$$.fragment,r),t=!0)},o(r){R(e.$$.fragment,r),t=!1},d(r){W(e,r)}}}function $o(s){let e,t,r=s[0],n=[];for(let i=0;i<r.length;i+=1)n[i]=Ln(Mn(s,r,i));const o=i=>R(n[i],1,1,()=>{n[i]=null});return{c(){e=v("h3");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=w(i,"H3",{id:!0,class:!0});var a=E(e);for(let l=0;l<n.length;l+=1)n[l].l(a);a.forEach(f),this.h()},h(){g(e,"id","chunk-recap-title"),g(e,"class","svelte-8kaea0")},m(i,a){C(i,e,a);for(let l=0;l<n.length;l+=1)n[l].m(e,null);t=!0},p(i,[a]){if(a&3){r=i[0];let l;for(l=0;l<r.length;l+=1){const u=Mn(i,r,l);n[l]?(n[l].p(u,a),S(n[l],1)):(n[l]=Ln(u),n[l].c(),S(n[l],1),n[l].m(e,null))}for(he(),l=r.length;l<n.length;l+=1)o(l);fe()}},i(i){if(!t){for(let a=0;a<r.length;a+=1)S(n[a]);t=!0}},o(i){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)R(n[a]);t=!1},d(i){i&&f(e),$e(n,i)}}}function So(s,e,t){let{lines:r}=e,{winner:n}=e;return s.$$set=o=>{"lines"in o&&t(0,r=o.lines),"winner"in o&&t(1,n=o.winner)},[r,n]}class Oo extends X{constructor(e){super(),Q(this,e,So,$o,Y,{lines:0,winner:1})}}function jo(s){let e,t,r,n,o;return t=new ae({props:{className:"combo-user",text:"shameless plug:"}}),n=new ae({props:{text:s[0],max:"28",className:"combo-wod"}}),{c(){e=v("p"),z(t.$$.fragment),r=U(),z(n.$$.fragment),this.h()},l(i){e=w(i,"P",{id:!0,class:!0});var a=E(e);F(t.$$.fragment,a),r=M(a),F(n.$$.fragment,a),a.forEach(f),this.h()},h(){g(e,"id","chunk-recap-plug"),g(e,"class","svelte-zres95")},m(i,a){C(i,e,a),V(t,e,null),d(e,r),V(n,e,null),o=!0},p(i,[a]){const l={};a&1&&(l.text=i[0]),n.$set(l)},i(i){o||(S(t.$$.fragment,i),S(n.$$.fragment,i),o=!0)},o(i){R(t.$$.fragment,i),R(n.$$.fragment,i),o=!1},d(i){i&&f(e),W(t),W(n)}}}function Io(s,e,t){let{text:r}=e;return s.$$set=n=>{"text"in n&&t(0,r=n.text)},[r]}class Ro extends X{constructor(e){super(),Q(this,e,Io,jo,Y,{text:0})}}function qn(s){let e,t;return e=new Oo({props:{lines:s[1],winner:s[2]}}),{c(){z(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,n){V(e,r,n),t=!0},p(r,n){const o={};n&2&&(o.lines=r[1]),n&4&&(o.winner=r[2]),e.$set(o)},i(r){t||(S(e.$$.fragment,r),t=!0)},o(r){R(e.$$.fragment,r),t=!1},d(r){W(e,r)}}}function Bn(s){let e,t;return e=new Ro({props:{text:"this is a 48 character sentence that will show.",winner:s[2]}}),{c(){z(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,n){V(e,r,n),t=!0},p(r,n){const o={};n&4&&(o.winner=r[2]),e.$set(o)},i(r){t||(S(e.$$.fragment,r),t=!0)},o(r){R(e.$$.fragment,r),t=!1},d(r){W(e,r)}}}function Ao(s){let e,t,r,n,o,i=!s[4]&&qn(s),a=s[0]==="post"&&!s[4]&&s[2]==="wod"&&s[3].plug&&Bn(s);return n=new To({}),{c(){e=v("div"),i&&i.c(),t=U(),a&&a.c(),r=U(),z(n.$$.fragment),this.h()},l(l){e=w(l,"DIV",{class:!0});var u=E(e);i&&i.l(u),t=M(u),a&&a.l(u),r=M(u),F(n.$$.fragment,u),u.forEach(f),this.h()},h(){g(e,"class","svelte-bvyxft")},m(l,u){C(l,e,u),i&&i.m(e,null),d(e,t),a&&a.m(e,null),d(e,r),V(n,e,null),o=!0},p(l,[u]){l[4]?i&&(he(),R(i,1,1,()=>{i=null}),fe()):i?(i.p(l,u),u&16&&S(i,1)):(i=qn(l),i.c(),S(i,1),i.m(e,t)),l[0]==="post"&&!l[4]&&l[2]==="wod"&&l[3].plug?a?(a.p(l,u),u&29&&S(a,1)):(a=Bn(l),a.c(),S(a,1),a.m(e,r)):a&&(he(),R(a,1,1,()=>{a=null}),fe())},i(l){o||(S(i),S(a),S(n.$$.fragment,l),o=!0)},o(l){R(i),R(a),R(n.$$.fragment,l),o=!1},d(l){l&&f(e),i&&i.d(),a&&a.d(),W(n)}}}function Po(s,e,t){let r,n,o,i,a,l,u,c,h;H(s,Or,_=>t(0,l=_)),H(s,ut,_=>t(3,u=_)),H(s,os,_=>t(6,c=_)),H(s,ft,_=>t(4,h=_));const p=()=>o?[`You and ${u==null?void 0:u.name}`,"tied!"]:r?["You beat",`${u==null?void 0:u.name}!`]:[`${u==null?void 0:u.name}`,"beat you!"],m=()=>o?[`you and ${u==null?void 0:u.name}`,"are tied"]:r?["you are ahead",`of ${u==null?void 0:u.name}`]:[`${u==null?void 0:u.name} is`,"in the lead"];return s.$$.update=()=>{s.$$.dirty&64&&(r=c.user>c.wod),s.$$.dirty&64&&t(5,n=c.user<c.wod),s.$$.dirty&64&&(o=c.user===c.wod),s.$$.dirty&32&&t(2,i=n?"wod":"user"),s.$$.dirty&1&&t(1,a=l==="post"?p():m())},[l,a,i,u,h,n,c]}class Co extends X{constructor(e){super(),Q(this,e,Po,Ao,Y,{})}}async function No(s){const e=`https://pudding.cool/projects/word-game-data/wod-info/${s}.csv?version=${Date.now()}`;return await Ut(e)}function Do(s){let e,t,r,n,o;return t=new ae({props:{text:"welcome to",max:"10",className:"combo-user"}}),n=new ae({props:{text:s[0],max:"1",className:"combo-user"}}),{c(){e=v("h2"),z(t.$$.fragment),r=U(),z(n.$$.fragment),this.h()},l(i){e=w(i,"H2",{id:!0,class:!0});var a=E(e);F(t.$$.fragment,a),r=M(a),F(n.$$.fragment,a),a.forEach(f),this.h()},h(){g(e,"id","chunk-title"),g(e,"class","svelte-s6dwex")},m(i,a){C(i,e,a),V(t,e,null),d(e,r),V(n,e,null),o=!0},p(i,[a]){const l={};a&1&&(l.text=i[0]),n.$set(l)},i(i){o||(S(t.$$.fragment,i),S(n.$$.fragment,i),o=!0)},o(i){R(t.$$.fragment,i),R(n.$$.fragment,i),o=!1},d(i){i&&f(e),W(t),W(n)}}}function Uo(s,e,t){let{text:r}=e;return s.$$set=n=>{"text"in n&&t(0,r=n.text)},[r]}class Mo extends X{constructor(e){super(),Q(this,e,Uo,Do,Y,{text:0})}}function Lo(s){let e,t,r;return t=new ae({props:{text:s[0],max:"13",className:"combo-default"}}),{c(){e=v("p"),z(t.$$.fragment),this.h()},l(n){e=w(n,"P",{id:!0,class:!0});var o=E(e);F(t.$$.fragment,o),o.forEach(f),this.h()},h(){g(e,"id","chunk-description"),g(e,"class","svelte-cnnzop")},m(n,o){C(n,e,o),V(t,e,null),r=!0},p(n,[o]){const i={};o&1&&(i.text=n[0]),t.$set(i)},i(n){r||(S(t.$$.fragment,n),r=!0)},o(n){R(t.$$.fragment,n),r=!1},d(n){n&&f(e),W(t)}}}function qo(s,e,t){let{text:r}=e;return s.$$set=n=>{"text"in n&&t(0,r=n.text)},[r]}class Bo extends X{constructor(e){super(),Q(this,e,qo,Lo,Y,{text:0})}}function xo(s){let e,t,r;return t=new ae({props:{text:Wo,max:"12",className:"combo-wod-light"}}),{c(){e=v("span"),z(t.$$.fragment),this.h()},l(n){e=w(n,"SPAN",{class:!0});var o=E(e);F(t.$$.fragment,o),o.forEach(f),this.h()},h(){g(e,"class","loading svelte-1h76qjd")},m(n,o){C(n,e,o),V(t,e,null),r=!0},p:K,i(n){r||(S(t.$$.fragment,n),r=!0)},o(n){R(t.$$.fragment,n),r=!1},d(n){n&&f(e),W(t)}}}function Ho(s){let e,t,r,n;const o=[zo,Go],i=[];function a(l,u){return l[3]?0:1}return e=a(s),t=i[e]=o[e](s),{c(){t.c(),r=se()},l(l){t.l(l),r=se()},m(l,u){i[e].m(l,u),C(l,r,u),n=!0},p(l,u){let c=e;e=a(l),e===c?i[e].p(l,u):(he(),R(i[c],1,1,()=>{i[c]=null}),fe(),t=i[e],t?t.p(l,u):(t=i[e]=o[e](l),t.c()),S(t,1),t.m(r.parentNode,r))},i(l){n||(S(t),n=!0)},o(l){R(t),n=!1},d(l){i[e].d(l),l&&f(r)}}}function Go(s){let e,t,r;return t=new ae({props:{text:Vo,max:"12",className:"combo-wod-light"}}),{c(){e=v("span"),z(t.$$.fragment),this.h()},l(n){e=w(n,"SPAN",{class:!0});var o=E(e);F(t.$$.fragment,o),o.forEach(f),this.h()},h(){g(e,"class","no-game svelte-1h76qjd")},m(n,o){C(n,e,o),V(t,e,null),r=!0},p:K,i(n){r||(S(t.$$.fragment,n),r=!0)},o(n){R(t.$$.fragment,n),r=!1},d(n){n&&f(e),W(t)}}}function zo(s){var P,j,I;let e,t,r,n,o,i,a,l,u,c,h,p,m,_,b,y,O;return e=new ae({props:{text:"today that",className:"combo-wod-light a"}}),r=new ae({props:{text:"person is",className:"combo-wod-light b"}}),o=new ae({props:{max:"12",text:(P=s[1])==null?void 0:P.name,className:"combo-wod c big"}}),a=new ae({props:{text:"from",className:"combo-wod-light d"}}),u=new ae({props:{max:"12",text:((j=s[1])==null?void 0:j.location)+".",className:"combo-wod-light e"}}),p=new ae({props:{text:((I=s[1])==null?void 0:I.bio)+".",max:"12",className:"combo-wod-light f"}}),_=new ae({props:{text:"can you",className:"combo-wod-light g"}}),y=new ae({props:{text:`beat ${s[2]}?`,className:"combo-wod-light h"}}),{c(){z(e.$$.fragment),t=U(),z(r.$$.fragment),n=U(),z(o.$$.fragment),i=U(),z(a.$$.fragment),l=U(),z(u.$$.fragment),c=U(),h=v("span"),z(p.$$.fragment),m=U(),z(_.$$.fragment),b=U(),z(y.$$.fragment),this.h()},l(k){F(e.$$.fragment,k),t=M(k),F(r.$$.fragment,k),n=M(k),F(o.$$.fragment,k),i=M(k),F(a.$$.fragment,k),l=M(k),F(u.$$.fragment,k),c=M(k),h=w(k,"SPAN",{class:!0});var N=E(h);F(p.$$.fragment,N),N.forEach(f),m=M(k),F(_.$$.fragment,k),b=M(k),F(y.$$.fragment,k),this.h()},h(){g(h,"class","bio svelte-1h76qjd")},m(k,N){V(e,k,N),C(k,t,N),V(r,k,N),C(k,n,N),V(o,k,N),C(k,i,N),V(a,k,N),C(k,l,N),V(u,k,N),C(k,c,N),C(k,h,N),V(p,h,null),C(k,m,N),V(_,k,N),C(k,b,N),V(y,k,N),O=!0},p(k,N){var $,G,A;const D={};N&2&&(D.text=($=k[1])==null?void 0:$.name),o.$set(D);const J={};N&2&&(J.text=((G=k[1])==null?void 0:G.location)+"."),u.$set(J);const L={};N&2&&(L.text=((A=k[1])==null?void 0:A.bio)+"."),p.$set(L);const Z={};N&4&&(Z.text=`beat ${k[2]}?`),y.$set(Z)},i(k){O||(S(e.$$.fragment,k),S(r.$$.fragment,k),S(o.$$.fragment,k),S(a.$$.fragment,k),S(u.$$.fragment,k),S(p.$$.fragment,k),S(_.$$.fragment,k),S(y.$$.fragment,k),O=!0)},o(k){R(e.$$.fragment,k),R(r.$$.fragment,k),R(o.$$.fragment,k),R(a.$$.fragment,k),R(u.$$.fragment,k),R(p.$$.fragment,k),R(_.$$.fragment,k),R(y.$$.fragment,k),O=!1},d(k){W(e,k),k&&f(t),W(r,k),k&&f(n),W(o,k),k&&f(i),W(a,k),k&&f(l),W(u,k),k&&f(c),k&&f(h),W(p),k&&f(m),W(_,k),k&&f(b),W(y,k)}}}function Fo(s){let e,t,r,n;const o=[Ho,xo],i=[];function a(l,u){return l[0]?0:1}return t=a(s),r=i[t]=o[t](s),{c(){e=v("p"),r.c(),this.h()},l(l){e=w(l,"P",{id:!0,class:!0});var u=E(e);r.l(u),u.forEach(f),this.h()},h(){g(e,"id","chunk-info"),g(e,"class","svelte-1h76qjd")},m(l,u){C(l,e,u),i[t].m(e,null),n=!0},p(l,[u]){let c=t;t=a(l),t===c?i[t].p(l,u):(he(),R(i[c],1,1,()=>{i[c]=null}),fe(),r=i[t],r?r.p(l,u):(r=i[t]=o[t](l),r.c()),S(r,1),r.m(e,null))},i(l){n||(S(r),n=!0)},o(l){R(r),n=!1},d(l){l&&f(e),i[t].d()}}}const Vo="there is no active game right now. launching sep. 23!",Wo="loading today's game...";function Jo(s,e,t){let r,n,o;H(s,ut,a=>t(1,n=a)),H(s,lt,a=>t(3,o=a));let{loaded:i}=e;return s.$$set=a=>{"loaded"in a&&t(0,i=a.loaded)},s.$$.update=()=>{s.$$.dirty&2&&t(2,r=n?n.pronoun.split("/")[1]:void 0)},[i,n,r,o]}class Ko extends X{constructor(e){super(),Q(this,e,Jo,Fo,Y,{loaded:0})}}function Yo(s){let e,t,r,n,o,i,a,l,u,c,h,p,m,_,b,y,O,P,j,I,k,N,D,J,L,Z,$,G;return t=new Mo({props:{text:s[2]}}),o=new Bo({props:{text:s[3]}}),a=new Ko({props:{loaded:s[0]}}),{c(){e=v("div"),z(t.$$.fragment),r=U(),n=v("div"),z(o.$$.fragment),i=U(),z(a.$$.fragment),l=U(),u=v("div"),c=v("div"),h=v("button"),p=B("play"),_=U(),b=v("div"),y=v("div"),O=v("button"),P=B("rules"),j=U(),I=v("div"),k=v("p"),N=B("want to be the next stranger?"),D=U(),J=v("a"),L=B("sign up"),this.h()},l(A){e=w(A,"DIV",{class:!0});var T=E(e);F(t.$$.fragment,T),r=M(T),n=w(T,"DIV",{class:!0});var q=E(n);F(o.$$.fragment,q),i=M(q),F(a.$$.fragment,q),q.forEach(f),l=M(T),u=w(T,"DIV",{class:!0});var ee=E(u);c=w(ee,"DIV",{class:!0});var pe=E(c);h=w(pe,"BUTTON",{class:!0});var ve=E(h);p=x(ve,"play"),ve.forEach(f),pe.forEach(f),_=M(ee),b=w(ee,"DIV",{class:!0});var le=E(b);y=w(le,"DIV",{class:!0});var Ge=E(y);O=w(Ge,"BUTTON",{class:!0});var ze=E(O);P=x(ze,"rules"),ze.forEach(f),Ge.forEach(f),j=M(le),I=w(le,"DIV",{class:!0});var ke=E(I);k=w(ke,"P",{class:!0});var Fe=E(k);N=x(Fe,"want to be the next stranger?"),Fe.forEach(f),D=M(ke),J=w(ke,"A",{role:!0,href:!0,target:!0,class:!0});var Ve=E(J);L=x(Ve,"sign up"),Ve.forEach(f),ke.forEach(f),le.forEach(f),ee.forEach(f),T.forEach(f),this.h()},h(){g(n,"class","details svelte-1s82arw"),h.disabled=m=!s[0],g(h,"class","svelte-1s82arw"),g(c,"class","play svelte-1s82arw"),g(O,"class","svelte-1s82arw"),g(y,"class","rules"),g(k,"class","svelte-1s82arw"),g(J,"role","button"),g(J,"href","https://www.getrevue.co/profile/wordsagainststrangers/"),g(J,"target","_blank"),g(J,"class","svelte-1s82arw"),g(I,"class","signup svelte-1s82arw"),g(b,"class","other svelte-1s82arw"),g(u,"class","cta svelte-1s82arw"),g(e,"class","wrapper svelte-1s82arw")},m(A,T){C(A,e,T),V(t,e,null),d(e,r),d(e,n),V(o,n,null),d(n,i),V(a,n,null),d(e,l),d(e,u),d(u,c),d(c,h),d(h,p),d(u,_),d(u,b),d(b,y),d(y,O),d(O,P),d(b,j),d(b,I),d(I,k),d(k,N),d(I,D),d(I,J),d(J,L),Z=!0,$||(G=[oe(h,"click",s[6]),oe(O,"click",s[7])],$=!0)},p(A,[T]){const q={};T&1&&(q.loaded=A[0]),a.$set(q),(!Z||T&1&&m!==(m=!A[0]))&&(h.disabled=m)},i(A){Z||(S(t.$$.fragment,A),S(o.$$.fragment,A),S(a.$$.fragment,A),Z=!0)},o(A){R(t.$$.fragment,A),R(o.$$.fragment,A),R(a.$$.fragment,A),Z=!1},d(A){A&&f(e),W(t),W(o),W(a),$=!1,Pe(G)}}}function Xo(s,e,t){let r,n,o;H(s,lt,m=>t(5,r=m)),H(s,ut,m=>t(8,n=m)),H(s,Ae,m=>t(1,o=m));let{loaded:i}=e;const{title:a,description:l}=ns("copy"),u=ht(),c=async()=>{const[m]=await No(r);_e(ut,n=m,n)},h=()=>u("play"),p=()=>{_e(Ae,o="rules",o)};return s.$$set=m=>{"loaded"in m&&t(0,i=m.loaded)},s.$$.update=()=>{s.$$.dirty&32&&r&&c()},[i,o,a,l,u,r,h,p]}class Qo extends X{constructor(e){super(),Q(this,e,Xo,Yo,Y,{loaded:0})}}const Zo="1.35.4",ps={"X-Client-Info":`supabase-js/${Zo}`},ea="supabase.auth.token";function ta(s){return s.replace(/\/$/,"")}const ra=()=>typeof window<"u",na="1.22.20",sa="http://localhost:9999",ia={"X-Client-Info":`gotrue-js/${na}`},It=10,Le={ERROR_MESSAGE:"Request Failed",MAX_RETRIES:10,RETRY_INTERVAL:2},gt="supabase.auth.token",oa={name:"sb",lifetime:60*60*8,domain:"",path:"/",sameSite:"lax"};var Tt=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(c){try{u(r.next(c))}catch(h){i(h)}}function l(c){try{u(r.throw(c))}catch(h){i(h)}}function u(c){c.done?o(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};const aa=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),la=(s,e)=>{if(!(s!=null&&s.status))return e({message:Le.ERROR_MESSAGE});if(typeof s.json!="function")return e(s);s.json().then(t=>e({message:aa(t),status:(s==null?void 0:s.status)||500}))},ua=(s,e,t)=>{const r={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"||(r.headers=Object.assign({"Content-Type":"text/plain;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(t)),r};function Mt(s,e,t,r,n){return Tt(this,void 0,void 0,function*(){return new Promise((o,i)=>{s(t,ua(e,r,n)).then(a=>{if(!a.ok)throw a;return r!=null&&r.noResolveJson?o:a.json()}).then(a=>o(a)).catch(a=>la(a,i))})})}function mr(s,e,t){return Tt(this,void 0,void 0,function*(){return Mt(s,"GET",e,t)})}function de(s,e,t,r){return Tt(this,void 0,void 0,function*(){return Mt(s,"POST",e,r,t)})}function xn(s,e,t,r){return Tt(this,void 0,void 0,function*(){return Mt(s,"PUT",e,r,t)})}function ca(s,e,t,r){return Tt(this,void 0,void 0,function*(){return Mt(s,"DELETE",e,r,t)})}function ha(s,e,t){const r=t||{},n=encodeURIComponent,o=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;if(typeof n!="function")throw new TypeError("option encode is invalid");if(!o.test(s))throw new TypeError("argument name is invalid");const i=n(e);if(i&&!o.test(i))throw new TypeError("argument val is invalid");let a=s+"="+i;if(r.maxAge!=null){const l=r.maxAge-0;if(isNaN(l)||!isFinite(l))throw new TypeError("option maxAge is invalid");a+="; Max-Age="+Math.floor(l)}if(r.domain){if(!o.test(r.domain))throw new TypeError("option domain is invalid");a+="; Domain="+r.domain}if(r.path){if(!o.test(r.path))throw new TypeError("option path is invalid");a+="; Path="+r.path}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");a+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return a}function fa(s){if(!s||!s.headers||!s.headers.host)throw new Error('The "host" request header is not available');const e=s.headers.host.indexOf(":")>-1&&s.headers.host.split(":")[0]||s.headers.host;return!(["localhost","127.0.0.1"].indexOf(e)>-1||e.endsWith(".local"))}function da(s,e){var t,r,n;return ha(s.name,s.value,{maxAge:s.maxAge,expires:new Date(Date.now()+s.maxAge*1e3),httpOnly:!0,secure:e,path:(t=s.path)!==null&&t!==void 0?t:"/",domain:(r=s.domain)!==null&&r!==void 0?r:"",sameSite:(n=s.sameSite)!==null&&n!==void 0?n:"lax"})}function br(s,e,t){const r=t.map(o=>da(o,fa(s))),n=e.getHeader("Set-Cookie");return n&&(n instanceof Array?Array.prototype.push.apply(r,n):typeof n=="string"&&r.push(n)),r}function Rt(s,e,t){e.setHeader("Set-Cookie",br(s,e,t))}var Lt=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(c){try{u(r.next(c))}catch(h){i(h)}}function l(c){try{u(r.throw(c))}catch(h){i(h)}}function u(c){c.done?o(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};function je(s){return Math.round(Date.now()/1e3)+s}function ma(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}const Se=()=>typeof window<"u";function Ie(s,e){var t;e||(e=((t=window==null?void 0:window.location)===null||t===void 0?void 0:t.href)||""),s=s.replace(/[\[\]]/g,"\\$&");const r=new RegExp("[?&#]"+s+"(=([^&#]*)|&|#|$)"),n=r.exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}const pa=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Lt(void 0,void 0,void 0,function*(){return yield(yield Dt(()=>import("./browser-ponyfill-e576e335.js").then(r=>r.b),[])).fetch(...t)}):e=fetch,(...t)=>e(...t)},ga=(s,e,t)=>Lt(void 0,void 0,void 0,function*(){Se()&&(yield s==null?void 0:s.setItem(e,JSON.stringify(t)))}),_a=(s,e)=>Lt(void 0,void 0,void 0,function*(){const t=Se()&&(yield s==null?void 0:s.getItem(e));if(!t)return null;try{return JSON.parse(t)}catch{return t}}),va=(s,e)=>{const t=Se()&&(s==null?void 0:s.getItem(e));if(!t||typeof t!="string")return null;try{return JSON.parse(t)}catch{return t}},wa=(s,e)=>Lt(void 0,void 0,void 0,function*(){Se()&&(yield s==null?void 0:s.removeItem(e))});var ie=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(c){try{u(r.next(c))}catch(h){i(h)}}function l(c){try{u(r.throw(c))}catch(h){i(h)}}function u(c){c.done?o(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};class ba{constructor({url:e="",headers:t={},cookieOptions:r,fetch:n}){this.url=e,this.headers=t,this.cookieOptions=Object.assign(Object.assign({},oa),r),this.fetch=pa(n)}_createRequestHeaders(e){const t=Object.assign({},this.headers);return t.Authorization=`Bearer ${e}`,t}cookieName(){var e;return(e=this.cookieOptions.name)!==null&&e!==void 0?e:""}getUrlForProvider(e,t){const r=[`provider=${encodeURIComponent(e)}`];if(t!=null&&t.redirectTo&&r.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t!=null&&t.scopes&&r.push(`scopes=${encodeURIComponent(t.scopes)}`),t!=null&&t.queryParams){const n=new URLSearchParams(t.queryParams);r.push(`${n}`)}return`${this.url}/authorize?${r.join("&")}`}signUpWithEmail(e,t,r={}){return ie(this,void 0,void 0,function*(){try{const n=Object.assign({},this.headers);let o="";r.redirectTo&&(o="?redirect_to="+encodeURIComponent(r.redirectTo));const i=yield de(this.fetch,`${this.url}/signup${o}`,{email:e,password:t,data:r.data,gotrue_meta_security:{captcha_token:r.captchaToken}},{headers:n}),a=Object.assign({},i);return a.expires_in&&(a.expires_at=je(i.expires_in)),{data:a,error:null}}catch(n){return{data:null,error:n}}})}signInWithEmail(e,t,r={}){return ie(this,void 0,void 0,function*(){try{const n=Object.assign({},this.headers);let o="?grant_type=password";r.redirectTo&&(o+="&redirect_to="+encodeURIComponent(r.redirectTo));const i=yield de(this.fetch,`${this.url}/token${o}`,{email:e,password:t},{headers:n}),a=Object.assign({},i);return a.expires_in&&(a.expires_at=je(i.expires_in)),{data:a,error:null}}catch(n){return{data:null,error:n}}})}signUpWithPhone(e,t,r={}){return ie(this,void 0,void 0,function*(){try{const n=Object.assign({},this.headers),o=yield de(this.fetch,`${this.url}/signup`,{phone:e,password:t,data:r.data,gotrue_meta_security:{captcha_token:r.captchaToken}},{headers:n}),i=Object.assign({},o);return i.expires_in&&(i.expires_at=je(o.expires_in)),{data:i,error:null}}catch(n){return{data:null,error:n}}})}signInWithPhone(e,t){return ie(this,void 0,void 0,function*(){try{const r=Object.assign({},this.headers),n="?grant_type=password",o=yield de(this.fetch,`${this.url}/token${n}`,{phone:e,password:t},{headers:r}),i=Object.assign({},o);return i.expires_in&&(i.expires_at=je(o.expires_in)),{data:i,error:null}}catch(r){return{data:null,error:r}}})}signInWithOpenIDConnect({id_token:e,nonce:t,client_id:r,issuer:n,provider:o}){return ie(this,void 0,void 0,function*(){try{const i=Object.assign({},this.headers),a="?grant_type=id_token",l=yield de(this.fetch,`${this.url}/token${a}`,{id_token:e,nonce:t,client_id:r,issuer:n,provider:o},{headers:i}),u=Object.assign({},l);return u.expires_in&&(u.expires_at=je(l.expires_in)),{data:u,error:null}}catch(i){return{data:null,error:i}}})}sendMagicLinkEmail(e,t={}){var r;return ie(this,void 0,void 0,function*(){try{const n=Object.assign({},this.headers);let o="";t.redirectTo&&(o+="?redirect_to="+encodeURIComponent(t.redirectTo));const i=(r=t.shouldCreateUser)!==null&&r!==void 0?r:!0;return{data:yield de(this.fetch,`${this.url}/otp${o}`,{email:e,create_user:i,gotrue_meta_security:{captcha_token:t.captchaToken}},{headers:n}),error:null}}catch(n){return{data:null,error:n}}})}sendMobileOTP(e,t={}){var r;return ie(this,void 0,void 0,function*(){try{const n=(r=t.shouldCreateUser)!==null&&r!==void 0?r:!0,o=Object.assign({},this.headers);return{data:yield de(this.fetch,`${this.url}/otp`,{phone:e,create_user:n,gotrue_meta_security:{captcha_token:t.captchaToken}},{headers:o}),error:null}}catch(n){return{data:null,error:n}}})}signOut(e){return ie(this,void 0,void 0,function*(){try{return yield de(this.fetch,`${this.url}/logout`,{},{headers:this._createRequestHeaders(e),noResolveJson:!0}),{error:null}}catch(t){return{error:t}}})}verifyMobileOTP(e,t,r={}){return ie(this,void 0,void 0,function*(){try{const n=Object.assign({},this.headers),o=yield de(this.fetch,`${this.url}/verify`,{phone:e,token:t,type:"sms",redirect_to:r.redirectTo},{headers:n}),i=Object.assign({},o);return i.expires_in&&(i.expires_at=je(o.expires_in)),{data:i,error:null}}catch(n){return{data:null,error:n}}})}verifyOTP({email:e,phone:t,token:r,type:n="sms"},o={}){return ie(this,void 0,void 0,function*(){try{const i=Object.assign({},this.headers),a=yield de(this.fetch,`${this.url}/verify`,{email:e,phone:t,token:r,type:n,redirect_to:o.redirectTo},{headers:i}),l=Object.assign({},a);return l.expires_in&&(l.expires_at=je(a.expires_in)),{data:l,error:null}}catch(i){return{data:null,error:i}}})}inviteUserByEmail(e,t={}){return ie(this,void 0,void 0,function*(){try{const r=Object.assign({},this.headers);let n="";return t.redirectTo&&(n+="?redirect_to="+encodeURIComponent(t.redirectTo)),{data:yield de(this.fetch,`${this.url}/invite${n}`,{email:e,data:t.data},{headers:r}),error:null}}catch(r){return{data:null,error:r}}})}resetPasswordForEmail(e,t={}){return ie(this,void 0,void 0,function*(){try{const r=Object.assign({},this.headers);let n="";return t.redirectTo&&(n+="?redirect_to="+encodeURIComponent(t.redirectTo)),{data:yield de(this.fetch,`${this.url}/recover${n}`,{email:e,gotrue_meta_security:{captcha_token:t.captchaToken}},{headers:r}),error:null}}catch(r){return{data:null,error:r}}})}refreshAccessToken(e){return ie(this,void 0,void 0,function*(){try{const t=yield de(this.fetch,`${this.url}/token?grant_type=refresh_token`,{refresh_token:e},{headers:this.headers}),r=Object.assign({},t);return r.expires_in&&(r.expires_at=je(t.expires_in)),{data:r,error:null}}catch(t){return{data:null,error:t}}})}setAuthCookie(e,t){e.method!=="POST"&&(t.setHeader("Allow","POST"),t.status(405).end("Method Not Allowed"));const{event:r,session:n}=e.body;if(!r)throw new Error("Auth event missing!");if(r==="SIGNED_IN"){if(!n)throw new Error("Auth session missing!");Rt(e,t,[{key:"access-token",value:n.access_token},{key:"refresh-token",value:n.refresh_token}].map(o=>{var i;return{name:`${this.cookieName()}-${o.key}`,value:o.value,domain:this.cookieOptions.domain,maxAge:(i=this.cookieOptions.lifetime)!==null&&i!==void 0?i:0,path:this.cookieOptions.path,sameSite:this.cookieOptions.sameSite}}))}r==="SIGNED_OUT"&&Rt(e,t,["access-token","refresh-token"].map(o=>({name:`${this.cookieName()}-${o}`,value:"",maxAge:-1}))),t.status(200).json({})}deleteAuthCookie(e,t,{redirectTo:r="/"}){return Rt(e,t,["access-token","refresh-token"].map(n=>({name:`${this.cookieName()}-${n}`,value:"",maxAge:-1}))),t.redirect(307,r)}getAuthCookieString(e,t){e.method!=="POST"&&(t.setHeader("Allow","POST"),t.status(405).end("Method Not Allowed"));const{event:r,session:n}=e.body;if(!r)throw new Error("Auth event missing!");if(r==="SIGNED_IN"){if(!n)throw new Error("Auth session missing!");return br(e,t,[{key:"access-token",value:n.access_token},{key:"refresh-token",value:n.refresh_token}].map(o=>{var i;return{name:`${this.cookieName()}-${o.key}`,value:o.value,domain:this.cookieOptions.domain,maxAge:(i=this.cookieOptions.lifetime)!==null&&i!==void 0?i:0,path:this.cookieOptions.path,sameSite:this.cookieOptions.sameSite}}))}return r==="SIGNED_OUT"?br(e,t,["access-token","refresh-token"].map(o=>({name:`${this.cookieName()}-${o}`,value:"",maxAge:-1}))):t.getHeader("Set-Cookie")}generateLink(e,t,r={}){return ie(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,`${this.url}/admin/generate_link`,{type:e,email:t,password:r.password,data:r.data,redirect_to:r.redirectTo},{headers:this.headers}),error:null}}catch(n){return{data:null,error:n}}})}createUser(e){return ie(this,void 0,void 0,function*(){try{const t=yield de(this.fetch,`${this.url}/admin/users`,e,{headers:this.headers});return{user:t,data:t,error:null}}catch(t){return{user:null,data:null,error:t}}})}listUsers(){return ie(this,void 0,void 0,function*(){try{return{data:(yield mr(this.fetch,`${this.url}/admin/users`,{headers:this.headers})).users,error:null}}catch(e){return{data:null,error:e}}})}getUserById(e){return ie(this,void 0,void 0,function*(){try{return{data:yield mr(this.fetch,`${this.url}/admin/users/${e}`,{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}getUserByCookie(e,t){return ie(this,void 0,void 0,function*(){try{if(!e.cookies)throw new Error("Not able to parse cookies! When using Express make sure the cookie-parser middleware is in use!");const r=e.cookies[`${this.cookieName()}-access-token`],n=e.cookies[`${this.cookieName()}-refresh-token`];if(!r)throw new Error("No cookie found!");const{user:o,error:i}=yield this.getUser(r);if(i){if(!n)throw new Error("No refresh_token cookie found!");if(!t)throw new Error("You need to pass the res object to automatically refresh the session!");const{data:a,error:l}=yield this.refreshAccessToken(n);if(l)throw l;if(a)return Rt(e,t,[{key:"access-token",value:a.access_token},{key:"refresh-token",value:a.refresh_token}].map(u=>{var c;return{name:`${this.cookieName()}-${u.key}`,value:u.value,domain:this.cookieOptions.domain,maxAge:(c=this.cookieOptions.lifetime)!==null&&c!==void 0?c:0,path:this.cookieOptions.path,sameSite:this.cookieOptions.sameSite}})),{token:a.access_token,user:a.user,data:a.user,error:null}}return{token:r,user:o,data:o,error:null}}catch(r){return{token:null,user:null,data:null,error:r}}})}updateUserById(e,t){return ie(this,void 0,void 0,function*(){try{const r=yield xn(this.fetch,`${this.url}/admin/users/${e}`,t,{headers:this.headers});return{user:r,data:r,error:null}}catch(r){return{user:null,data:null,error:r}}})}deleteUser(e){return ie(this,void 0,void 0,function*(){try{const t=yield ca(this.fetch,`${this.url}/admin/users/${e}`,{},{headers:this.headers});return{user:t,data:t,error:null}}catch(t){return{user:null,data:null,error:t}}})}getUser(e){return ie(this,void 0,void 0,function*(){try{const t=yield mr(this.fetch,`${this.url}/user`,{headers:this._createRequestHeaders(e)});return{user:t,data:t,error:null}}catch(t){return{user:null,data:null,error:t}}})}updateUser(e,t){return ie(this,void 0,void 0,function*(){try{const r=yield xn(this.fetch,`${this.url}/user`,t,{headers:this._createRequestHeaders(e)});return{user:r,data:r,error:null}}catch(r){return{user:null,data:null,error:r}}})}}function ya(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var me=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(c){try{u(r.next(c))}catch(h){i(h)}}function l(c){try{u(r.throw(c))}catch(h){i(h)}}function u(c){c.done?o(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};ya();const ka={url:sa,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,multiTab:!0,headers:ia};class Ea{constructor(e){this.stateChangeEmitters=new Map,this.networkRetries=0;const t=Object.assign(Object.assign({},ka),e);this.currentUser=null,this.currentSession=null,this.autoRefreshToken=t.autoRefreshToken,this.persistSession=t.persistSession,this.multiTab=t.multiTab,this.localStorage=t.localStorage||globalThis.localStorage,this.api=new ba({url:t.url,headers:t.headers,cookieOptions:t.cookieOptions,fetch:t.fetch}),this._recoverSession(),this._recoverAndRefresh(),this._listenForMultiTabEvents(),this._handleVisibilityChange(),t.detectSessionInUrl&&Se()&&!!Ie("access_token")&&this.getSessionFromUrl({storeSession:!0}).then(({error:r})=>{if(r)throw new Error("Error getting session from URL.")})}signUp({email:e,password:t,phone:r},n={}){return me(this,void 0,void 0,function*(){try{this._removeSession();const{data:o,error:i}=r&&t?yield this.api.signUpWithPhone(r,t,{data:n.data,captchaToken:n.captchaToken}):yield this.api.signUpWithEmail(e,t,{redirectTo:n.redirectTo,data:n.data,captchaToken:n.captchaToken});if(i)throw i;if(!o)throw"An error occurred on sign up.";let a=null,l=null;return o.access_token&&(a=o,l=a.user,this._saveSession(a),this._notifyAllSubscribers("SIGNED_IN")),o.id&&(l=o),{user:l,session:a,error:null}}catch(o){return{user:null,session:null,error:o}}})}signIn({email:e,phone:t,password:r,refreshToken:n,provider:o,oidc:i},a={}){return me(this,void 0,void 0,function*(){try{if(this._removeSession(),e&&!r){const{error:l}=yield this.api.sendMagicLinkEmail(e,{redirectTo:a.redirectTo,shouldCreateUser:a.shouldCreateUser,captchaToken:a.captchaToken});return{user:null,session:null,error:l}}if(e&&r)return this._handleEmailSignIn(e,r,{redirectTo:a.redirectTo});if(t&&!r){const{error:l}=yield this.api.sendMobileOTP(t,{shouldCreateUser:a.shouldCreateUser,captchaToken:a.captchaToken});return{user:null,session:null,error:l}}if(t&&r)return this._handlePhoneSignIn(t,r);if(n){const{error:l}=yield this._callRefreshToken(n);if(l)throw l;return{user:this.currentUser,session:this.currentSession,error:null}}if(o)return this._handleProviderSignIn(o,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});if(i)return this._handleOpenIDConnectSignIn(i);throw new Error("You must provide either an email, phone number, a third-party provider or OpenID Connect.")}catch(l){return{user:null,session:null,error:l}}})}verifyOTP(e,t={}){return me(this,void 0,void 0,function*(){try{this._removeSession();const{data:r,error:n}=yield this.api.verifyOTP(e,t);if(n)throw n;if(!r)throw"An error occurred on token verification.";let o=null,i=null;return r.access_token&&(o=r,i=o.user,this._saveSession(o),this._notifyAllSubscribers("SIGNED_IN")),r.id&&(i=r),{user:i,session:o,error:null}}catch(r){return{user:null,session:null,error:r}}})}user(){return this.currentUser}session(){return this.currentSession}refreshSession(){var e;return me(this,void 0,void 0,function*(){try{if(!(!((e=this.currentSession)===null||e===void 0)&&e.access_token))throw new Error("Not logged in.");const{error:t}=yield this._callRefreshToken();if(t)throw t;return{data:this.currentSession,user:this.currentUser,error:null}}catch(t){return{data:null,user:null,error:t}}})}update(e){var t;return me(this,void 0,void 0,function*(){try{if(!(!((t=this.currentSession)===null||t===void 0)&&t.access_token))throw new Error("Not logged in.");const{user:r,error:n}=yield this.api.updateUser(this.currentSession.access_token,e);if(n)throw n;if(!r)throw Error("Invalid user data.");const o=Object.assign(Object.assign({},this.currentSession),{user:r});return this._saveSession(o),this._notifyAllSubscribers("USER_UPDATED"),{data:r,user:r,error:null}}catch(r){return{data:null,user:null,error:r}}})}setSession(e){return me(this,void 0,void 0,function*(){try{if(!e)throw new Error("No current session.");const{data:t,error:r}=yield this.api.refreshAccessToken(e);return r?{session:null,error:r}:(this._saveSession(t),this._notifyAllSubscribers("SIGNED_IN"),{session:t,error:null})}catch(t){return{error:t,session:null}}})}setAuth(e){return this.currentSession=Object.assign(Object.assign({},this.currentSession),{access_token:e,token_type:"bearer",user:this.user()}),this._notifyAllSubscribers("TOKEN_REFRESHED"),this.currentSession}getSessionFromUrl(e){return me(this,void 0,void 0,function*(){try{if(!Se())throw new Error("No browser detected.");const t=Ie("error_description");if(t)throw new Error(t);const r=Ie("provider_token"),n=Ie("access_token");if(!n)throw new Error("No access_token detected.");const o=Ie("expires_in");if(!o)throw new Error("No expires_in detected.");const i=Ie("refresh_token");if(!i)throw new Error("No refresh_token detected.");const a=Ie("token_type");if(!a)throw new Error("No token_type detected.");const u=Math.round(Date.now()/1e3)+parseInt(o),{user:c,error:h}=yield this.api.getUser(n);if(h)throw h;const p={provider_token:r,access_token:n,expires_in:parseInt(o),expires_at:u,refresh_token:i,token_type:a,user:c};if(e!=null&&e.storeSession){this._saveSession(p);const m=Ie("type");this._notifyAllSubscribers("SIGNED_IN"),m==="recovery"&&this._notifyAllSubscribers("PASSWORD_RECOVERY")}return window.location.hash="",{data:p,error:null}}catch(t){return{data:null,error:t}}})}signOut(){var e;return me(this,void 0,void 0,function*(){const t=(e=this.currentSession)===null||e===void 0?void 0:e.access_token;if(this._removeSession(),this._notifyAllSubscribers("SIGNED_OUT"),t){const{error:r}=yield this.api.signOut(t);if(r)return{error:r}}return{error:null}})}onAuthStateChange(e){try{const t=ma(),r={id:t,callback:e,unsubscribe:()=>{this.stateChangeEmitters.delete(t)}};return this.stateChangeEmitters.set(t,r),{data:r,error:null}}catch(t){return{data:null,error:t}}}_handleEmailSignIn(e,t,r={}){var n,o;return me(this,void 0,void 0,function*(){try{const{data:i,error:a}=yield this.api.signInWithEmail(e,t,{redirectTo:r.redirectTo});return a||!i?{data:null,user:null,session:null,error:a}:((((n=i==null?void 0:i.user)===null||n===void 0?void 0:n.confirmed_at)||((o=i==null?void 0:i.user)===null||o===void 0?void 0:o.email_confirmed_at))&&(this._saveSession(i),this._notifyAllSubscribers("SIGNED_IN")),{data:i,user:i.user,session:i,error:null})}catch(i){return{data:null,user:null,session:null,error:i}}})}_handlePhoneSignIn(e,t){var r;return me(this,void 0,void 0,function*(){try{const{data:n,error:o}=yield this.api.signInWithPhone(e,t);return o||!n?{data:null,user:null,session:null,error:o}:(!((r=n==null?void 0:n.user)===null||r===void 0)&&r.phone_confirmed_at&&(this._saveSession(n),this._notifyAllSubscribers("SIGNED_IN")),{data:n,user:n.user,session:n,error:null})}catch(n){return{data:null,user:null,session:null,error:n}}})}_handleProviderSignIn(e,t={}){const r=this.api.getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});try{return Se()&&(window.location.href=r),{provider:e,url:r,data:null,session:null,user:null,error:null}}catch(n){return r?{provider:e,url:r,data:null,session:null,user:null,error:null}:{data:null,user:null,session:null,error:n}}}_handleOpenIDConnectSignIn({id_token:e,nonce:t,client_id:r,issuer:n,provider:o}){return me(this,void 0,void 0,function*(){if(e&&t&&(r&&n||o))try{const{data:i,error:a}=yield this.api.signInWithOpenIDConnect({id_token:e,nonce:t,client_id:r,issuer:n,provider:o});return a||!i?{user:null,session:null,error:a}:(this._saveSession(i),this._notifyAllSubscribers("SIGNED_IN"),{user:i.user,session:i,error:null})}catch(i){return{user:null,session:null,error:i}}throw new Error("You must provide a OpenID Connect provider with your id token and nonce.")})}_recoverSession(){try{const e=va(this.localStorage,gt);if(!e)return null;const{currentSession:t,expiresAt:r}=e,n=Math.round(Date.now()/1e3);r>=n+It&&(t==null?void 0:t.user)&&(this._saveSession(t),this._notifyAllSubscribers("SIGNED_IN"))}catch(e){console.log("error",e)}}_recoverAndRefresh(){return me(this,void 0,void 0,function*(){try{const e=yield _a(this.localStorage,gt);if(!e)return null;const{currentSession:t,expiresAt:r}=e,n=Math.round(Date.now()/1e3);if(r<n+It)if(this.autoRefreshToken&&t.refresh_token){this.networkRetries++;const{error:o}=yield this._callRefreshToken(t.refresh_token);if(o){if(console.log(o.message),o.message===Le.ERROR_MESSAGE&&this.networkRetries<Le.MAX_RETRIES){this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),this.refreshTokenTimer=setTimeout(()=>this._recoverAndRefresh(),Math.pow(Le.RETRY_INTERVAL,this.networkRetries)*100);return}yield this._removeSession()}this.networkRetries=0}else this._removeSession();else t?(this._saveSession(t),this._notifyAllSubscribers("SIGNED_IN")):(console.log("Current session is missing data."),this._removeSession())}catch(e){return console.error(e),null}})}_callRefreshToken(e){var t;return e===void 0&&(e=(t=this.currentSession)===null||t===void 0?void 0:t.refresh_token),me(this,void 0,void 0,function*(){try{if(!e)throw new Error("No current session.");const{data:r,error:n}=yield this.api.refreshAccessToken(e);if(n)throw n;if(!r)throw Error("Invalid session data.");return this._saveSession(r),this._notifyAllSubscribers("TOKEN_REFRESHED"),this._notifyAllSubscribers("SIGNED_IN"),{data:r,error:null}}catch(r){return{data:null,error:r}}})}_notifyAllSubscribers(e){this.stateChangeEmitters.forEach(t=>t.callback(e,this.currentSession))}_saveSession(e){this.currentSession=e,this.currentUser=e.user;const t=e.expires_at;if(t){const r=Math.round(Date.now()/1e3),n=t-r,o=n>It?It:.5;this._startAutoRefreshToken((n-o)*1e3)}this.persistSession&&e.expires_at&&this._persistSession(this.currentSession)}_persistSession(e){const t={currentSession:e,expiresAt:e.expires_at};ga(this.localStorage,gt,t)}_removeSession(){return me(this,void 0,void 0,function*(){this.currentSession=null,this.currentUser=null,this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),wa(this.localStorage,gt)})}_startAutoRefreshToken(e){this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),!(e<=0||!this.autoRefreshToken)&&(this.refreshTokenTimer=setTimeout(()=>me(this,void 0,void 0,function*(){this.networkRetries++;const{error:t}=yield this._callRefreshToken();t||(this.networkRetries=0),(t==null?void 0:t.message)===Le.ERROR_MESSAGE&&this.networkRetries<Le.MAX_RETRIES&&this._startAutoRefreshToken(Math.pow(Le.RETRY_INTERVAL,this.networkRetries)*100)}),e),typeof this.refreshTokenTimer.unref=="function"&&this.refreshTokenTimer.unref())}_listenForMultiTabEvents(){if(!this.multiTab||!Se()||!(window!=null&&window.addEventListener))return!1;try{window==null||window.addEventListener("storage",e=>{var t;if(e.key===gt){const r=JSON.parse(String(e.newValue));!((t=r==null?void 0:r.currentSession)===null||t===void 0)&&t.access_token?(this._saveSession(r.currentSession),this._notifyAllSubscribers("SIGNED_IN")):(this._removeSession(),this._notifyAllSubscribers("SIGNED_OUT"))}})}catch(e){console.error("_listenForMultiTabEvents",e)}}_handleVisibilityChange(){if(!this.multiTab||!Se()||!(window!=null&&window.addEventListener))return!1;try{window==null||window.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this._recoverAndRefresh()})}catch(e){console.error("_handleVisibilityChange",e)}}}class Ta extends Ea{constructor(e){super(e)}}var Hn=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(c){try{u(r.next(c))}catch(h){i(h)}}function l(c){try{u(r.throw(c))}catch(h){i(h)}}function u(c){c.done?o(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};class Rr{constructor(e){Object.assign(this,e);let t;e.fetch?t=e.fetch:typeof fetch>"u"?t=(...r)=>Hn(this,void 0,void 0,function*(){return yield(yield Dt(()=>import("./browser-ponyfill-e576e335.js").then(n=>n.b),[])).fetch(...r)}):t=fetch,this.fetch=(...r)=>t(...r),this.shouldThrowOnError=e.shouldThrowOnError||!1,this.allowEmpty=e.allowEmpty||!1}throwOnError(e){return e==null&&(e=!0),this.shouldThrowOnError=e,this}then(e,t){typeof this.schema>"u"||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let r=this.fetch(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(n=>Hn(this,void 0,void 0,function*(){var o,i,a,l;let u=null,c=null,h=null,p=n.status,m=n.statusText;if(n.ok){const b=(o=this.headers.Prefer)===null||o===void 0?void 0:o.split(",").includes("return=minimal");if(this.method!=="HEAD"&&!b){const P=yield n.text();P&&(this.headers.Accept==="text/csv"?c=P:c=JSON.parse(P))}const y=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),O=(a=n.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");y&&O&&O.length>1&&(h=parseInt(O[1]))}else{const b=yield n.text();try{u=JSON.parse(b)}catch{u={message:b}}if(u&&this.allowEmpty&&((l=u==null?void 0:u.details)===null||l===void 0?void 0:l.includes("Results contain 0 rows"))&&(u=null,p=200,m="OK"),u&&this.shouldThrowOnError)throw u}return{error:u,data:c,count:h,status:p,statusText:m,body:c}}));return this.shouldThrowOnError||(r=r.catch(n=>({error:{message:`FetchError: ${n.message}`,details:"",hint:"",code:n.code||""},data:null,body:null,count:null,status:400,statusText:"Bad Request"}))),r.then(e,t)}}class $a extends Rr{select(e="*"){let t=!1;const r=e.split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this}order(e,{ascending:t=!0,nullsFirst:r=!1,foreignTable:n}={}){const o=typeof n>"u"?"order":`${n}.order`,i=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${i?`${i},`:""}${e}.${t?"asc":"desc"}.${r?"nullsfirst":"nullslast"}`),this}limit(e,{foreignTable:t}={}){const r=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:r}={}){const n=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.headers.Accept="application/vnd.pgrst.object+json",this.allowEmpty=!0,this}csv(){return this.headers.Accept="text/csv",this}}class st extends $a{constructor(){super(...arguments),this.cs=this.contains,this.cd=this.containedBy,this.sl=this.rangeLt,this.sr=this.rangeGt,this.nxl=this.rangeGte,this.nxr=this.rangeLte,this.adj=this.rangeAdjacent,this.ov=this.overlaps}not(e,t,r){return this.url.searchParams.append(`${e}`,`not.${t}.${r}`),this}or(e,{foreignTable:t}={}){const r=typeof t>"u"?"or":`${t}.or`;return this.url.searchParams.append(r,`(${e})`),this}eq(e,t){return this.url.searchParams.append(`${e}`,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(`${e}`,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(`${e}`,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(`${e}`,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(`${e}`,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(`${e}`,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(`${e}`,`like.${t}`),this}ilike(e,t){return this.url.searchParams.append(`${e}`,`ilike.${t}`),this}is(e,t){return this.url.searchParams.append(`${e}`,`is.${t}`),this}in(e,t){const r=t.map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(`${e}`,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(`${e}`,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(`${e}`,`cs.{${t.join(",")}}`):this.url.searchParams.append(`${e}`,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(`${e}`,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(`${e}`,`cd.{${t.join(",")}}`):this.url.searchParams.append(`${e}`,`cd.${JSON.stringify(t)}`),this}rangeLt(e,t){return this.url.searchParams.append(`${e}`,`sl.${t}`),this}rangeGt(e,t){return this.url.searchParams.append(`${e}`,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(`${e}`,`nxl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(`${e}`,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(`${e}`,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(`${e}`,`ov.${t}`):this.url.searchParams.append(`${e}`,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n=null}={}){let o="";n==="plain"?o="pl":n==="phrase"?o="ph":n==="websearch"&&(o="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(`${e}`,`${o}fts${i}.${t}`),this}fts(e,t,{config:r}={}){const n=typeof r>"u"?"":`(${r})`;return this.url.searchParams.append(`${e}`,`fts${n}.${t}`),this}plfts(e,t,{config:r}={}){const n=typeof r>"u"?"":`(${r})`;return this.url.searchParams.append(`${e}`,`plfts${n}.${t}`),this}phfts(e,t,{config:r}={}){const n=typeof r>"u"?"":`(${r})`;return this.url.searchParams.append(`${e}`,`phfts${n}.${t}`),this}wfts(e,t,{config:r}={}){const n=typeof r>"u"?"":`(${r})`;return this.url.searchParams.append(`${e}`,`wfts${n}.${t}`),this}filter(e,t,r){return this.url.searchParams.append(`${e}`,`${t}.${r}`),this}match(e){return Object.keys(e).forEach(t=>{this.url.searchParams.append(`${t}`,`eq.${e[t]}`)}),this}}class gs extends Rr{constructor(e,{headers:t={},schema:r,fetch:n,shouldThrowOnError:o}={}){super({fetch:n,shouldThrowOnError:o}),this.url=new URL(e),this.headers=Object.assign({},t),this.schema=r}select(e="*",{head:t=!1,count:r=null}={}){this.method="GET";let n=!1;const o=e.split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),t&&(this.method="HEAD"),new st(this)}insert(e,{upsert:t=!1,onConflict:r,returning:n="representation",count:o=null}={}){this.method="POST";const i=[`return=${n}`];if(t&&i.push("resolution=merge-duplicates"),t&&r!==void 0&&this.url.searchParams.set("on_conflict",r),this.body=e,o&&i.push(`count=${o}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),Array.isArray(e)){const a=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(a.length>0){const l=[...new Set(a)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new st(this)}upsert(e,{onConflict:t,returning:r="representation",count:n=null,ignoreDuplicates:o=!1}={}){this.method="POST";const i=[`resolution=${o?"ignore":"merge"}-duplicates`,`return=${r}`];return t!==void 0&&this.url.searchParams.set("on_conflict",t),this.body=e,n&&i.push(`count=${n}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new st(this)}update(e,{returning:t="representation",count:r=null}={}){this.method="PATCH";const n=[`return=${t}`];return this.body=e,r&&n.push(`count=${r}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new st(this)}delete({returning:e="representation",count:t=null}={}){this.method="DELETE";const r=[`return=${e}`];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new st(this)}}class Sa extends Rr{constructor(e,{headers:t={},schema:r,fetch:n,shouldThrowOnError:o}={}){super({fetch:n,shouldThrowOnError:o}),this.url=new URL(e),this.headers=Object.assign({},t),this.schema=r}rpc(e,{head:t=!1,count:r=null}={}){return t?(this.method="HEAD",e&&Object.entries(e).forEach(([n,o])=>{this.url.searchParams.append(n,o)})):(this.method="POST",this.body=e),r&&(this.headers.Prefer!==void 0?this.headers.Prefer+=`,count=${r}`:this.headers.Prefer=`count=${r}`),new st(this)}}const Oa="0.37.4",ja={"X-Client-Info":`postgrest-js/${Oa}`};class Ia{constructor(e,{headers:t={},schema:r,fetch:n,throwOnError:o}={}){this.url=e,this.headers=Object.assign(Object.assign({},ja),t),this.schema=r,this.fetch=n,this.shouldThrowOnError=o}auth(e){return this.headers.Authorization=`Bearer ${e}`,this}from(e){const t=`${this.url}/${e}`;return new gs(t,{headers:this.headers,schema:this.schema,fetch:this.fetch,shouldThrowOnError:this.shouldThrowOnError})}rpc(e,t,{head:r=!1,count:n=null}={}){const o=`${this.url}/rpc/${e}`;return new Sa(o,{headers:this.headers,schema:this.schema,fetch:this.fetch,shouldThrowOnError:this.shouldThrowOnError}).rpc(t,{head:r,count:n})}}var re;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(re||(re={}));const Gn=(s,e,t={})=>{var r;const n=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((o,i)=>(o[i]=Ra(i,s,e,n),o),{})},Ra=(s,e,t,r)=>{const n=e.find(a=>a.name===s),o=n==null?void 0:n.type,i=t[s];return o&&!r.includes(o)?_s(o,i):yr(i)},_s=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return Na(e,t)}switch(s){case re.bool:return Aa(e);case re.float4:case re.float8:case re.int2:case re.int4:case re.int8:case re.numeric:case re.oid:return Pa(e);case re.json:case re.jsonb:return Ca(e);case re.timestamp:return Da(e);case re.abstime:case re.date:case re.daterange:case re.int4range:case re.int8range:case re.money:case re.reltime:case re.text:case re.time:case re.timestamptz:case re.timetz:case re.tsrange:case re.tstzrange:return yr(e);default:return yr(e)}},yr=s=>s,Aa=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},Pa=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},Ca=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},Na=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,r=s[t];if(s[0]==="{"&&r==="}"){let o;const i=s.slice(1,t);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(a=>_s(e,a))}return s},Da=s=>typeof s=="string"?s.replace(" ","T"):s;var pr,zn;function Ua(){if(zn)return pr;zn=1;var s=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return pr=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return s()}try{return __global__||s()}finally{delete Object.prototype.__global__}}(),pr}const Ma="websocket",La="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",qa=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],Ba="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",xa=["I\xF1aki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],Ha="1.0.34",Ga={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},za="https://github.com/theturtle32/WebSocket-Node",Fa={node:">=4.0.0"},Va={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},Wa={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},Ja={verbose:!1},Ka={test:"tape test/unit/*.js",gulp:"gulp"},Ya="index",Xa={lib:"./lib"},Qa="lib/browser.js",Za="Apache-2.0",el={name:Ma,description:La,keywords:qa,author:Ba,contributors:xa,version:Ha,repository:Ga,homepage:za,engines:Fa,dependencies:Va,devDependencies:Wa,config:Ja,scripts:Ka,main:Ya,directories:Xa,browser:Qa,license:Za};var tl=el.version,qe;if(typeof globalThis=="object")qe=globalThis;else try{qe=Ua()}catch{}finally{if(!qe&&typeof window<"u"&&(qe=window),!qe)throw new Error("Could not determine global this")}var kt=qe.WebSocket||qe.MozWebSocket,rl=tl;function vs(s,e){var t;return e?t=new kt(s,e):t=new kt(s),t}kt&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(s){Object.defineProperty(vs,s,{get:function(){return kt[s]}})});var nl={w3cwebsocket:kt?vs:null,version:rl};const sl="1.7.3",il={"X-Client-Info":`realtime-js/${sl}`},ol="1.0.0",ws=1e4,al=1e3;var wt;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(wt||(wt={}));var ne;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(ne||(ne={}));var ce;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(ce||(ce={}));var kr;(function(s){s.websocket="websocket"})(kr||(kr={}));var Be;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(Be||(Be={}));class Ar{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class ll{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const n=t.getUint8(1),o=t.getUint8(2);let i=this.HEADER_LENGTH+2;const a=r.decode(e.slice(i,i+n));i=i+n;const l=r.decode(e.slice(i,i+o));i=i+o;const u=JSON.parse(r.decode(e.slice(i,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class ot{constructor(e,t,r={},n=ws){this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel instanceof Er?this.channel.on(this.refEvent,e):this.channel.on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel.trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){!this.refEvent||(this.channel instanceof Er?this.channel.off(this.refEvent):this.channel.off(this.refEvent,{}))}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}class Er{constructor(e,t={},r){this.topic=e,this.params=t,this.socket=r,this.bindings=[],this.state=ne.closed,this.joinedOnce=!1,this.pushBuffer=[],this.timeout=this.socket.timeout,this.joinPush=new ot(this,ce.join,this.params,this.timeout),this.rejoinTimer=new Ar(()=>this.rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ne.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this.onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=ne.closed,this.socket.remove(this)}),this.onError(n=>{this.isLeaving()||this.isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=ne.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{!this.isJoining()||(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ne.errored,this.rejoinTimer.scheduleTimeout())}),this.on(ce.reply,(n,o)=>{this.trigger(this.replyEventName(o),n)})}rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this.rejoin()}subscribe(e=this.timeout){if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";return this.joinedOnce=!0,this.rejoin(e),this.joinPush}onClose(e){this.on(ce.close,e)}onError(e){this.on(ce.error,t=>e(t))}on(e,t){this.bindings.push({event:e,callback:t})}off(e){this.bindings=this.bindings.filter(t=>t.event!==e)}canPush(){return this.socket.isConnected()&&this.isJoined()}push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new ot(this,e,t,r);return this.canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ne.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this.trigger(ce.close,"leave",this.joinRef())};this.joinPush.destroy();let r=new ot(this,ce.leave,{},e);return r.receive("ok",()=>t()).receive("timeout",()=>t()),r.send(),this.canPush()||r.trigger("ok",{}),r}onMessage(e,t,r){return t}isMember(e){return this.topic===e}joinRef(){return this.joinPush.ref}rejoin(e=this.timeout){this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=ne.joining,this.joinPush.resend(e))}trigger(e,t,r){let{close:n,error:o,leave:i,join:a}=ce;if(r&&[n,o,i,a].indexOf(e)>=0&&r!==this.joinRef())return;let u=this.onMessage(e,t,r);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";this.bindings.filter(c=>c.event==="*"?e===(t==null?void 0:t.type):c.event===e).map(c=>c.callback(u,r))}replyEventName(e){return`chan_reply_${e}`}isClosed(){return this.state===ne.closed}isErrored(){return this.state===ne.errored}isJoined(){return this.state===ne.joined}isJoining(){return this.state===ne.joining}isLeaving(){return this.state===ne.leaving}}class it{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel.on(r.state,{},n=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.joinRef=this.channel.joinRef(),this.state=it.syncState(this.state,n,o,i),this.pendingDiffs.forEach(l=>{this.state=it.syncDiff(this.state,l,o,i)}),this.pendingDiffs=[],a()}),this.channel.on(r.diff,{},n=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=it.syncDiff(this.state,n,o,i),a())})}static syncState(e,t,r,n){const o=this.cloneDeep(e),i=this.transformState(t),a={},l={};return this.map(o,(u,c)=>{i[u]||(l[u]=c)}),this.map(i,(u,c)=>{const h=o[u];if(h){const p=c.map(y=>y.presence_id),m=h.map(y=>y.presence_id),_=c.filter(y=>m.indexOf(y.presence_id)<0),b=h.filter(y=>p.indexOf(y.presence_id)<0);_.length>0&&(a[u]=_),b.length>0&&(l[u]=b)}else a[u]=c}),this.syncDiff(o,{joins:a,leaves:l},r,n)}static syncDiff(e,t,r,n){const{joins:o,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(o,(a,l)=>{const u=e[a];if(e[a]=this.cloneDeep(l),u){const c=e[a].map(p=>p.presence_id),h=u.filter(p=>c.indexOf(p.presence_id)<0);e[a].unshift(...h)}r(a,u,l)}),this.map(i,(a,l)=>{let u=e[a];if(!u)return;const c=l.map(h=>h.presence_id);u=u.filter(h=>c.indexOf(h.presence_id)<0),e[a]=u,n(a,u,l),u.length===0&&delete e[a]}),e}static list(e,t){return t||(t=(r,n)=>n),this.map(e,(r,n)=>t(r,n))}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const n=e[r];return"metas"in n?t[r]=n.metas.map(o=>(o.presence_id=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[r]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}list(e){return it.list(this.state,e)}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel.joinRef()}}class Nt{constructor(e,t={},r){this.topic=e,this.params=t,this.socket=r,this.bindings=[],this.state=ne.closed,this.joinedOnce=!1,this.pushBuffer=[],this.timeout=this.socket.timeout,this.joinPush=new ot(this,ce.join,this.params,this.timeout),this.rejoinTimer=new Ar(()=>this.rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ne.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this.onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=ne.closed,this.socket.remove(this)}),this.onError(n=>{this.isLeaving()||this.isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=ne.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{!this.isJoining()||(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ne.errored,this.rejoinTimer.scheduleTimeout())}),this.on(ce.reply,{},(n,o)=>{this.trigger(this.replyEventName(o),n)}),this.presence=new it(this)}list(){return this.presence.list()}rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this.rejoin()}subscribe(e=this.timeout){if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const t=this.bindings.reduce((r,n)=>{const{type:o}=n;return["phx_close","phx_error","phx_reply","presence_diff","presence_state"].includes(o)||(r[o]=n),r},{});return Object.keys(t).length&&this.updateJoinPayload({configs:t}),this.joinedOnce=!0,this.rejoin(e),this.joinPush}}onClose(e){this.on(ce.close,{},e)}onError(e){this.on(ce.error,{},t=>e(t))}on(e,t,r){this.bindings.push({type:e,filter:t!=null?t:{},callback:r!=null?r:()=>{}})}off(e,t){this.bindings=this.bindings.filter(r=>!(r.type===e&&Nt.isEqual(r.filter,t)))}canPush(){return this.socket.isConnected()&&this.isJoined()}push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new ot(this,e,t,r);return this.canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ne.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this.trigger(ce.close,"leave",this.joinRef())};this.joinPush.destroy();const r=new ot(this,ce.leave,{},e);return r.receive("ok",()=>t()).receive("timeout",()=>t()),r.send(),this.canPush()||r.trigger("ok",{}),r}onMessage(e,t,r){return t}isMember(e){return this.topic===e}joinRef(){return this.joinPush.ref}rejoin(e=this.timeout){this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=ne.joining,this.joinPush.resend(e))}trigger(e,t,r){const{close:n,error:o,leave:i,join:a}=ce;if(r&&[n,o,i,a].indexOf(e)>=0&&r!==this.joinRef())return;const u=this.onMessage(e,t,r);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";this.bindings.filter(c=>{var h,p;return(c==null?void 0:c.type)===e&&(((h=c==null?void 0:c.filter)===null||h===void 0?void 0:h.event)==="*"||((p=c==null?void 0:c.filter)===null||p===void 0?void 0:p.event)===(t==null?void 0:t.event))}).map(c=>c.callback(u,r))}send(e){const t=this.push(e.type,e);return new Promise(r=>{t.receive("ok",()=>r("ok")),t.receive("timeout",()=>r("timeout"))})}replyEventName(e){return`chan_reply_${e}`}isClosed(){return this.state===ne.closed}isErrored(){return this.state===ne.errored}isJoined(){return this.state===ne.joined}isJoining(){return this.state===ne.joining}isLeaving(){return this.state===ne.leaving}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}}var ul=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(c){try{u(r.next(c))}catch(h){i(h)}}function l(c){try{u(r.throw(c))}catch(h){i(h)}}function u(c){c.done?o(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})},cl=globalThis&&globalThis.__rest||function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(s);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(s,r[n])&&(t[r[n]]=s[r[n]]);return t};const hl=()=>{};class fl{constructor(e,t){this.accessToken=null,this.channels=[],this.endPoint="",this.headers=il,this.params={},this.timeout=ws,this.transport=nl.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.longpollerTimeout=2e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=hl,this.conn=null,this.sendBuffer=[],this.serializer=new ll,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.endPoint=`${e}/${kr.websocket}`,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.transport&&(this.transport=t.transport),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs),t!=null&&t.longpollerTimeout&&(this.longpollerTimeout=t.longpollerTimeout),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:r=>[1e3,2e3,5e3,1e4][r-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(r,n)=>n(JSON.stringify(r)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Ar(()=>ul(this,void 0,void 0,function*(){yield this.disconnect(),this.connect()}),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this.endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this.onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){return new Promise((r,n)=>{try{this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t||""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset()),r({error:null,data:!0})}catch(o){r({error:o,data:!1})}})}log(e,t,r){this.logger(e,t,r)}onOpen(e){this.stateChangeCallbacks.open.push(e)}onClose(e){this.stateChangeCallbacks.close.push(e)}onError(e){this.stateChangeCallbacks.error.push(e)}onMessage(e){this.stateChangeCallbacks.message.push(e)}connectionState(){switch(this.conn&&this.conn.readyState){case wt.connecting:return Be.Connecting;case wt.open:return Be.Open;case wt.closing:return Be.Closing;default:return Be.Closed}}isConnected(){return this.connectionState()===Be.Open}remove(e){this.channels=this.channels.filter(t=>t.joinRef()!==e.joinRef())}channel(e,t={}){var r;const{selfBroadcast:n}=t,o=cl(t,["selfBroadcast"]);n&&(o.self_broadcast=n);const i=!((r=this.params)===null||r===void 0)&&r.vsndate?new Nt(e,o,this):new Er(e,o,this);return i instanceof Nt&&(i.presence.onJoin((a,l,u)=>{i.trigger("presence",{event:"JOIN",key:a,currentPresences:l,newPresences:u})}),i.presence.onLeave((a,l,u)=>{i.trigger("presence",{event:"LEAVE",key:a,currentPresences:l,leftPresences:u})}),i.presence.onSync(()=>{i.trigger("presence",{event:"SYNC"})})),this.channels.push(i),i}push(e){const{topic:t,event:r,payload:n,ref:o}=e;let i=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${r} (${o})`,n),this.isConnected()?i():this.sendBuffer.push(i)}onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:n,payload:o,ref:i}=t;(i&&i===this.pendingHeartbeatRef||n===(o==null?void 0:o.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${n} ${i&&"("+i+")"||""}`,o),this.channels.filter(a=>a.isMember(r)).forEach(a=>a.trigger(n,o,i)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ol}))}makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({user_token:e}),t.joinedOnce&&t.isJoined()&&t.push(ce.access_token,{access_token:e})})}leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r.isJoined()||r.isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_onConnOpen(){this.log("transport",`connected to ${this.endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e.trigger(ce.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${r}${n}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(!!this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(al,"hearbeat timeout");return}this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class dl{constructor(e,t,r,n){const o={},i=n==="*"?`realtime:${r}`:`realtime:${r}:${n}`,a=t.Authorization.split(" ")[1];a&&(o.user_token=a),this.subscription=e.channel(i,o)}getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Gn(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Gn(e.columns,e.old_record)),t}on(e,t){return this.subscription.on(e,r=>{let n={schema:r.schema,table:r.table,commit_timestamp:r.commit_timestamp,eventType:r.type,new:{},old:{},errors:r.errors};n=Object.assign(Object.assign({},n),this.getPayloadRecords(r)),t(n)}),this}subscribe(e=()=>{}){return this.subscription.onError(t=>e("SUBSCRIPTION_ERROR",t)),this.subscription.onClose(()=>e("CLOSED")),this.subscription.subscribe().receive("ok",()=>e("SUBSCRIBED")).receive("error",t=>e("SUBSCRIPTION_ERROR",t)).receive("timeout",()=>e("RETRYING_AFTER_TIMEOUT")),this.subscription}}class ml extends gs{constructor(e,{headers:t={},schema:r,realtime:n,table:o,fetch:i,shouldThrowOnError:a}){super(e,{headers:t,schema:r,fetch:i,shouldThrowOnError:a}),this._subscription=null,this._realtime=n,this._headers=t,this._schema=r,this._table=o}on(e,t){return this._realtime.isConnected()||this._realtime.connect(),this._subscription||(this._subscription=new dl(this._realtime,this._headers,this._schema,this._table)),this._subscription.on(e,t)}}const pl="0.0.0",gl={"X-Client-Info":`storage-js/${pl}`};var $t=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(c){try{u(r.next(c))}catch(h){i(h)}}function l(c){try{u(r.throw(c))}catch(h){i(h)}}function u(c){c.done?o(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};const _l=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),vl=(s,e)=>{if(typeof s.json!="function")return e(s);s.json().then(t=>e({message:_l(t),status:(s==null?void 0:s.status)||500}))},wl=(s,e,t,r)=>{const n={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),t))};function qt(s,e,t,r,n,o){return $t(this,void 0,void 0,function*(){return new Promise((i,a)=>{s(t,wl(e,r,n,o)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?i(l):l.json()}).then(l=>i(l)).catch(l=>vl(l,a))})})}function Tr(s,e,t,r){return $t(this,void 0,void 0,function*(){return qt(s,"GET",e,t,r)})}function xe(s,e,t,r,n){return $t(this,void 0,void 0,function*(){return qt(s,"POST",e,r,n,t)})}function bl(s,e,t,r,n){return $t(this,void 0,void 0,function*(){return qt(s,"PUT",e,r,n,t)})}function bs(s,e,t,r,n){return $t(this,void 0,void 0,function*(){return qt(s,"DELETE",e,r,n,t)})}var yl=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(c){try{u(r.next(c))}catch(h){i(h)}}function l(c){try{u(r.throw(c))}catch(h){i(h)}}function u(c){c.done?o(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};const ys=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>yl(void 0,void 0,void 0,function*(){return yield(yield Dt(()=>import("./browser-ponyfill-e576e335.js").then(r=>r.b),[])).fetch(...t)}):e=fetch,(...t)=>e(...t)};var nt=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(c){try{u(r.next(c))}catch(h){i(h)}}function l(c){try{u(r.throw(c))}catch(h){i(h)}}function u(c){c.done?o(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};class kl{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},gl),t),this.fetch=ys(r)}listBuckets(){return nt(this,void 0,void 0,function*(){try{return{data:yield Tr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){return{data:null,error:e}}})}getBucket(e){return nt(this,void 0,void 0,function*(){try{return{data:yield Tr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}createBucket(e,t={public:!1}){return nt(this,void 0,void 0,function*(){try{return{data:(yield xe(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public},{headers:this.headers})).name,error:null}}catch(r){return{data:null,error:r}}})}updateBucket(e,t){return nt(this,void 0,void 0,function*(){try{return{data:yield bl(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public},{headers:this.headers}),error:null}}catch(r){return{data:null,error:r}}})}emptyBucket(e){return nt(this,void 0,void 0,function*(){try{return{data:yield xe(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}deleteBucket(e){return nt(this,void 0,void 0,function*(){try{return{data:yield bs(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}}var Te=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(c){try{u(r.next(c))}catch(h){i(h)}}function l(c){try{u(r.throw(c))}catch(h){i(h)}}function u(c){c.done?o(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};const El={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Tl={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class $l{constructor(e,t={},r,n){this.url=e,this.headers=t,this.bucketId=r,this.fetch=ys(n)}uploadOrUpdate(e,t,r,n){return Te(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},Tl),n),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",i.cacheControl)):(o=r,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType);const l=this._removeEmptyFolders(t),u=this._getFinalPath(l),c=yield this.fetch(`${this.url}/object/${u}`,{method:e,body:o,headers:a});if(c.ok)return{data:{Key:u},error:null};{const h=yield c.json();return{data:null,error:h}}}catch(o){return{data:null,error:o}}})}upload(e,t,r){return Te(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}update(e,t,r){return Te(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t){return Te(this,void 0,void 0,function*(){try{return{data:yield xe(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(r){return{data:null,error:r}}})}copy(e,t){return Te(this,void 0,void 0,function*(){try{return{data:yield xe(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(r){return{data:null,error:r}}})}createSignedUrl(e,t){return Te(this,void 0,void 0,function*(){try{const r=this._getFinalPath(e);let n=yield xe(this.fetch,`${this.url}/object/sign/${r}`,{expiresIn:t},{headers:this.headers});const o=`${this.url}${n.signedURL}`;return n={signedURL:o},{data:n,error:null,signedURL:o}}catch(r){return{data:null,error:r,signedURL:null}}})}createSignedUrls(e,t){return Te(this,void 0,void 0,function*(){try{return{data:(yield xe(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers})).map(n=>Object.assign(Object.assign({},n),{signedURL:n.signedURL?`${this.url}${n.signedURL}`:null})),error:null}}catch(r){return{data:null,error:r}}})}download(e){return Te(this,void 0,void 0,function*(){try{const t=this._getFinalPath(e);return{data:yield(yield Tr(this.fetch,`${this.url}/object/${t}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(t){return{data:null,error:t}}})}getPublicUrl(e){try{const t=this._getFinalPath(e),r=`${this.url}/object/public/${t}`;return{data:{publicURL:r},error:null,publicURL:r}}catch(t){return{data:null,error:t,publicURL:null}}}remove(e){return Te(this,void 0,void 0,function*(){try{return{data:yield bs(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}list(e,t,r){return Te(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},El),t),{prefix:e||""});return{data:yield xe(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){return{data:null,error:n}}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}}class Sl extends kl{constructor(e,t={},r){super(e,t,r)}from(e){return new $l(this.url,this.headers,e,this.fetch)}}var Ol=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(c){try{u(r.next(c))}catch(h){i(h)}}function l(c){try{u(r.throw(c))}catch(h){i(h)}}function u(c){c.done?o(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};const jl=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Ol(void 0,void 0,void 0,function*(){return yield(yield Dt(()=>import("./browser-ponyfill-e576e335.js").then(r=>r.b),[])).fetch(...t)}):e=fetch,(...t)=>e(...t)};var Il=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(c){try{u(r.next(c))}catch(h){i(h)}}function l(c){try{u(r.throw(c))}catch(h){i(h)}}function u(c){c.done?o(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};class Rl{constructor(e,{headers:t={},customFetch:r}={}){this.url=e,this.headers=t,this.fetch=jl(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t){return Il(this,void 0,void 0,function*(){try{const{headers:r,body:n}=t!=null?t:{},o=yield this.fetch(`${this.url}/${e}`,{method:"POST",headers:Object.assign({},this.headers,r),body:n}),i=o.headers.get("x-relay-error");if(i&&i==="true")return{data:null,error:new Error(yield o.text())};let a;const{responseType:l}=t!=null?t:{};return!l||l==="json"?a=yield o.json():l==="arrayBuffer"?a=yield o.arrayBuffer():l==="blob"?a=yield o.blob():a=yield o.text(),{data:a,error:null}}catch(r){return{data:null,error:r}}})}}var At=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(c){try{u(r.next(c))}catch(h){i(h)}}function l(c){try{u(r.throw(c))}catch(h){i(h)}}function u(c){c.done?o(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};const Al={schema:"public",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,multiTab:!0,headers:ps};class Pl{constructor(e,t,r){if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const n=ta(e),o=Object.assign(Object.assign({},Al),r);if(this.restUrl=`${n}/rest/v1`,this.realtimeUrl=`${n}/realtime/v1`.replace("http","ws"),this.authUrl=`${n}/auth/v1`,this.storageUrl=`${n}/storage/v1`,n.match(/(supabase\.co)|(supabase\.in)/)){const a=n.split(".");this.functionsUrl=`${a[0]}.functions.${a[1]}.${a[2]}`}else this.functionsUrl=`${n}/functions/v1`;this.schema=o.schema,this.multiTab=o.multiTab,this.fetch=o.fetch,this.headers=Object.assign(Object.assign({},ps),r==null?void 0:r.headers),this.shouldThrowOnError=o.shouldThrowOnError||!1,this.auth=this._initSupabaseAuthClient(o),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},o.realtime)),this._listenForAuthEvents(),this._listenForMultiTabEvents()}get functions(){return new Rl(this.functionsUrl,{headers:this._getAuthHeaders(),customFetch:this.fetch})}get storage(){return new Sl(this.storageUrl,this._getAuthHeaders(),this.fetch)}from(e){const t=`${this.restUrl}/${e}`;return new ml(t,{headers:this._getAuthHeaders(),schema:this.schema,realtime:this.realtime,table:e,fetch:this.fetch,shouldThrowOnError:this.shouldThrowOnError})}rpc(e,t,{head:r=!1,count:n=null}={}){return this._initPostgRESTClient().rpc(e,t,{head:r,count:n})}channel(e,t){var r,n;const o=(n=(r=this.auth.session())===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:this.supabaseKey;return this.realtime.isConnected()||this.realtime.connect(),this.realtime.channel(e,Object.assign(Object.assign({},t),{user_token:o}))}removeAllSubscriptions(){return At(this,void 0,void 0,function*(){const e=this.getSubscriptions().slice(),t=e.map(n=>this.removeSubscription(n));return(yield Promise.all(t)).map(({error:n},o)=>({data:{subscription:e[o]},error:n}))})}removeChannel(e){return At(this,void 0,void 0,function*(){const{error:t}=yield this._closeSubscription(e),r=this.getSubscriptions(),n=r.filter(o=>o.isJoined()).length;return r.length===0&&(yield this.realtime.disconnect()),{data:{openChannels:n},error:t}})}removeSubscription(e){return At(this,void 0,void 0,function*(){const{error:t}=yield this._closeSubscription(e),r=this.getSubscriptions(),n=r.filter(o=>o.isJoined()).length;return r.length===0&&(yield this.realtime.disconnect()),{data:{openSubscriptions:n},error:t}})}_closeSubscription(e){return At(this,void 0,void 0,function*(){let t=null;if(!e.isClosed()){const{error:r}=yield this._unsubscribeSubscription(e);t=r}return this.realtime.remove(e),{error:t}})}_unsubscribeSubscription(e){return new Promise(t=>{e.unsubscribe().receive("ok",()=>t({error:null})).receive("error",r=>t({error:r})).receive("timeout",()=>t({error:new Error("timed out")}))})}getSubscriptions(){return this.realtime.channels}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,localStorage:n,headers:o,fetch:i,cookieOptions:a,multiTab:l}){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ta({url:this.authUrl,headers:Object.assign(Object.assign({},o),u),autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,localStorage:n,fetch:i,cookieOptions:a,multiTab:l})}_initRealtimeClient(e){return new fl(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign(Object.assign({},e==null?void 0:e.params),{apikey:this.supabaseKey})}))}_initPostgRESTClient(){return new Ia(this.restUrl,{headers:this._getAuthHeaders(),schema:this.schema,fetch:this.fetch,throwOnError:this.shouldThrowOnError})}_getAuthHeaders(){var e,t;const r=Object.assign({},this.headers),n=(t=(e=this.auth.session())===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey;return r.apikey=this.supabaseKey,r.Authorization=r.Authorization||`Bearer ${n}`,r}_listenForMultiTabEvents(){if(!this.multiTab||!ra()||!(window!=null&&window.addEventListener))return null;try{return window==null?void 0:window.addEventListener("storage",e=>{var t,r,n;if(e.key===ea){const o=JSON.parse(String(e.newValue)),i=(r=(t=o==null?void 0:o.currentSession)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:void 0,a=(n=this.auth.session())===null||n===void 0?void 0:n.access_token;i?!a&&i?this._handleTokenChanged("SIGNED_IN",i,"STORAGE"):a!==i&&this._handleTokenChanged("TOKEN_REFRESHED",i,"STORAGE"):this._handleTokenChanged("SIGNED_OUT",i,"STORAGE")}})}catch(e){return console.error("_listenForMultiTabEvents",e),null}}_listenForAuthEvents(){let{data:e}=this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,r==null?void 0:r.access_token,"CLIENT")});return e}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==t?(this.realtime.setAuth(t),r=="STORAGE"&&this.auth.setAuth(t),this.changedAccessToken=t):(e==="SIGNED_OUT"||e==="USER_DELETED")&&(this.realtime.setAuth(this.supabaseKey),r=="STORAGE"&&this.auth.signOut())}}const Cl=(s,e,t)=>new Pl(s,e,t),Nl="https://dbmtysppmiwwjwaeneex.supabase.co",Dl="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRibXR5c3BwbWl3d2p3YWVuZWV4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2NDQ5NTI0NDUsImV4cCI6MTk2MDUyODQ0NX0.i_1JrAfv5fieeVaiJrVIQPL6V0_-H9sR-PKIuGDAIfI",St=Cl(Nl,Dl),yu=async({email:s,password:e})=>{const t=await St.auth.signIn({email:s,password:e});if(t.error)throw console.log(t.error),new Error("signIn failed");if(t.user)return!0;throw new Error("no user found")},Ul=async s=>{const e=await St.from("wordgame_wod-questions");if(e.error)throw console.log(e.error),new Error("getQuestions failed");if(e.data.length)return e.data;throw new Error("no questions matching that game id")},Ml=async({gameId:s,column:e})=>{const t=await St.from("wordgame_games").select(e).eq("game_id",s);if(t.error)throw console.log(t.error),new Error("getGameColumn failed");if(t.data.length)return t.data[0][e];throw new Error("no games matching this id")},Pr=async({table:s,column:e,value:t,gameId:r})=>{const n=await St.from(s).update({[e]:t}).eq("game_id",r);if(n.error)throw console.log(n.error),new Error("update failed");if(n.data)return n.data},ks=async({table:s,data:e})=>{const t={returning:"minimal"},r=await St.from(s).insert(e,t);if(r.error)throw console.log(r.error),new Error("insert failed");return!0};function Fn(s,e,t){const r=s.slice();return r[22]=e[t].id,r[23]=e[t].text,r[24]=e[t].detail,r[25]=e[t].type,r[26]=e[t].limit,r[27]=e,r[28]=t,r}function Ll(s){let e,t,r,n,o,i,a,l,u,c;return{c(){e=v("div"),t=v("div"),r=v("button"),n=B("How to Play"),o=U(),i=v("div"),a=v("button"),l=B("play"),this.h()},l(h){e=w(h,"DIV",{class:!0});var p=E(e);t=w(p,"DIV",{class:!0});var m=E(t);r=w(m,"BUTTON",{});var _=E(r);n=x(_,"How to Play"),_.forEach(f),m.forEach(f),o=M(p),i=w(p,"DIV",{class:!0});var b=E(i);a=w(b,"BUTTON",{});var y=E(a);l=x(y,"play"),y.forEach(f),b.forEach(f),p.forEach(f),this.h()},h(){g(t,"class","rules"),g(i,"class","play"),g(e,"class","cta")},m(h,p){C(h,e,p),d(e,t),d(t,r),d(r,n),d(e,o),d(e,i),d(i,a),d(a,l),u||(c=[oe(r,"click",s[17]),oe(a,"click",s[18])],u=!0)},p:K,d(h){h&&f(e),u=!1,Pe(c)}}}function ql(s){let e,t,r,n,o,i;function a(c,h){return c[6]?xl:Bl}let l=a(s),u=l(s);return{c(){e=v("p"),t=B("tell us about yourself. "),r=v("strong"),n=B(`note: anything you submit below may appear for the rest of the internet
			to see. we may lightly edit answers for brevity.`),o=U(),u.c(),i=se()},l(c){e=w(c,"P",{});var h=E(e);t=x(h,"tell us about yourself. "),r=w(h,"STRONG",{});var p=E(r);n=x(p,`note: anything you submit below may appear for the rest of the internet
			to see. we may lightly edit answers for brevity.`),p.forEach(f),h.forEach(f),o=M(c),u.l(c),i=se()},m(c,h){C(c,e,h),d(e,t),d(e,r),d(r,n),C(c,o,h),u.m(c,h),C(c,i,h)},p(c,h){l===(l=a(c))&&u?u.p(c,h):(u.d(1),u=l(c),u&&(u.c(),u.m(i.parentNode,i)))},d(c){c&&f(e),c&&f(o),u.d(c),c&&f(i)}}}function Bl(s){let e,t,r,n,o,i,a,l,u,c,h,p,m,_,b,y=s[5],O=[];for(let P=0;P<y.length;P+=1)O[P]=Vn(Fn(s,y,P));return{c(){e=v("form");for(let P=0;P<O.length;P+=1)O[P].c();t=U(),r=v("div"),n=v("button"),o=B("give me a different question"),i=U(),a=v("label"),l=B(s[3]),u=U(),c=v("input"),h=U(),p=v("button"),m=B("Submit"),this.h()},l(P){e=w(P,"FORM",{});var j=E(e);for(let J=0;J<O.length;J+=1)O[J].l(j);t=M(j),r=w(j,"DIV",{});var I=E(r);n=w(I,"BUTTON",{type:!0});var k=E(n);o=x(k,"give me a different question"),k.forEach(f),i=M(I),a=w(I,"LABEL",{for:!0});var N=E(a);l=x(N,s[3]),N.forEach(f),u=M(I),c=w(I,"INPUT",{id:!0,maxlength:!0,placeholder:!0}),I.forEach(f),h=M(j),p=w(j,"BUTTON",{type:!0});var D=E(p);m=x(D,"Submit"),D.forEach(f),j.forEach(f),this.h()},h(){g(n,"type","button"),g(a,"for","question-bio"),c.required=!0,g(c,"id","question-bio"),g(c,"maxlength","100"),g(c,"placeholder","answer here"),g(p,"type","submit")},m(P,j){C(P,e,j);for(let I=0;I<O.length;I+=1)O[I].m(e,null);d(e,t),d(e,r),d(r,n),d(n,o),d(r,i),d(r,a),d(a,l),d(r,u),d(r,c),at(c,s[4]),d(e,h),d(e,p),d(p,m),_||(b=[oe(n,"click",s[9]),oe(c,"input",s[16]),oe(e,"submit",Ds(s[10]))],_=!0)},p(P,j){if(j&32){y=P[5];let I;for(I=0;I<y.length;I+=1){const k=Fn(P,y,I);O[I]?O[I].p(k,j):(O[I]=Vn(k),O[I].c(),O[I].m(e,t))}for(;I<O.length;I+=1)O[I].d(1);O.length=y.length}j&8&&we(l,P[3]),j&16&&c.value!==P[4]&&at(c,P[4])},d(P){P&&f(e),$e(O,P),_=!1,Pe(b)}}}function xl(s){let e,t;return{c(){e=v("p"),t=B("Error")},l(r){e=w(r,"P",{});var n=E(e);t=x(n,"Error"),n.forEach(f)},m(r,n){C(r,e,n),d(e,t)},p:K,d(r){r&&f(e)}}}function Hl(s){let e,t,r,n,o,i;function a(){s[15].call(e,s[28])}return{c(){e=v("input"),this.h()},l(l){e=w(l,"INPUT",{id:!0,placeholder:!0,maxlength:!0}),this.h()},h(){e.required=!0,g(e,"id",t="question-"+s[22]),g(e,"placeholder",r=s[22]),g(e,"maxlength",n=s[26])},m(l,u){C(l,e,u),at(e,s[5][s[28]].answer),o||(i=oe(e,"input",a),o=!0)},p(l,u){s=l,u&32&&t!==(t="question-"+s[22])&&g(e,"id",t),u&32&&r!==(r=s[22])&&g(e,"placeholder",r),u&32&&n!==(n=s[26])&&g(e,"maxlength",n),u&32&&e.value!==s[5][s[28]].answer&&at(e,s[5][s[28]].answer)},d(l){l&&f(e),o=!1,i()}}}function Gl(s){let e,t,r,n,o,i,a,l,u,c,h,p,m,_,b,y,O,P;s[12][0][s[28]]=[];function j(){s[11].call(t,s[28])}function I(){s[13].call(a,s[28])}function k(){s[14].call(p,s[28])}return{c(){e=v("fieldset"),t=v("input"),r=U(),n=v("label"),o=B("they/them"),i=U(),a=v("input"),l=U(),u=v("label"),c=B("she/her"),h=U(),p=v("input"),m=U(),_=v("label"),b=B("he/him"),this.h()},l(N){e=w(N,"FIELDSET",{id:!0});var D=E(e);t=w(D,"INPUT",{id:!0,type:!0,name:!0}),r=M(D),n=w(D,"LABEL",{for:!0});var J=E(n);o=x(J,"they/them"),J.forEach(f),i=M(D),a=w(D,"INPUT",{id:!0,type:!0,name:!0}),l=M(D),u=w(D,"LABEL",{for:!0});var L=E(u);c=x(L,"she/her"),L.forEach(f),h=M(D),p=w(D,"INPUT",{id:!0,type:!0,name:!0}),m=M(D),_=w(D,"LABEL",{for:!0});var Z=E(_);b=x(Z,"he/him"),Z.forEach(f),D.forEach(f),this.h()},h(){g(t,"id","pronoun-1"),g(t,"type","radio"),g(t,"name","pronoun"),t.__value="they/them",t.value=t.__value,s[12][0][s[28]].push(t),g(n,"for","pronoun-1"),g(a,"id","pronoun-2"),g(a,"type","radio"),g(a,"name","pronoun"),a.__value="she/her",a.value=a.__value,s[12][0][s[28]].push(a),g(u,"for","pronoun-2"),g(p,"id","pronoun-3"),g(p,"type","radio"),g(p,"name","pronoun"),p.__value="he/him",p.value=p.__value,s[12][0][s[28]].push(p),g(_,"for","pronoun-3"),g(e,"id",y="question-"+s[22])},m(N,D){C(N,e,D),d(e,t),t.checked=t.__value===s[5][s[28]].answer,d(e,r),d(e,n),d(n,o),d(e,i),d(e,a),a.checked=a.__value===s[5][s[28]].answer,d(e,l),d(e,u),d(u,c),d(e,h),d(e,p),p.checked=p.__value===s[5][s[28]].answer,d(e,m),d(e,_),d(_,b),O||(P=[oe(t,"change",j),oe(a,"change",I),oe(p,"change",k)],O=!0)},p(N,D){s=N,D&32&&(t.checked=t.__value===s[5][s[28]].answer),D&32&&(a.checked=a.__value===s[5][s[28]].answer),D&32&&(p.checked=p.__value===s[5][s[28]].answer),D&32&&y!==(y="question-"+s[22])&&g(e,"id",y)},d(N){N&&f(e),s[12][0][s[28]].splice(s[12][0][s[28]].indexOf(t),1),s[12][0][s[28]].splice(s[12][0][s[28]].indexOf(a),1),s[12][0][s[28]].splice(s[12][0][s[28]].indexOf(p),1),O=!1,Pe(P)}}}function Vn(s){let e,t,r=s[23]+"",n,o,i,a,l=s[24]+"",u,c;function h(_,b){return _[22]==="pronoun"?Gl:Hl}let p=h(s),m=p(s);return{c(){e=v("div"),t=v("label"),n=B(r),i=U(),a=v("p"),u=B(l),c=U(),m.c(),this.h()},l(_){e=w(_,"DIV",{});var b=E(e);t=w(b,"LABEL",{for:!0});var y=E(t);n=x(y,r),y.forEach(f),i=M(b),a=w(b,"P",{});var O=E(a);u=x(O,l),O.forEach(f),c=M(b),m.l(b),b.forEach(f),this.h()},h(){g(t,"for",o="question-"+s[22])},m(_,b){C(_,e,b),d(e,t),d(t,n),d(e,i),d(e,a),d(a,u),d(e,c),m.m(e,null)},p(_,b){b&32&&r!==(r=_[23]+"")&&we(n,r),b&32&&o!==(o="question-"+_[22])&&g(t,"for",o),b&32&&l!==(l=_[24]+"")&&we(u,l),p===(p=h(_))&&m?m.p(_,b):(m.d(1),m=p(_),m&&(m.c(),m.m(e,null)))},d(_){_&&f(e),m.d()}}}function zl(s){let e,t,r,n,o,i,a;function l(h,p){if(!h[0])return ql;if(h[1]&&!h[2])return Ll}let u=l(s),c=u&&u(s);return{c(){e=v("h2"),t=B("welcome, stranger!"),r=U(),n=v("p"),o=B("let's play a word game."),i=U(),c&&c.c(),a=se(),this.h()},l(h){e=w(h,"H2",{class:!0});var p=E(e);t=x(p,"welcome, stranger!"),p.forEach(f),r=M(h),n=w(h,"P",{});var m=E(n);o=x(m,"let's play a word game."),m.forEach(f),i=M(h),c&&c.l(h),a=se(),this.h()},h(){g(e,"class","svelte-1uum1kk")},m(h,p){C(h,e,p),d(e,t),C(h,r,p),C(h,n,p),d(n,o),C(h,i,p),c&&c.m(h,p),C(h,a,p)},p(h,[p]){u===(u=l(h))&&c?c.p(h,p):(c&&c.d(1),c=u&&u(h),c&&(c.c(),c.m(a.parentNode,a)))},i:K,o:K,d(h){h&&f(e),h&&f(r),h&&f(n),h&&f(i),c&&c.d(h),h&&f(a)}}}function Fl(s,e,t){let r,n,o;H(s,jr,L=>t(21,n=L)),H(s,Ae,L=>t(7,o=L));let{wodReady:i}=e,{loaded:a}=e,{hideButton:l}=e;const u=ht(),c=[{id:"name",limit:12,text:"What is your name?",detail:"e.g., Jane Doe or J. Doe or Jane"},{id:"location",limit:12,text:"Where are playing from?",detail:""},{id:"pronoun",text:"What are your preferred pronouns?"},{id:"plug",limit:48,text:"What would you like to plug (about yourself, something, etc) at the end of the game?",detail:"'Follow me on Twitter @wordsagainststrangers' or 'Have a great day!'"}];let h=[],p,m,_;const b=()=>{const L=Math.floor(Math.random()*h.length);t(3,m=h[L].question)},y=async()=>{try{const L={game_id:n};[...c,{id:"bio",answer:r}].forEach(({id:G,answer:A})=>{L[G]=A}),await ks({table:"wordgame_wod-info",data:[L]}),await Pr({table:"wordgame_games",column:"wod_info",value:!0,gameId:n}),t(0,i=!0)}catch(L){console.log(L)}};Et(async()=>{try{const L=await Ml({gameId:n,column:"wod_info"});t(0,i=L),L||(h=await Ul(n),b())}catch{t(6,p=!0)}});const O=[[]];function P(L){c[L].answer=this.__value,t(5,c)}function j(L){c[L].answer=this.__value,t(5,c)}function I(L){c[L].answer=this.__value,t(5,c)}function k(L){c[L].answer=this.value,t(5,c)}function N(){_=this.value,t(4,_)}const D=()=>{_e(Ae,o="rules",o)},J=()=>u("play");return s.$$set=L=>{"wodReady"in L&&t(0,i=L.wodReady),"loaded"in L&&t(1,a=L.loaded),"hideButton"in L&&t(2,l=L.hideButton)},s.$$.update=()=>{s.$$.dirty&24&&(r=`Q: ${m}
A: ${_}`)},[i,a,l,m,_,c,p,o,u,b,y,P,O,j,I,k,N,D,J]}class Vl extends X{constructor(e){super(),Q(this,e,Fl,zl,Y,{wodReady:0,loaded:1,hideButton:2})}}function Wl(s){let e,t;return{c(){e=v("p"),t=B(s[1])},l(r){e=w(r,"P",{});var n=E(e);t=x(n,s[1]),n.forEach(f)},m(r,n){C(r,e,n),d(e,t)},p(r,n){n&2&&we(t,r[1])},d(r){r&&f(e)}}}function Jl(s){let e,t;return{c(){e=v("p"),t=B("Submitting responses...")},l(r){e=w(r,"P",{});var n=E(e);t=x(n,"Submitting responses..."),n.forEach(f)},m(r,n){C(r,e,n),d(e,t)},p:K,d(r){r&&f(e)}}}function Kl(s){let e,t,r,n;function o(l,u){return l[0]===void 0?Jl:Wl}let i=o(s),a=i(s);return{c(){e=v("h2"),t=B("Thanks for playing!"),r=U(),a.c(),n=se()},l(l){e=w(l,"H2",{});var u=E(e);t=x(u,"Thanks for playing!"),u.forEach(f),r=M(l),a.l(l),n=se()},m(l,u){C(l,e,u),d(e,t),C(l,r,u),a.m(l,u),C(l,n,u)},p(l,[u]){i===(i=o(l))&&a?a.p(l,u):(a.d(1),a=i(l),a&&(a.c(),a.m(n.parentNode,n)))},i:K,o:K,d(l){l&&f(e),l&&f(r),a.d(l),l&&f(n)}}}function Yl(s,e,t){let r,n,o;H(s,jr,a=>t(2,n=a)),H(s,Re,a=>t(3,o=a));let i;return Et(async()=>{try{const l=[].concat(...o.user).filter(c=>c.valid).map(c=>({game_id:n,round:c.round,text:c.text,timestamp:c.timestamp,points:c.points,lemmas:c.lemmas}));await ks({table:"wordgame_wod-answers",data:l})?(t(0,i=!0),await Pr({table:"wordgame_games",column:"wod_played",value:!0,gameId:n})):t(0,i=!1)}catch{t(0,i=!1)}}),s.$$.update=()=>{s.$$.dirty&1&&t(1,r=i?"Game successfully submitted!":"There was an error submitting your game. Please contact the admin: russell@pudding.cool.")},[i,r]}class Xl extends X{constructor(e){super(),Q(this,e,Yl,Kl,Y,{})}}function Wn(s){let e,t,r,n;const o=[Zl,Ql],i=[];function a(l,u){return l[3]?0:1}return e=a(s),t=i[e]=o[e](s),{c(){t.c(),r=se()},l(l){t.l(l),r=se()},m(l,u){i[e].m(l,u),C(l,r,u),n=!0},p(l,u){let c=e;e=a(l),e===c?i[e].p(l,u):(he(),R(i[c],1,1,()=>{i[c]=null}),fe(),t=i[e],t?t.p(l,u):(t=i[e]=o[e](l),t.c()),S(t,1),t.m(r.parentNode,r))},i(l){n||(S(t),n=!0)},o(l){R(t),n=!1},d(l){i[e].d(l),l&&f(r)}}}function Ql(s){let e,t;return e=new Qo({props:{loaded:s[0]}}),e.$on("play",s[5]),{c(){z(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,n){V(e,r,n),t=!0},p(r,n){const o={};n&1&&(o.loaded=r[0]),e.$set(o)},i(r){t||(S(e.$$.fragment,r),t=!0)},o(r){R(e.$$.fragment,r),t=!1},d(r){W(e,r)}}}function Zl(s){let e,t,r;function n(i){s[6](i)}let o={loaded:s[0],hideButton:s[4]};return s[1]!==void 0&&(o.wodReady=s[1]),e=new Vl({props:o}),$r.push(()=>ts(e,"wodReady",n)),e.$on("play",s[5]),{c(){z(e.$$.fragment)},l(i){F(e.$$.fragment,i)},m(i,a){V(e,i,a),r=!0},p(i,a){const l={};a&1&&(l.loaded=i[0]),a&16&&(l.hideButton=i[4]),!t&&a&2&&(t=!0,l.wodReady=i[1],rs(()=>t=!1)),e.$set(l)},i(i){r||(S(e.$$.fragment,i),r=!0)},o(i){R(e.$$.fragment,i),r=!1},d(i){W(e,i)}}}function Jn(s){let e,t;return e=new Co({}),{c(){z(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,n){V(e,r,n),t=!0},i(r){t||(S(e.$$.fragment,r),t=!0)},o(r){R(e.$$.fragment,r),t=!1},d(r){W(e,r)}}}function Kn(s){let e,t,r=s[3]&&Yn();return{c(){r&&r.c(),e=se()},l(n){r&&r.l(n),e=se()},m(n,o){r&&r.m(n,o),C(n,e,o),t=!0},p(n,o){n[3]?r?o&8&&S(r,1):(r=Yn(),r.c(),S(r,1),r.m(e.parentNode,e)):r&&(he(),R(r,1,1,()=>{r=null}),fe())},i(n){t||(S(r),t=!0)},o(n){R(r),t=!1},d(n){r&&r.d(n),n&&f(e)}}}function Yn(s){let e,t;return e=new Xl({}),{c(){z(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,n){V(e,r,n),t=!0},i(r){t||(S(e.$$.fragment,r),t=!0)},o(r){R(e.$$.fragment,r),t=!1},d(r){W(e,r)}}}function Xn(s){let e,t,r,n,o;return{c(){e=v("div"),t=v("button"),r=B("next round"),this.h()},l(i){e=w(i,"DIV",{class:!0});var a=E(e);t=w(a,"BUTTON",{class:!0});var l=E(t);r=x(l,"next round"),l.forEach(f),a.forEach(f),this.h()},h(){g(t,"class","svelte-120unyc"),g(e,"class","mid svelte-120unyc")},m(i,a){C(i,e,a),d(e,t),d(t,r),n||(o=oe(t,"click",s[5]),n=!0)},p:K,d(i){i&&f(e),n=!1,o()}}}function eu(s){let e,t,r,n,o,i=s[2]==="pre"&&Wn(s),a=s[2]!=="pre"&&Jn(),l=s[2]==="post"&&Kn(s),u=s[2]==="mid"&&Xn(s);return{c(){i&&i.c(),e=U(),a&&a.c(),t=U(),l&&l.c(),r=U(),u&&u.c(),n=se()},l(c){i&&i.l(c),e=M(c),a&&a.l(c),t=M(c),l&&l.l(c),r=M(c),u&&u.l(c),n=se()},m(c,h){i&&i.m(c,h),C(c,e,h),a&&a.m(c,h),C(c,t,h),l&&l.m(c,h),C(c,r,h),u&&u.m(c,h),C(c,n,h),o=!0},p(c,[h]){c[2]==="pre"?i?(i.p(c,h),h&4&&S(i,1)):(i=Wn(c),i.c(),S(i,1),i.m(e.parentNode,e)):i&&(he(),R(i,1,1,()=>{i=null}),fe()),c[2]!=="pre"?a?h&4&&S(a,1):(a=Jn(),a.c(),S(a,1),a.m(t.parentNode,t)):a&&(he(),R(a,1,1,()=>{a=null}),fe()),c[2]==="post"?l?(l.p(c,h),h&4&&S(l,1)):(l=Kn(c),l.c(),S(l,1),l.m(r.parentNode,r)):l&&(he(),R(l,1,1,()=>{l=null}),fe()),c[2]==="mid"?u?u.p(c,h):(u=Xn(c),u.c(),u.m(n.parentNode,n)):u&&(u.d(1),u=null)},i(c){o||(S(i),S(a),S(l),o=!0)},o(c){R(i),R(a),R(l),o=!1},d(c){i&&i.d(c),c&&f(e),a&&a.d(c),c&&f(t),l&&l.d(c),c&&f(r),u&&u.d(c),c&&f(n)}}}function tu(s,e,t){let r,n,o,i,a,l;H(s,Or,m=>t(2,n=m)),H(s,ft,m=>t(3,o=m)),H(s,He,m=>t(7,i=m)),H(s,yt,m=>t(8,a=m)),H(s,lt,m=>t(9,l=m));let{loaded:u}=e,c;const h=async()=>{o&&n==="pre"?await Pr({table:"wordgame_games",column:"wod_started",value:!0,gameId:l}):n==="mid"&&_e(yt,a=!1,a),_e(He,i+=1,i)};function p(m){c=m,t(1,c)}return s.$$set=m=>{"loaded"in m&&t(0,u=m.loaded)},s.$$.update=()=>{s.$$.dirty&14&&t(4,r=o&&n==="pre"&&!c)},[u,c,n,o,r,h,p]}class ru extends X{constructor(e){super(),Q(this,e,tu,eu,Y,{loaded:0})}}async function nu(s){const e=`https://pudding.cool/projects/word-game-data/game-clues/${s}.csv?version=${Date.now()}`,r=(await Ut(e)).map(n=>({...n,round:+n.round}));return r.sort((n,o)=>Ms(n.round,o.round)),r}async function su(s){const e=[];for(let t of s){const r=`https://pudding.cool/projects/word-game-data/clue-answers/${t}.csv?version=${Date.now()}`,o=(await Ut(r)).map(i=>({...i,points:+i.points}));e.push(o)}return e}async function iu(s){return await(await fetch(s)).json()}function Qn(s){let e,t;return e=new ii({}),{c(){z(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,n){V(e,r,n),t=!0},i(r){t||(S(e.$$.fragment,r),t=!0)},o(r){R(e.$$.fragment,r),t=!1},d(r){W(e,r)}}}function Zn(s){let e,t,r;return t=new no({props:{clues:s[0],answers:s[1]}}),{c(){e=v("section"),z(t.$$.fragment),this.h()},l(n){e=w(n,"SECTION",{id:!0,class:!0});var o=E(e);F(t.$$.fragment,o),o.forEach(f),this.h()},h(){g(e,"id","play"),g(e,"class","svelte-cxk1sc"),te(e,"visible",s[4])},m(n,o){C(n,e,o),V(t,e,null),r=!0},p(n,o){const i={};o&1&&(i.clues=n[0]),o&2&&(i.answers=n[1]),t.$set(i),o&16&&te(e,"visible",n[4])},i(n){r||(S(t.$$.fragment,n),r=!0)},o(n){R(t.$$.fragment,n),r=!1},d(n){n&&f(e),W(t)}}}function ou(s){let e,t,r,n,o,i=s[6]&&Qn(),a=s[5]&&Zn(s);return n=new ru({props:{loaded:s[2]}}),{c(){i&&i.c(),e=U(),a&&a.c(),t=U(),r=v("section"),z(n.$$.fragment),this.h()},l(l){i&&i.l(l),e=M(l),a&&a.l(l),t=M(l),r=w(l,"SECTION",{id:!0,class:!0});var u=E(r);F(n.$$.fragment,u),u.forEach(f),this.h()},h(){g(r,"id","modal"),g(r,"class","svelte-cxk1sc"),te(r,"visible",s[3])},m(l,u){i&&i.m(l,u),C(l,e,u),a&&a.m(l,u),C(l,t,u),C(l,r,u),V(n,r,null),o=!0},p(l,[u]){l[6]?i?u&64&&S(i,1):(i=Qn(),i.c(),S(i,1),i.m(e.parentNode,e)):i&&(he(),R(i,1,1,()=>{i=null}),fe()),l[5]?a?(a.p(l,u),u&32&&S(a,1)):(a=Zn(l),a.c(),S(a,1),a.m(t.parentNode,t)):a&&(he(),R(a,1,1,()=>{a=null}),fe());const c={};u&4&&(c.loaded=l[2]),n.$set(c),u&8&&te(r,"visible",l[3])},i(l){o||(S(i),S(a),S(n.$$.fragment,l),o=!0)},o(l){R(i),R(a),R(n.$$.fragment,l),o=!1},d(l){i&&i.d(l),l&&f(e),a&&a.d(l),l&&f(t),l&&f(r),W(n)}}}function au(s,e,t){let r,n,o,i,a,l,u,c,h;H(s,lt,y=>t(6,i=y)),H(s,Or,y=>t(7,a=y)),H(s,yt,y=>t(8,l=y)),H(s,He,y=>t(9,u=y)),H(s,jr,y=>t(10,c=y)),H(s,ft,y=>t(11,h=y));let p,m,_;const b=async()=>{if(h)return c;const O=`https://pudding.cool/projects/word-game-data/games.json?version=${Date.now()}`,{updated:P,games:j}=await iu(O);console.log("updated:",P);const I=j.find(k=>k.live);if(I)return I.id};return Et(async()=>{if(_e(lt,i=await b(),i),i){const y=await nu(i);t(0,p=y.map(O=>O.clue)),t(1,m=await su(y.map(O=>O.clueId)))}t(2,_=!0)}),s.$$.update=()=>{s.$$.dirty&519&&t(5,r=_&&p&&m&&u>=0),s.$$.dirty&384&&t(4,n=a==="mid"&&!l),s.$$.dirty&384&&t(3,o=l||["pre","post"].includes(a))},[p,m,_,o,n,r,i,a,l,u]}class lu extends X{constructor(e){super(),Q(this,e,au,ou,Y,{})}}function uu(s){let e,t,r,n,o,i,a,l,u,c,h,p,m,_,b,y,O,P,j,I,k,N,D,J,L,Z,$,G,A,T,q,ee,pe,ve,le,Ge,ze,ke,Fe,Ve,Bt,Ce,dt,xt,Ht,Gt,Ne,mt,zt,Ft,Vt,We,Je,Wt,Jt,be,Ke,Kt,Yt,Ye,Xt,Qt,Xe,Zt,er,Qe,tr,rr,Ze,De,nr,sr,Cr;return{c(){e=v("section"),t=v("div"),r=v("h3"),n=v("span"),o=B("how to play"),i=U(),a=v("ul"),l=v("li"),u=v("strong"),c=B("goal:"),h=B(" score more points than the stranger."),p=U(),m=v("li"),_=v("strong"),b=B("duration:"),y=B(" four one-minute rounds."),O=U(),P=v("li"),j=v("strong"),I=B("gameplay:"),k=B(` enter as many words as possible that satisfy
				a clue.
				`),N=v("ul"),D=v("li"),J=v("strong"),L=B("sample clue"),Z=B(`:
						`),$=v("em"),G=B("starts with "),A=v("strong"),T=B("A"),q=B(`
						answers: `),ee=v("em"),pe=B("apple"),ve=B(", "),le=v("em"),Ge=B("awesome"),ze=B(", "),ke=v("em"),Fe=B("activate"),Ve=B(", etc."),Bt=U(),Ce=v("li"),dt=v("strong"),xt=B("blocking:"),Ht=B(` whoever gets a word first gets points. If
						the stranger enters the word before you, you get no points, and vice
						versa.`),Gt=U(),Ne=v("li"),mt=v("strong"),zt=B("obscure = more points:"),Ft=B(` you get more points for less
						commonly used words.`),Vt=U(),We=v("h3"),Je=v("span"),Wt=B("rules"),Jt=U(),be=v("ul"),Ke=v("li"),Kt=B("4+ letter words"),Yt=U(),Ye=v("li"),Xt=B("no proper nouns"),Qt=U(),Xe=v("li"),Zt=B("no hyphenated words"),er=U(),Qe=v("li"),tr=B("no variations (e.g. plurals) of a played word"),rr=U(),Ze=v("p"),De=v("button"),nr=B("CLOSE"),this.h()},l(Ue){e=w(Ue,"SECTION",{class:!0});var et=E(e);t=w(et,"DIV",{});var Ee=E(t);r=w(Ee,"H3",{class:!0});var Nr=E(r);n=w(Nr,"SPAN",{class:!0});var Dr=E(n);o=x(Dr,"how to play"),Dr.forEach(f),Nr.forEach(f),i=M(Ee),a=w(Ee,"UL",{});var tt=E(a);l=w(tt,"LI",{class:!0});var ir=E(l);u=w(ir,"STRONG",{});var Ur=E(u);c=x(Ur,"goal:"),Ur.forEach(f),h=x(ir," score more points than the stranger."),ir.forEach(f),p=M(tt),m=w(tt,"LI",{class:!0});var or=E(m);_=w(or,"STRONG",{});var Mr=E(_);b=x(Mr,"duration:"),Mr.forEach(f),y=x(or," four one-minute rounds."),or.forEach(f),O=M(tt),P=w(tt,"LI",{class:!0});var Ot=E(P);j=w(Ot,"STRONG",{});var Lr=E(j);I=x(Lr,"gameplay:"),Lr.forEach(f),k=x(Ot,` enter as many words as possible that satisfy
				a clue.
				`),N=w(Ot,"UL",{});var rt=E(N);D=w(rt,"LI",{class:!0});var ye=E(D);J=w(ye,"STRONG",{});var qr=E(J);L=x(qr,"sample clue"),qr.forEach(f),Z=x(ye,`:
						`),$=w(ye,"EM",{class:!0});var ar=E($);G=x(ar,"starts with "),A=w(ar,"STRONG",{});var Br=E(A);T=x(Br,"A"),Br.forEach(f),ar.forEach(f),q=x(ye,`
						answers: `),ee=w(ye,"EM",{});var xr=E(ee);pe=x(xr,"apple"),xr.forEach(f),ve=x(ye,", "),le=w(ye,"EM",{});var Hr=E(le);Ge=x(Hr,"awesome"),Hr.forEach(f),ze=x(ye,", "),ke=w(ye,"EM",{});var Gr=E(ke);Fe=x(Gr,"activate"),Gr.forEach(f),Ve=x(ye,", etc."),ye.forEach(f),Bt=M(rt),Ce=w(rt,"LI",{class:!0});var lr=E(Ce);dt=w(lr,"STRONG",{});var zr=E(dt);xt=x(zr,"blocking:"),zr.forEach(f),Ht=x(lr,` whoever gets a word first gets points. If
						the stranger enters the word before you, you get no points, and vice
						versa.`),lr.forEach(f),Gt=M(rt),Ne=w(rt,"LI",{class:!0});var ur=E(Ne);mt=w(ur,"STRONG",{});var Fr=E(mt);zt=x(Fr,"obscure = more points:"),Fr.forEach(f),Ft=x(ur,` you get more points for less
						commonly used words.`),ur.forEach(f),rt.forEach(f),Ot.forEach(f),tt.forEach(f),Vt=M(Ee),We=w(Ee,"H3",{class:!0});var Vr=E(We);Je=w(Vr,"SPAN",{class:!0});var Wr=E(Je);Wt=x(Wr,"rules"),Wr.forEach(f),Vr.forEach(f),Jt=M(Ee),be=w(Ee,"UL",{});var Oe=E(be);Ke=w(Oe,"LI",{class:!0});var Jr=E(Ke);Kt=x(Jr,"4+ letter words"),Jr.forEach(f),Yt=M(Oe),Ye=w(Oe,"LI",{class:!0});var Kr=E(Ye);Xt=x(Kr,"no proper nouns"),Kr.forEach(f),Qt=M(Oe),Xe=w(Oe,"LI",{class:!0});var Yr=E(Xe);Zt=x(Yr,"no hyphenated words"),Yr.forEach(f),er=M(Oe),Qe=w(Oe,"LI",{class:!0});var Xr=E(Qe);tr=x(Xr,"no variations (e.g. plurals) of a played word"),Xr.forEach(f),Oe.forEach(f),rr=M(Ee),Ze=w(Ee,"P",{class:!0});var Qr=E(Ze);De=w(Qr,"BUTTON",{class:!0});var Zr=E(De);nr=x(Zr,"CLOSE"),Zr.forEach(f),Qr.forEach(f),Ee.forEach(f),et.forEach(f),this.h()},h(){g(n,"class","chunk combo-wod svelte-1ukzq3l"),g(r,"class","svelte-1ukzq3l"),g(l,"class","svelte-1ukzq3l"),g(m,"class","svelte-1ukzq3l"),g($,"class","clue svelte-1ukzq3l"),g(D,"class","svelte-1ukzq3l"),g(Ce,"class","svelte-1ukzq3l"),g(Ne,"class","svelte-1ukzq3l"),g(P,"class","svelte-1ukzq3l"),g(Je,"class","chunk combo-wod svelte-1ukzq3l"),g(We,"class","svelte-1ukzq3l"),g(Ke,"class","svelte-1ukzq3l"),g(Ye,"class","svelte-1ukzq3l"),g(Xe,"class","svelte-1ukzq3l"),g(Qe,"class","svelte-1ukzq3l"),g(De,"class","svelte-1ukzq3l"),g(Ze,"class","svelte-1ukzq3l"),g(e,"class","svelte-1ukzq3l"),te(e,"visible",s[0]==="rules")},m(Ue,et){C(Ue,e,et),d(e,t),d(t,r),d(r,n),d(n,o),d(t,i),d(t,a),d(a,l),d(l,u),d(u,c),d(l,h),d(a,p),d(a,m),d(m,_),d(_,b),d(m,y),d(a,O),d(a,P),d(P,j),d(j,I),d(P,k),d(P,N),d(N,D),d(D,J),d(J,L),d(D,Z),d(D,$),d($,G),d($,A),d(A,T),d(D,q),d(D,ee),d(ee,pe),d(D,ve),d(D,le),d(le,Ge),d(D,ze),d(D,ke),d(ke,Fe),d(D,Ve),d(N,Bt),d(N,Ce),d(Ce,dt),d(dt,xt),d(Ce,Ht),d(N,Gt),d(N,Ne),d(Ne,mt),d(mt,zt),d(Ne,Ft),d(t,Vt),d(t,We),d(We,Je),d(Je,Wt),d(t,Jt),d(t,be),d(be,Ke),d(Ke,Kt),d(be,Yt),d(be,Ye),d(Ye,Xt),d(be,Qt),d(be,Xe),d(Xe,Zt),d(be,er),d(be,Qe),d(Qe,tr),d(t,rr),d(t,Ze),d(Ze,De),d(De,nr),sr||(Cr=[oe(De,"click",s[1]),oe(e,"click",s[1])],sr=!0)},p(Ue,[et]){et&1&&te(e,"visible",Ue[0]==="rules")},i:K,o:K,d(Ue){Ue&&f(e),sr=!1,Pe(Cr)}}}function cu(s,e,t){let r;return H(s,Ae,o=>t(0,r=o)),[r,()=>{_e(Ae,r=void 0,r)}]}class hu extends X{constructor(e){super(),Q(this,e,cu,uu,Y,{})}}function fu(s){let e,t,r,n,o,i,a,l,u,c,h,p,m,_;return{c(){e=v("section"),t=v("div"),r=v("h3"),n=B("About"),o=U(),i=v("p"),a=U(),l=v("p"),u=U(),c=v("p"),h=v("button"),p=B("CLOSE"),this.h()},l(b){e=w(b,"SECTION",{class:!0});var y=E(e);t=w(y,"DIV",{class:!0});var O=E(t);r=w(O,"H3",{});var P=E(r);n=x(P,"About"),P.forEach(f),o=M(O),i=w(O,"P",{});var j=E(i);j.forEach(f),a=M(O),l=w(O,"P",{});var I=E(l);I.forEach(f),u=M(O),c=w(O,"P",{});var k=E(c);h=w(k,"BUTTON",{});var N=E(h);p=x(N,"CLOSE"),N.forEach(f),k.forEach(f),O.forEach(f),y.forEach(f),this.h()},h(){g(t,"class","svelte-7qrmq"),g(e,"class","svelte-7qrmq"),te(e,"visible",s[0]==="about")},m(b,y){C(b,e,y),d(e,t),d(t,r),d(r,n),d(t,o),d(t,i),i.innerHTML=s[1],d(t,a),d(t,l),l.innerHTML=s[2],d(t,u),d(t,c),d(c,h),d(h,p),m||(_=[oe(h,"click",s[3]),oe(e,"click",s[3])],m=!0)},p(b,[y]){y&1&&te(e,"visible",b[0]==="about")},i:K,o:K,d(b){b&&f(e),m=!1,Pe(_)}}}function du(s,e,t){let r;H(s,Ae,a=>t(0,r=a));const{byline:n,source:o}=ns("copy");return[r,n,o,()=>{_e(Ae,r=void 0,r)}]}class mu extends X{constructor(e){super(),Q(this,e,du,fu,Y,{})}}function pu(s){let e,t,r,n,o,i,a;return t=new lu({}),n=new hu({}),i=new mu({}),{c(){e=v("article"),z(t.$$.fragment),r=U(),z(n.$$.fragment),o=U(),z(i.$$.fragment),this.h()},l(l){e=w(l,"ARTICLE",{class:!0});var u=E(e);F(t.$$.fragment,u),r=M(u),F(n.$$.fragment,u),o=M(u),F(i.$$.fragment,u),u.forEach(f),this.h()},h(){g(e,"class","svelte-17xk6p2")},m(l,u){C(l,e,u),V(t,e,null),d(e,r),V(n,e,null),d(e,o),V(i,e,null),a=!0},p:K,i(l){a||(S(t.$$.fragment,l),S(n.$$.fragment,l),S(i.$$.fragment,l),a=!0)},o(l){R(t.$$.fragment,l),R(n.$$.fragment,l),R(i.$$.fragment,l),a=!1},d(l){l&&f(e),W(t),W(n),W(i)}}}class ku extends X{constructor(e){super(),Q(this,e,null,pu,Y,{})}}function Eu(){console.log("--- --- --- --- --- ---"),console.log("svelte-starter: 3.1.0"),console.log("build: 2022-08-22-13:55"),console.log("--- --- --- --- --- ---")}export{ku as A,bu as M,Ml as g,yu as s,Eu as v};

import{S as Q,i as Z,s as X,l as v,e as ie,V as Ss,m as w,h as f,p,M as d,E as te,W as je,b as R,O as z,o as It,P as be,C as mr,X as $s,Y as Os,Z as js,r as B,n as E,u as H,_ as Qr,L as Y,v as ke,$ as rs,a0 as Is,g as fe,a1 as Ps,d as de,f as O,t as j,w as G,x as F,y as x,B as V,a2 as Rs,a as C,c as N,q as he,a3 as As,a4 as pt,N as ce,G as Ye,a5 as wt,D as Cs,a6 as Gt,a7 as Ns,a8 as Ds,a9 as ns,aa as ss,ab as Zr,z as Us,ac as is,ad as Ms}from"./index-2c34249c.js";import{w as os,r as Ls}from"./index-a5e82436.js";import{g as gt,w as bt,r as Ke,a as Le,l as Er,b as as,i as Te,t as ls,d as _t,e as Ot,p as pr,f as Tr,o as Be,h as Sr,R as en}from"./copy-983e8fbc.js";import{_ as Ft}from"./preload-helper-43c63d57.js";function Bs(s,e){return s==null||e==null?NaN:s<e?-1:s>e?1:s>=e?0:NaN}const Hs=zs(Math.random);function zs(s){return function(t,r=0,n=t.length){let o=n-(r=+r);for(;o;){const i=s()*o--|0,a=t[o+r];t[o+r]=t[i+r],t[i+r]=a}return t}}var tn={},lr={},ur=34,kt=10,cr=13;function us(s){return new Function("d","return {"+s.map(function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'}).join(",")+"}")}function qs(s,e){var t=us(s);return function(r,n){return e(t(r),n,s)}}function rn(s){var e=Object.create(null),t=[];return s.forEach(function(r){for(var n in r)n in e||t.push(e[n]=n)}),t}function we(s,e){var t=s+"",r=t.length;return r<e?new Array(e-r+1).join(0)+t:t}function Gs(s){return s<0?"-"+we(-s,6):s>9999?"+"+we(s,6):we(s,4)}function Fs(s){var e=s.getUTCHours(),t=s.getUTCMinutes(),r=s.getUTCSeconds(),n=s.getUTCMilliseconds();return isNaN(s)?"Invalid Date":Gs(s.getUTCFullYear())+"-"+we(s.getUTCMonth()+1,2)+"-"+we(s.getUTCDate(),2)+(n?"T"+we(e,2)+":"+we(t,2)+":"+we(r,2)+"."+we(n,3)+"Z":r?"T"+we(e,2)+":"+we(t,2)+":"+we(r,2)+"Z":t||e?"T"+we(e,2)+":"+we(t,2)+"Z":"")}function xs(s){var e=new RegExp('["'+s+`
\r]`),t=s.charCodeAt(0);function r(h,g){var m,_,b=n(h,function(S,$){if(m)return m(S,$-1);_=S,m=g?qs(S,g):us(S)});return b.columns=_||[],b}function n(h,g){var m=[],_=h.length,b=0,S=0,$,I=_<=0,T=!1;h.charCodeAt(_-1)===kt&&--_,h.charCodeAt(_-1)===cr&&--_;function y(){if(I)return lr;if(T)return T=!1,tn;var W,L=b,q;if(h.charCodeAt(L)===ur){for(;b++<_&&h.charCodeAt(b)!==ur||h.charCodeAt(++b)===ur;);return(W=b)>=_?I=!0:(q=h.charCodeAt(b++))===kt?T=!0:q===cr&&(T=!0,h.charCodeAt(b)===kt&&++b),h.slice(L+1,W-1).replace(/""/g,'"')}for(;b<_;){if((q=h.charCodeAt(W=b++))===kt)T=!0;else if(q===cr)T=!0,h.charCodeAt(b)===kt&&++b;else if(q!==t)continue;return h.slice(L,W)}return I=!0,h.slice(L,_)}for(;($=y())!==lr;){for(var P=[];$!==tn&&$!==lr;)P.push($),$=y();g&&(P=g(P,S++))==null||m.push(P)}return m}function o(h,g){return h.map(function(m){return g.map(function(_){return c(m[_])}).join(s)})}function i(h,g){return g==null&&(g=rn(h)),[g.map(c).join(s)].concat(o(h,g)).join(`
`)}function a(h,g){return g==null&&(g=rn(h)),o(h,g).join(`
`)}function l(h){return h.map(u).join(`
`)}function u(h){return h.map(c).join(s)}function c(h){return h==null?"":h instanceof Date?Fs(h):e.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:r,parseRows:n,format:i,formatBody:a,formatRows:l,formatRow:u,formatValue:c}}var Vs=xs(","),Ws=Vs.parse;function Js(s){return Math.abs(s=Math.round(s))>=1e21?s.toLocaleString("en").replace(/,/g,""):s.toString(10)}function zt(s,e){if((t=(s=e?s.toExponential(e-1):s.toExponential()).indexOf("e"))<0)return null;var t,r=s.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+s.slice(t+1)]}function Ks(s){return s=zt(Math.abs(s)),s?s[1]:NaN}function Ys(s,e){return function(t,r){for(var n=t.length,o=[],i=0,a=s[0],l=0;n>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(t.substring(n-=a,n+a)),!((l+=a+1)>r));)a=s[i=(i+1)%s.length];return o.reverse().join(e)}}function Xs(s){return function(e){return e.replace(/[0-9]/g,function(t){return s[+t]})}}var Qs=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function gr(s){if(!(e=Qs.exec(s)))throw new Error("invalid format: "+s);var e;return new $r({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}gr.prototype=$r.prototype;function $r(s){this.fill=s.fill===void 0?" ":s.fill+"",this.align=s.align===void 0?">":s.align+"",this.sign=s.sign===void 0?"-":s.sign+"",this.symbol=s.symbol===void 0?"":s.symbol+"",this.zero=!!s.zero,this.width=s.width===void 0?void 0:+s.width,this.comma=!!s.comma,this.precision=s.precision===void 0?void 0:+s.precision,this.trim=!!s.trim,this.type=s.type===void 0?"":s.type+""}$r.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Zs(s){e:for(var e=s.length,t=1,r=-1,n;t<e;++t)switch(s[t]){case".":r=n=t;break;case"0":r===0&&(r=t),n=t;break;default:if(!+s[t])break e;r>0&&(r=0);break}return r>0?s.slice(0,r)+s.slice(n+1):s}var cs;function ei(s,e){var t=zt(s,e);if(!t)return s+"";var r=t[0],n=t[1],o=n-(cs=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,i=r.length;return o===i?r:o>i?r+new Array(o-i+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+zt(s,Math.max(0,e+o-1))[0]}function nn(s,e){var t=zt(s,e);if(!t)return s+"";var r=t[0],n=t[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}const sn={"%":(s,e)=>(s*100).toFixed(e),b:s=>Math.round(s).toString(2),c:s=>s+"",d:Js,e:(s,e)=>s.toExponential(e),f:(s,e)=>s.toFixed(e),g:(s,e)=>s.toPrecision(e),o:s=>Math.round(s).toString(8),p:(s,e)=>nn(s*100,e),r:nn,s:ei,X:s=>Math.round(s).toString(16).toUpperCase(),x:s=>Math.round(s).toString(16)};function on(s){return s}var an=Array.prototype.map,ln=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function ti(s){var e=s.grouping===void 0||s.thousands===void 0?on:Ys(an.call(s.grouping,Number),s.thousands+""),t=s.currency===void 0?"":s.currency[0]+"",r=s.currency===void 0?"":s.currency[1]+"",n=s.decimal===void 0?".":s.decimal+"",o=s.numerals===void 0?on:Xs(an.call(s.numerals,String)),i=s.percent===void 0?"%":s.percent+"",a=s.minus===void 0?"\u2212":s.minus+"",l=s.nan===void 0?"NaN":s.nan+"";function u(h){h=gr(h);var g=h.fill,m=h.align,_=h.sign,b=h.symbol,S=h.zero,$=h.width,I=h.comma,T=h.precision,y=h.trim,P=h.type;P==="n"?(I=!0,P="g"):sn[P]||(T===void 0&&(T=12),y=!0,P="g"),(S||g==="0"&&m==="=")&&(S=!0,g="0",m="=");var W=b==="$"?t:b==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():"",L=b==="$"?r:/[%p]/.test(P)?i:"",q=sn[P],U=/[defgprs%]/.test(P);T=T===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function re(D){var J=W,M=L,k,A,K;if(P==="c")M=q(D)+M,D="";else{D=+D;var ee=D<0||1/D<0;if(D=isNaN(D)?l:q(Math.abs(D),T),y&&(D=Zs(D)),ee&&+D==0&&_!=="+"&&(ee=!1),J=(ee?_==="("?_:a:_==="-"||_==="("?"":_)+J,M=(P==="s"?ln[8+cs/3]:"")+M+(ee&&_==="("?")":""),U){for(k=-1,A=D.length;++k<A;)if(K=D.charCodeAt(k),48>K||K>57){M=(K===46?n+D.slice(k+1):D.slice(k))+M,D=D.slice(0,k);break}}}I&&!S&&(D=e(D,1/0));var ve=J.length+D.length+M.length,le=ve<$?new Array($-ve+1).join(g):"";switch(I&&S&&(D=e(le+D,le.length?$-M.length:1/0),le=""),m){case"<":D=J+D+M+le;break;case"=":D=J+le+D+M;break;case"^":D=le.slice(0,ve=le.length>>1)+J+D+M+le.slice(ve);break;default:D=le+J+D+M;break}return o(D)}return re.toString=function(){return h+""},re}function c(h,g){var m=u((h=gr(h),h.type="f",h)),_=Math.max(-8,Math.min(8,Math.floor(Ks(g)/3)))*3,b=Math.pow(10,-_),S=ln[8+_/3];return function($){return m(b*$)+S}}return{format:u,formatPrefix:c}}var Ut,hs;ri({thousands:",",grouping:[3],currency:["$",""]});function ri(s){return Ut=ti(s),hs=Ut.format,Ut.formatPrefix,Ut}function un(s,e,t){const r=s.slice();return r[5]=e[t],r}function cn(s){let e,t;return{c(){e=v("link"),this.h()},l(r){e=w(r,"LINK",{rel:!0,href:!0,as:!0,type:!0,crossorigin:!0}),this.h()},h(){p(e,"rel","preload"),p(e,"href",t=s[5]),p(e,"as","font"),p(e,"type","font/woff2"),p(e,"crossorigin","")},m(r,n){R(r,e,n)},p(r,n){n&16&&t!==(t=r[5])&&p(e,"href",t)},d(r){r&&f(e)}}}function ni(s){let e,t,r,n,o,i,a,l,u,c,h,g,m,_,b,S,$,I,T,y,P,W,L,q,U,re;document.title=e=s[0];let D=s[4],J=[];for(let M=0;M<D.length;M+=1)J[M]=cn(un(s,D,M));return{c(){t=v("meta"),r=v("meta"),n=v("meta"),o=v("meta"),i=v("meta"),a=v("meta"),l=v("meta"),u=v("meta"),c=v("meta"),h=v("meta"),m=v("meta"),_=v("meta"),b=v("meta"),S=v("meta"),$=v("meta"),I=v("meta"),T=v("meta"),y=v("meta"),P=v("meta"),L=v("meta"),q=v("link");for(let M=0;M<J.length;M+=1)J[M].c();re=ie(),this.h()},l(M){const k=Ss('[data-svelte="svelte-1htu80s"]',document.head);t=w(k,"META",{name:!0,content:!0}),r=w(k,"META",{name:!0,content:!0}),n=w(k,"META",{name:!0,content:!0}),o=w(k,"META",{property:!0,content:!0}),i=w(k,"META",{property:!0,content:!0}),a=w(k,"META",{property:!0,content:!0}),l=w(k,"META",{property:!0,content:!0}),u=w(k,"META",{property:!0,content:!0}),c=w(k,"META",{property:!0,content:!0}),h=w(k,"META",{property:!0,content:!0}),m=w(k,"META",{property:!0,content:!0}),_=w(k,"META",{property:!0,content:!0}),b=w(k,"META",{property:!0,content:!0}),S=w(k,"META",{name:!0,content:!0}),$=w(k,"META",{name:!0,content:!0}),I=w(k,"META",{name:!0,content:!0}),T=w(k,"META",{name:!0,content:!0}),y=w(k,"META",{name:!0,content:!0}),P=w(k,"META",{name:!0,content:!0}),L=w(k,"META",{name:!0,content:!0}),q=w(k,"LINK",{rel:!0,href:!0});for(let A=0;A<J.length;A+=1)J[A].l(k);re=ie(),k.forEach(f),this.h()},h(){p(t,"name","description"),p(t,"content",s[1]),p(r,"name","author"),p(r,"content","The Pudding"),p(n,"name","news_keywords"),p(n,"content",s[3]),p(o,"property","og:title"),p(o,"content",s[0]),p(i,"property","og:site_name"),p(i,"content","The Pudding"),p(a,"property","og:url"),p(a,"content",s[2]),p(l,"property","og:description"),p(l,"content",s[1]),p(u,"property","og:type"),p(u,"content","article"),p(c,"property","og:locale"),p(c,"content","en_US"),p(h,"property","og:image"),p(h,"content",g=s[2]+"/assets/social-facebook.jpg"),p(m,"property","og:image:type"),p(m,"content","image/jpeg"),p(_,"property","og:image:width"),p(_,"content","1200"),p(b,"property","og:image:height"),p(b,"content","600"),p(S,"name","twitter:card"),p(S,"content","summary_large_image"),p($,"name","twitter:site"),p($,"content","https://pudding.cool"),p(I,"name","twitter:creator"),p(I,"content","@puddingviz"),p(T,"name","twitter:title"),p(T,"content",s[0]),p(y,"name","twitter:description"),p(y,"content",s[1]),p(P,"name","twitter:image:src"),p(P,"content",W=s[2]+"/assets/social-twitter.jpg"),p(L,"name","robots"),p(L,"content","max-image-preview:large"),p(q,"rel","canonical"),p(q,"href",U=s[2]+"/")},m(M,k){d(document.head,t),d(document.head,r),d(document.head,n),d(document.head,o),d(document.head,i),d(document.head,a),d(document.head,l),d(document.head,u),d(document.head,c),d(document.head,h),d(document.head,m),d(document.head,_),d(document.head,b),d(document.head,S),d(document.head,$),d(document.head,I),d(document.head,T),d(document.head,y),d(document.head,P),d(document.head,L),d(document.head,q);for(let A=0;A<J.length;A+=1)J[A].m(document.head,null);d(document.head,re)},p(M,[k]){if(k&1&&e!==(e=M[0])&&(document.title=e),k&2&&p(t,"content",M[1]),k&8&&p(n,"content",M[3]),k&1&&p(o,"content",M[0]),k&4&&p(a,"content",M[2]),k&2&&p(l,"content",M[1]),k&4&&g!==(g=M[2]+"/assets/social-facebook.jpg")&&p(h,"content",g),k&1&&p(T,"content",M[0]),k&2&&p(y,"content",M[1]),k&4&&W!==(W=M[2]+"/assets/social-twitter.jpg")&&p(P,"content",W),k&4&&U!==(U=M[2]+"/")&&p(q,"href",U),k&16){D=M[4];let A;for(A=0;A<D.length;A+=1){const K=un(M,D,A);J[A]?J[A].p(K,k):(J[A]=cn(K),J[A].c(),J[A].m(re.parentNode,re))}for(;A<J.length;A+=1)J[A].d(1);J.length=D.length}},i:te,o:te,d(M){f(t),f(r),f(n),f(o),f(i),f(a),f(l),f(u),f(c),f(h),f(m),f(_),f(b),f(S),f($),f(I),f(T),f(y),f(P),f(L),f(q),je(J,M),f(re)}}}function si(s,e,t){let{title:r="Title TK"}=e,{description:n="Description TK"}=e,{url:o="https://pudding.cool"}=e,{keywords:i=""}=e,{preloadFont:a=[]}=e;return s.$$set=l=>{"title"in l&&t(0,r=l.title),"description"in l&&t(1,n=l.description),"url"in l&&t(2,o=l.url),"keywords"in l&&t(3,i=l.keywords),"preloadFont"in l&&t(4,a=l.preloadFont)},[r,n,o,i,a]}class ku extends Q{constructor(e){super(),Z(this,e,si,ni,X,{title:0,description:1,url:2,keywords:3,preloadFont:4})}}let Fe,Tt;const vt=os(0),fs=s=>{Tt||(Tt=s);const e=Math.round(s-Tt);Tt=s,vt.update(t=>t+e),Fe=window.requestAnimationFrame(fs)},St={start(){Fe||(Tt=null,Fe=window.requestAnimationFrame(fs))},stop(){Fe&&(window.cancelAnimationFrame(Fe),Fe=null)},toggle(){Fe?St.stop():St.start()},set(s){typeof s=="number"&&vt.set(s)},reset(){vt.set(0)}},Ht=({lemmas:s,corpus:e})=>!!s.split("|").filter(r=>!!e.find(n=>n===r)).length;async function xt(s){const t=await(await fetch(s)).text();return Ws(t)}async function ii(s){const e=`https://pudding.cool/games/words-against-strangers-data/wod-answers/${s}.csv?version=${Date.now()}`;return(await xt(e)).map(n=>({...n,round:+n.round,timestamp:+n.timestamp,points:+n.points}))}function oi(s,e,t){let r,n,o,i,a,l;z(s,gt,m=>t(2,r=m)),z(s,bt,m=>t(3,n=m)),z(s,Ke,m=>t(4,o=m)),z(s,Le,m=>t(5,i=m)),z(s,vt,m=>t(0,a=m)),z(s,Er,m=>t(6,l=m));let u=[];const c=m=>Ht({lemmas:m,corpus:l}),h=({lemmas:m})=>{const _=!c(m);return{valid:_,reason:_?void 0:0}},g=()=>{const m=u.findIndex(_=>_.round===o&&a>=_.timestamp);if(m>-1){const[_]=u.splice(m,1),b={..._,...h(_)};be(Le,i.wod[o]=[...i.wod[o],b],i)}};return It(async()=>{n||(u=await ii(r))}),s.$$.update=()=>{s.$$.dirty&1&&g()},[a]}class ai extends Q{constructor(e){super(),Z(this,e,oi,null,X,{})}}function li(s){const e=s-1;return e*e*e+1}function ui(s){return Math.pow(s,4)}function hn(s){return Object.prototype.toString.call(s)==="[object Date]"}function _r(s,e){if(s===e||s!==s)return()=>s;const t=typeof s;if(t!==typeof e||Array.isArray(s)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(s)){const r=e.map((n,o)=>_r(s[o],n));return n=>r.map(o=>o(n))}if(t==="object"){if(!s||!e)throw new Error("Object cannot be null");if(hn(s)&&hn(e)){s=s.getTime(),e=e.getTime();const o=e-s;return i=>new Date(s+i*o)}const r=Object.keys(e),n={};return r.forEach(o=>{n[o]=_r(s[o],e[o])}),o=>{const i={};return r.forEach(a=>{i[a]=n[a](o)}),i}}if(t==="number"){const r=e-s;return n=>s+n*r}throw new Error(`Cannot interpolate ${t} values`)}function ds(s,e={}){const t=os(s);let r,n=s;function o(i,a){if(s==null)return t.set(s=i),Promise.resolve();n=i;let l=r,u=!1,{delay:c=0,duration:h=400,easing:g=js,interpolate:m=_r}=mr(mr({},e),a);if(h===0)return l&&(l.abort(),l=null),t.set(s=n),Promise.resolve();const _=$s()+c;let b;return r=Os(S=>{if(S<_)return!0;u||(b=m(s,i),typeof h=="function"&&(h=h(s,i)),u=!0),l&&(l.abort(),l=null);const $=S-_;return $>h?(t.set(s=i),!1):(t.set(s=b(g($/h))),!0)}),r.promise}return{set:o,update:(i,a)=>o(i(n,s),a),subscribe:t.subscribe}}function ci(s,{delay:e=0,duration:t=400,easing:r=li,x:n=0,y:o=0,opacity:i=0}={}){const a=getComputedStyle(s),l=+a.opacity,u=a.transform==="none"?"":a.transform,c=l*(1-i);return{delay:e,duration:t,easing:r,css:(h,g)=>`
			transform: ${u} translate(${(1-h)*n}px, ${(1-h)*o}px);
			opacity: ${l-c*g}`}}function hi(s){let e,t,r,n,o,i;return{c(){e=v("li"),t=v("span"),r=B(s[1]),this.h()},l(a){e=w(a,"LI",{class:!0,style:!0});var l=E(e);t=w(l,"SPAN",{class:!0});var u=E(t);r=H(u,s[1]),u.forEach(f),l.forEach(f),this.h()},h(){p(t,"class","svelte-16xj2sf"),p(e,"class",n=Qr(s[3])+" svelte-16xj2sf"),p(e,"style",o=`--height: ${s[4]}px`),Y(e,"wod",s[0])},m(a,l){R(a,e,l),d(e,t),d(t,r)},p(a,[l]){s=a,l&2&&ke(r,s[1]),l&8&&n!==(n=Qr(s[3])+" svelte-16xj2sf")&&p(e,"class",n),l&16&&o!==(o=`--height: ${s[4]}px`)&&p(e,"style",o),l&9&&Y(e,"wod",s[0])},i(a){i||rs(()=>{i=Is(e,ci,{y:s[2],duration:s[5]*(s[0]?.5:1),easing:ui}),i.start()})},o:te,d(a){a&&f(e)}}}function fi(s,e,t){let r,n,o;z(s,as,g=>t(5,o=g));let{wod:i}=e,{text:a}=e,{points:l}=e,{liHeight:u}=e,{startOffset:c}=e;return ds(0,{duration:o}).set(1).then(()=>{}),s.$$set=g=>{"wod"in g&&t(0,i=g.wod),"text"in g&&t(1,a=g.text),"points"in g&&t(6,l=g.points),"liHeight"in g&&t(7,u=g.liHeight),"startOffset"in g&&t(2,c=g.startOffset)},s.$$.update=()=>{s.$$.dirty&192&&t(4,r=l*u),s.$$.dirty&1&&t(3,n=i?"combo-wod":"combo-user")},[i,a,c,n,r,o,l,u]}class di extends Q{constructor(e){super(),Z(this,e,fi,hi,X,{wod:0,text:1,points:6,liHeight:7,startOffset:2})}}function fn(s,e,t){const r=s.slice();return r[5]=e[t].valid,r[6]=e[t].text,r[7]=e[t].revealWod,r[8]=e[t].points,r}function dn(s,e){let t,r,n;return r=new di({props:{wod:e[1],valid:e[5],text:e[6],revealWod:e[7],points:e[8],liHeight:e[2],startOffset:e[3]}}),{key:s,first:null,c(){t=ie(),G(r.$$.fragment),this.h()},l(o){t=ie(),F(r.$$.fragment,o),this.h()},h(){this.first=t},m(o,i){R(o,t,i),x(r,o,i),n=!0},p(o,i){e=o;const a={};i&2&&(a.wod=e[1]),i&1&&(a.valid=e[5]),i&1&&(a.text=e[6]),i&1&&(a.revealWod=e[7]),i&1&&(a.points=e[8]),i&4&&(a.liHeight=e[2]),i&8&&(a.startOffset=e[3]),r.$set(a)},i(o){n||(O(r.$$.fragment,o),n=!0)},o(o){j(r.$$.fragment,o),n=!1},d(o){o&&f(t),V(r,o)}}}function mi(s){let e,t=[],r=new Map,n,o=s[0];const i=a=>a[6];for(let a=0;a<o.length;a+=1){let l=fn(s,o,a),u=i(l);r.set(u,t[a]=dn(u,l))}return{c(){e=v("ul");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=w(a,"UL",{class:!0});var l=E(e);for(let u=0;u<t.length;u+=1)t[u].l(l);l.forEach(f),this.h()},h(){p(e,"class","svelte-1ri275p"),Y(e,"wod",s[1]),Y(e,"in-modal",s[4])},m(a,l){R(a,e,l);for(let u=0;u<t.length;u+=1)t[u].m(e,null);n=!0},p(a,[l]){l&15&&(o=a[0],fe(),t=Ps(t,l,i,1,a,o,r,e,Rs,dn,null,fn),de()),l&2&&Y(e,"wod",a[1]),l&16&&Y(e,"in-modal",a[4])},i(a){if(!n){for(let l=0;l<o.length;l+=1)O(t[l]);n=!0}},o(a){for(let l=0;l<t.length;l+=1)j(t[l]);n=!1},d(a){a&&f(e);for(let l=0;l<t.length;l+=1)t[l].d()}}}function pi(s,e,t){let r;z(s,Te,l=>t(4,r=l));let{guesses:n}=e,{wod:o=!1}=e,{liHeight:i}=e,{startOffset:a}=e;return s.$$set=l=>{"guesses"in l&&t(0,n=l.guesses),"wod"in l&&t(1,o=l.wod),"liHeight"in l&&t(2,i=l.liHeight),"startOffset"in l&&t(3,a=l.startOffset)},[n,o,i,a,r]}class ms extends Q{constructor(e){super(),Z(this,e,pi,mi,X,{guesses:0,wod:1,liHeight:2,startOffset:3})}}function gi(s){let e,t,r,n,o,i,a;return{c(){e=v("div"),t=v("div"),r=v("span"),n=B(s[0]),o=C(),i=v("p"),a=B(s[1]),this.h()},l(l){e=w(l,"DIV",{class:!0,style:!0});var u=E(e);t=w(u,"DIV",{class:!0});var c=E(t);r=w(c,"SPAN",{class:!0});var h=E(r);n=H(h,s[0]),h.forEach(f),c.forEach(f),o=N(u),i=w(u,"P",{class:!0});var g=E(i);a=H(g,s[1]),g.forEach(f),u.forEach(f),this.h()},h(){p(r,"class","points svelte-1ciyxsw"),p(t,"class","pill combo-mark svelte-1ciyxsw"),Y(t,"triple",s[5]),Y(t,"above",s[2]),Y(t,"below",s[3]),Y(t,"hasArrowBelow",s[7]),he(t,"bottom",s[6],!1),p(i,"class","name svelte-1ciyxsw"),p(e,"class","wrapper svelte-1ciyxsw"),he(e,"--delay",s[8]+"ms"),he(e,"--gutter-width",ps+"px"),Y(e,"wod",s[4]),Y(e,"in-modal",s[9])},m(l,u){R(l,e,u),d(e,t),d(t,r),d(r,n),d(e,o),d(e,i),d(i,a)},p(l,[u]){u&1&&ke(n,l[0]),u&32&&Y(t,"triple",l[5]),u&4&&Y(t,"above",l[2]),u&8&&Y(t,"below",l[3]),u&128&&Y(t,"hasArrowBelow",l[7]),u&64&&he(t,"bottom",l[6],!1),u&2&&ke(a,l[1]),u&256&&he(e,"--delay",l[8]+"ms"),u&16&&Y(e,"wod",l[4]),u&512&&Y(e,"in-modal",l[9])},i:te,o:te,d(l){l&&f(e)}}}const ps=36;function _i(s,e,t){let r,n,o,i,a,l,u;z(s,as,_=>t(8,l=_)),z(s,Te,_=>t(9,u=_));let{points:c}=e,{name:h}=e,{y:g=0}=e,{above:m}=e;return s.$$set=_=>{"points"in _&&t(0,c=_.points),"name"in _&&t(1,h=_.name),"y"in _&&t(10,g=_.y),"above"in _&&t(2,m=_.above)},s.$$.update=()=>{s.$$.dirty&2&&t(4,r=h!=="you"),s.$$.dirty&1040&&t(3,n=r?g<=ps:g<=0),s.$$.dirty&25&&t(7,o=r&&n&&c>1),s.$$.dirty&1048&&t(6,i=`${r&&n?0:g}px`),s.$$.dirty&1&&t(5,a=c>99)},[c,h,m,n,r,a,i,o,l,u,g]}class gs extends Q{constructor(e){super(),Z(this,e,_i,gi,X,{points:0,name:1,y:10,above:2})}}const mn={"20rem":"(min-width: 20rem)","30rem":"(min-width: 30rem)","40rem":"(min-width: 40rem)","50rem":"(min-width: 50rem)","60rem":"(min-width: 60rem)","70rem":"(min-width: 70rem)","80rem":"(min-width: 80rem)",reducedMotion:"(prefers-reduced-motion: reduce)"};function vi(s){const e={classNames:""},t=[];for(let r in s)e[r]=s[r].matches,e[r]&&t.push(`mq-${r}`);return e.classNames=t.join(" "),e}const wi=Ls({},s=>{const e={},t=()=>s(vi(e));{for(let r in mn)e[r]=window.matchMedia(mn[r]),e[r].addListener(t);t()}return()=>{for(let r in e)e[r].removeListener(t)}});function pn(s){let e,t,r,n,o;return e=new ms({props:{guesses:s[4],wod:!0,liHeight:s[3]}}),n=new gs({props:{name:s[11].name,points:s[6].wod,y:s[1],above:s[7]}}),{c(){t=v("div"),G(e.$$.fragment),r=C(),G(n.$$.fragment),this.h()},l(i){t=w(i,"DIV",{style:!0});var a=E(t);F(e.$$.fragment,a),r=N(i),F(n.$$.fragment,i),this.h()},h(){he(t,"display","contents"),he(t,"--offsetY",s[9])},m(i,a){R(i,t,a),x(e,t,null),R(i,r,a),x(n,i,a),o=!0},p(i,a){a&512&&he(t,"--offsetY",i[9]);const l={};a&16&&(l.guesses=i[4]),a&8&&(l.liHeight=i[3]),e.$set(l);const u={};a&2048&&(u.name=i[11].name),a&64&&(u.points=i[6].wod),a&2&&(u.y=i[1]),a&128&&(u.above=i[7]),n.$set(u)},i(i){o||(O(e.$$.fragment,i),O(n.$$.fragment,i),o=!0)},o(i){j(e.$$.fragment,i),j(n.$$.fragment,i),o=!1},d(i){i&&f(t),V(e,i),i&&f(r),V(n,i)}}}function bi(s){let e,t,r,n,o,i,a,l;t=new gs({props:{name:"you",points:s[6].user,y:s[2]}}),n=new ms({props:{guesses:s[5],liHeight:s[3],startOffset:s[8]}});let u=!s[10]&&pn(s);return{c(){e=v("div"),G(t.$$.fragment),r=C(),o=v("div"),G(n.$$.fragment),i=C(),u&&u.c(),this.h()},l(c){e=w(c,"DIV",{id:!0,class:!0});var h=E(e);F(t.$$.fragment,h),r=N(h),o=w(h,"DIV",{style:!0});var g=E(o);F(n.$$.fragment,g),i=N(h),u&&u.l(h),h.forEach(f),this.h()},h(){he(o,"display","contents"),he(o,"--offsetY",s[9]),p(e,"id","play-guesses"),p(e,"class","svelte-9xp0da"),rs(()=>s[22].call(e))},m(c,h){R(c,e,h),x(t,e,null),d(e,r),d(e,o),x(n,o,null),d(e,i),u&&u.m(e,null),a=As(e,s[22].bind(e)),l=!0},p(c,[h]){const g={};h&64&&(g.points=c[6].user),h&4&&(g.y=c[2]),t.$set(g),h&512&&he(o,"--offsetY",c[9]);const m={};h&32&&(m.guesses=c[5]),h&8&&(m.liHeight=c[3]),h&256&&(m.startOffset=c[8]),n.$set(m),c[10]?u&&(fe(),j(u,1,1,()=>{u=null}),de()):u?(u.p(c,h),h&1024&&O(u,1)):(u=pn(c),u.c(),O(u,1),u.m(e,null))},i(c){l||(O(t.$$.fragment,c),O(n.$$.fragment,c),O(u),l=!0)},o(c){j(t.$$.fragment,c),j(n.$$.fragment,c),j(u),l=!1},d(c){c&&f(e),V(t),V(n),u&&u.d(),a()}}}const yi=.75,gn=2;function ki(s,e,t){let r,n,o,i,a,l,u,c,h,g,m,_,b,S,$,I,T,y,P,W,L;z(s,ls,D=>t(6,T=D)),z(s,Le,D=>t(20,y=D)),z(s,wi,D=>t(21,P=D)),z(s,bt,D=>t(10,W=D)),z(s,_t,D=>t(11,L=D));const q=D=>D.reason===void 0;let U=0;function re(){U=this.clientHeight,t(0,U)}return s.$$.update=()=>{s.$$.dirty&2097152&&t(3,r=P["40rem"]?32:24),s.$$.dirty&1048576&&t(5,n=[].concat(...y.user).filter(q)),s.$$.dirty&1048576&&t(4,o=[].concat(...y.wod).filter(q)),s.$$.dirty&32&&t(19,i=n.length*gn),s.$$.dirty&16&&t(18,a=o.length*gn),s.$$.dirty&524360&&t(13,l=T.user*r-i),s.$$.dirty&262216&&t(17,u=T.wod*r-a),s.$$.dirty&139264&&t(12,c=u-l),s.$$.dirty&1&&t(14,h=U*yi),s.$$.dirty&24576&&t(16,g=l-h),s.$$.dirty&65536&&t(15,m=Math.max(0,g)),s.$$.dirty&32768&&t(9,_=`${m}px`),s.$$.dirty&81921&&t(8,b=(U-h+Math.min(0,g)*-1)*-1),s.$$.dirty&57344&&t(2,S=m>0?h:l),s.$$.dirty&4101&&t(1,$=Math.min(U,Math.max(0,c+S))),s.$$.dirty&3&&t(7,I=$===U)},[U,$,S,r,o,n,T,I,b,_,W,L,c,l,h,m,g,u,a,i,y,P,re]}class Ei extends Q{constructor(e){super(),Z(this,e,ki,bi,X,{})}}function Ti(s){let e,t,r,n,o,i,a,l,u,c,h,g;return{c(){e=v("div"),t=v("form"),r=v("div"),n=v("div"),o=B(s[0]),i=C(),a=v("input"),l=C(),u=v("button"),c=B("\u2192"),this.h()},l(m){e=w(m,"DIV",{id:!0,class:!0});var _=E(e);t=w(_,"FORM",{class:!0});var b=E(t);r=w(b,"DIV",{class:!0});var S=E(r);n=w(S,"DIV",{class:!0,"aria-hidden":!0});var $=E(n);o=H($,s[0]),$.forEach(f),i=N(S),a=w(S,"INPUT",{spellcheck:!0,maxlength:!0,placeholder:!0,class:!0}),l=N(S),u=w(S,"BUTTON",{type:!0,"aria-label":!0,class:!0});var I=E(u);c=H(I,"\u2192"),I.forEach(f),S.forEach(f),b.forEach(f),_.forEach(f),this.h()},h(){p(n,"class","bg svelte-heuf8m"),p(n,"aria-hidden","true"),p(a,"spellcheck","false"),p(a,"maxlength","15"),p(a,"placeholder","enter word"),a.disabled=s[2],p(a,"class","svelte-heuf8m"),p(u,"type","submit"),p(u,"aria-label","submit"),p(u,"class","svelte-heuf8m"),p(r,"class","box svelte-heuf8m"),p(t,"class","svelte-heuf8m"),p(e,"id","play-input"),p(e,"class","svelte-heuf8m"),Y(e,"in-modal",s[3])},m(m,_){R(m,e,_),d(e,t),d(t,r),d(r,n),d(n,o),d(r,i),d(r,a),pt(a,s[0]),s[8](a),d(r,l),d(r,u),d(u,c),h||(g=[ce(a,"input",s[7]),ce(t,"submit",s[4])],h=!0)},p(m,[_]){_&1&&ke(o,m[0]),_&4&&(a.disabled=m[2]),_&1&&a.value!==m[0]&&pt(a,m[0]),_&8&&Y(e,"in-modal",m[3])},i:te,o:te,d(m){m&&f(e),s[8](null),h=!1,Ye(g)}}}function Si(s,e,t){let r,n,o;z(s,Ot,b=>t(6,n=b)),z(s,Te,b=>t(3,o=b));const i=wt();let{value:a=""}=e;const l=()=>t(0,a="");let u;const c=()=>{a&&i("submit",a),t(0,a="")},h=b=>{b.preventDefault(),t(0,a=a.trim().toLowerCase()),c()},g=async()=>{await Cs(),u.focus()};function m(){a=this.value,t(0,a)}function _(b){Gt[b?"unshift":"push"](()=>{u=b,t(1,u)})}return s.$$set=b=>{"value"in b&&t(0,a=b.value)},s.$$.update=()=>{s.$$.dirty&64&&t(2,r=!n),s.$$.dirty&64&&n&&g()},[a,u,r,o,h,l,n,m,_]}class $i extends Q{constructor(e){super(),Z(this,e,Si,Ti,X,{value:0,reset:5})}get reset(){return this.$$.ctx[5]}}const Oi=[{row:0,value:"q"},{row:0,value:"w"},{row:0,value:"e"},{row:0,value:"r"},{row:0,value:"t"},{row:0,value:"y"},{row:0,value:"u"},{row:0,value:"i"},{row:0,value:"o"},{row:0,value:"p"},{row:1,value:"a"},{row:1,value:"s"},{row:1,value:"d"},{row:1,value:"f"},{row:1,value:"g"},{row:1,value:"h"},{row:1,value:"j"},{row:1,value:"k"},{row:1,value:"l"},{row:2,value:"Shift"},{row:2,value:"z"},{row:2,value:"x"},{row:2,value:"c"},{row:2,value:"v"},{row:2,value:"b"},{row:2,value:"n"},{row:2,value:"m"},{row:2,value:"Backspace"},{row:3,value:"Page1"},{row:3,value:","},{row:3,value:"Space"},{row:3,value:"."},{row:3,value:"Enter"},{row:0,value:"1",page:1},{row:0,value:"2",page:1},{row:0,value:"3",page:1},{row:0,value:"4",page:1},{row:0,value:"5",page:1},{row:0,value:"6",page:1},{row:0,value:"7",page:1},{row:0,value:"8",page:1},{row:0,value:"9",page:1},{row:0,value:"0",page:1},{row:1,value:"!",page:1},{row:1,value:"@",page:1},{row:1,value:"#",page:1},{row:1,value:"$",page:1},{row:1,value:"%",page:1},{row:1,value:"^",page:1},{row:1,value:"&",page:1},{row:1,value:"*",page:1},{row:1,value:"(",page:1},{row:1,value:")",page:1},{row:2,value:"-",page:1},{row:2,value:"_",page:1},{row:2,value:"=",page:1},{row:2,value:"+",page:1},{row:2,value:";",page:1},{row:2,value:":",page:1},{row:2,value:"'",page:1},{row:2,value:'"',page:1},{row:2,value:"<",page:1},{row:2,value:">",page:1},{row:3,value:"Page0",page:1},{row:3,value:"/",page:1},{row:3,value:"?",page:1},{row:3,value:"[",page:1},{row:3,value:"]",page:1},{row:3,value:"{",page:1},{row:3,value:"}",page:1},{row:3,value:"|",page:1},{row:3,value:"\\",page:1},{row:3,value:"~",page:1}],ji=[{row:0,value:"q"},{row:0,value:"w"},{row:0,value:"e"},{row:0,value:"r"},{row:0,value:"t"},{row:0,value:"y"},{row:0,value:"u"},{row:0,value:"i"},{row:0,value:"o"},{row:0,value:"p"},{row:1,value:"a"},{row:1,value:"s"},{row:1,value:"d"},{row:1,value:"f"},{row:1,value:"g"},{row:1,value:"h"},{row:1,value:"j"},{row:1,value:"k"},{row:1,value:"l"},{row:2,value:"z"},{row:2,value:"x"},{row:2,value:"c"},{row:2,value:"v"},{row:2,value:"b"},{row:2,value:"n"},{row:2,value:"m"},{row:2,value:"Backspace"}],Ii=[{row:0,value:"q"},{row:0,value:"w"},{row:0,value:"e"},{row:0,value:"r"},{row:0,value:"t"},{row:0,value:"y"},{row:0,value:"u"},{row:0,value:"i"},{row:0,value:"o"},{row:0,value:"p"},{row:1,value:"a"},{row:1,value:"s"},{row:1,value:"d"},{row:1,value:"f"},{row:1,value:"g"},{row:1,value:"h"},{row:1,value:"j"},{row:1,value:"k"},{row:1,value:"l"},{row:2,value:"Enter"},{row:2,value:"z"},{row:2,value:"x"},{row:2,value:"c"},{row:2,value:"v"},{row:2,value:"b"},{row:2,value:"n"},{row:2,value:"m"},{row:2,value:"Backspace"}],Pi=[{row:0,value:"a"},{row:0,value:"z"},{row:0,value:"e"},{row:0,value:"r"},{row:0,value:"t"},{row:0,value:"y"},{row:0,value:"u"},{row:0,value:"i"},{row:0,value:"o"},{row:0,value:"p"},{row:1,value:"q"},{row:1,value:"s"},{row:1,value:"d"},{row:1,value:"f"},{row:1,value:"g"},{row:1,value:"h"},{row:1,value:"j"},{row:1,value:"k"},{row:1,value:"l"},{row:1,value:"m"},{row:2,value:"Shift"},{row:2,value:"w"},{row:2,value:"x"},{row:2,value:"c"},{row:2,value:"v"},{row:2,value:"b"},{row:2,value:"n"},{row:2,value:"Backspace"},{row:3,value:"Page1"},{row:3,value:","},{row:3,value:"Space"},{row:3,value:"."},{row:3,value:"Enter"},{row:0,value:"1",page:1},{row:0,value:"2",page:1},{row:0,value:"3",page:1},{row:0,value:"4",page:1},{row:0,value:"5",page:1},{row:0,value:"6",page:1},{row:0,value:"7",page:1},{row:0,value:"8",page:1},{row:0,value:"9",page:1},{row:0,value:"0",page:1},{row:1,value:"!",page:1},{row:1,value:"@",page:1},{row:1,value:"#",page:1},{row:1,value:"$",page:1},{row:1,value:"%",page:1},{row:1,value:"^",page:1},{row:1,value:"&",page:1},{row:1,value:"*",page:1},{row:1,value:"(",page:1},{row:1,value:")",page:1},{row:2,value:"-",page:1},{row:2,value:"_",page:1},{row:2,value:"=",page:1},{row:2,value:"+",page:1},{row:2,value:";",page:1},{row:2,value:":",page:1},{row:2,value:"'",page:1},{row:2,value:'"',page:1},{row:2,value:"<",page:1},{row:2,value:">",page:1},{row:3,value:"Page0",page:1},{row:3,value:"/",page:1},{row:3,value:"?",page:1},{row:3,value:"[",page:1},{row:3,value:"]",page:1},{row:3,value:"{",page:1},{row:3,value:"}",page:1},{row:3,value:"|",page:1},{row:3,value:"\\",page:1},{row:3,value:"~",page:1}],Ri=[{row:0,value:"a"},{row:0,value:"z"},{row:0,value:"e"},{row:0,value:"r"},{row:0,value:"t"},{row:0,value:"y"},{row:0,value:"u"},{row:0,value:"i"},{row:0,value:"o"},{row:0,value:"p"},{row:1,value:"q"},{row:1,value:"s"},{row:1,value:"d"},{row:1,value:"f"},{row:1,value:"g"},{row:1,value:"h"},{row:1,value:"j"},{row:1,value:"k"},{row:1,value:"l"},{row:1,value:"m"},{row:2,value:"w"},{row:2,value:"x"},{row:2,value:"c"},{row:2,value:"v"},{row:2,value:"b"},{row:2,value:"n"},{row:2,value:"Backspace"}],Ai=[{row:0,value:"a"},{row:0,value:"z"},{row:0,value:"e"},{row:0,value:"r"},{row:0,value:"t"},{row:0,value:"y"},{row:0,value:"u"},{row:0,value:"i"},{row:0,value:"o"},{row:0,value:"p"},{row:1,value:"q"},{row:1,value:"s"},{row:1,value:"d"},{row:1,value:"f"},{row:1,value:"g"},{row:1,value:"h"},{row:1,value:"j"},{row:1,value:"k"},{row:1,value:"l"},{row:1,value:"m"},{row:2,value:"Enter"},{row:2,value:"w"},{row:2,value:"x"},{row:2,value:"c"},{row:2,value:"v"},{row:2,value:"b"},{row:2,value:"n"},{row:2,value:"Backspace"}],Ci='<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-delete"><path d="M21 4H8l-7 8 7 8h13a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"></path><line x1="18" y1="9" x2="12" y2="15"></line><line x1="12" y1="9" x2="18" y2="15"></line></svg>',Ni='<svg width="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-corner-down-left"><polyline points="9 10 4 15 9 20"></polyline><path d="M20 4v7a4 4 0 0 1-4 4H4"></path></svg>';function _n(s,e,t){const r=s.slice();return r[27]=e[t],r[29]=t,r}function vn(s,e,t){const r=s.slice();return r[30]=e[t],r}function wn(s,e,t){const r=s.slice();return r[33]=e[t].value,r[34]=e[t].display,r}function Di(s){let e=s[34]+"",t;return{c(){t=B(e)},l(r){t=H(r,e)},m(r,n){R(r,t,n)},p(r,n){n[0]&8&&e!==(e=r[34]+"")&&ke(t,e)},d(r){r&&f(t)}}}function Ui(s){let e,t=s[34]+"",r;return{c(){e=new Ns(!1),r=ie(),this.h()},l(n){e=Ds(n,!1),r=ie(),this.h()},h(){e.a=r},m(n,o){e.m(t,n,o),R(n,r,o)},p(n,o){o[0]&8&&t!==(t=n[34]+"")&&e.p(t)},d(n){n&&f(r),n&&e.d()}}}function bn(s){let e,t,r,n,o;function i(m,_){return _[0]&8&&(t=null),t==null&&(t=!!m[34].includes("<svg")),t?Ui:Di}let a=i(s,[-1,-1]),l=a(s);function u(...m){return s[19](s[33],...m)}function c(...m){return s[20](s[33],...m)}function h(){return s[21](s[33])}function g(){return s[22](s[33])}return{c(){e=v("button"),l.c(),this.h()},l(m){e=w(m,"BUTTON",{class:!0});var _=E(e);l.l(_),_.forEach(f),this.h()},h(){p(e,"class",r="key key--"+s[33]+" "+(s[0][s[33]]||"")+" svelte-jsnwng"),Y(e,"single",s[33].length===1),Y(e,"active",s[33]===s[2])},m(m,_){R(m,e,_),l.m(e,null),n||(o=[ce(e,"touchstart",u),ce(e,"mousedown",c),ce(e,"touchend",h,{passive:!0}),ce(e,"mouseup",g)],n=!0)},p(m,_){s=m,a===(a=i(s,_))&&l?l.p(s,_):(l.d(1),l=a(s),l&&(l.c(),l.m(e,null))),_[0]&9&&r!==(r="key key--"+s[33]+" "+(s[0][s[33]]||"")+" svelte-jsnwng")&&p(e,"class",r),_[0]&9&&Y(e,"single",s[33].length===1),_[0]&13&&Y(e,"active",s[33]===s[2])},d(m){m&&f(e),l.d(),n=!1,Ye(o)}}}function yn(s){let e,t=s[30],r=[];for(let n=0;n<t.length;n+=1)r[n]=bn(wn(s,t,n));return{c(){e=v("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=w(n,"DIV",{class:!0});var o=E(e);for(let i=0;i<r.length;i+=1)r[i].l(o);o.forEach(f),this.h()},h(){p(e,"class","row row--"+s[29]+" svelte-jsnwng")},m(n,o){R(n,e,o);for(let i=0;i<r.length;i+=1)r[i].m(e,null)},p(n,o){if(o[0]&61){t=n[30];let i;for(i=0;i<t.length;i+=1){const a=wn(n,t,i);r[i]?r[i].p(a,o):(r[i]=bn(a),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=t.length}},d(n){n&&f(e),je(r,n)}}}function kn(s){let e,t,r=s[27],n=[];for(let o=0;o<r.length;o+=1)n[o]=yn(vn(s,r,o));return{c(){e=v("div");for(let o=0;o<n.length;o+=1)n[o].c();t=C(),this.h()},l(o){e=w(o,"DIV",{class:!0});var i=E(e);for(let a=0;a<n.length;a+=1)n[a].l(i);t=N(i),i.forEach(f),this.h()},h(){p(e,"class","page svelte-jsnwng"),Y(e,"visible",s[29]===s[1])},m(o,i){R(o,e,i);for(let a=0;a<n.length;a+=1)n[a].m(e,null);d(e,t)},p(o,i){if(i[0]&61){r=o[27];let a;for(a=0;a<r.length;a+=1){const l=vn(o,r,a);n[a]?n[a].p(l,i):(n[a]=yn(l),n[a].c(),n[a].m(e,t))}for(;a<n.length;a+=1)n[a].d(1);n.length=r.length}i[0]&2&&Y(e,"visible",o[29]===o[1])},d(o){o&&f(e),je(n,o)}}}function Mi(s){let e,t=s[3],r=[];for(let n=0;n<t.length;n+=1)r[n]=kn(_n(s,t,n));return{c(){e=v("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=w(n,"DIV",{class:!0});var o=E(e);for(let i=0;i<r.length;i+=1)r[i].l(o);o.forEach(f),this.h()},h(){p(e,"class","svelte-keyboard")},m(n,o){R(n,e,o);for(let i=0;i<r.length;i+=1)r[i].m(e,null)},p(n,o){if(o[0]&63){t=n[3];let i;for(i=0;i<t.length;i+=1){const a=_n(n,t,i);r[i]?r[i].p(a,o):(r[i]=kn(a),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=t.length}},i:te,o:te,d(n){n&&f(e),je(r,n)}}}const Li="abcdefghijklmnopqrstuvwxyz";function Bi(s,e,t){let r,n,o,i,a,l,u,c,h,{custom:g}=e,{localizationLayout:m="qwerty"}=e,{layout:_="standard"}=e,{noSwap:b=[]}=e,{keyClass:S={}}=e,$=0,I=!1,T;const y={qwerty:{standard:Oi,crossword:ji,wordle:Ii},azerty:{standard:Pi,crossword:Ri,wordle:Ai}},P=wt(),W={Page0:"abc",Page1:"?123",Space:" ",Shift:"abc",Enter:Ni,Backspace:Ci},L=k=>[...new Set(k)],q=(k,A)=>{if(k.preventDefault(),t(2,T=A),A.includes("Page"))t(1,$=+A.substr(-1));else if(A==="Shift")t(10,I=!I);else{let K=A;I&&Li.includes(A)&&(K=A.toUpperCase()),P("keydown",K)}return k.stopPropagation(),!1},U=k=>{setTimeout(()=>{k===T&&t(2,T=void 0)},50)},re=(k,A)=>q(A,k),D=(k,A)=>q(A,k),J=k=>U(k),M=k=>U(k);return s.$$set=k=>{"custom"in k&&t(6,g=k.custom),"localizationLayout"in k&&t(7,m=k.localizationLayout),"layout"in k&&t(8,_=k.layout),"noSwap"in k&&t(9,b=k.noSwap),"keyClass"in k&&t(0,S=k.keyClass)},s.$$.update=()=>{s.$$.dirty[0]&448&&t(18,r=g||y[m][_]||standard),s.$$.dirty[0]&263680&&t(17,n=r.map(k=>{let A=k.display;const K=W[k.value];return K&&!b.includes(k.value)&&!k.noSwap&&(A=K),A||(A=I?k.value.toUpperCase():k.value),k.value==="Shift"&&(A=I?K:K.toUpperCase()),{...k,display:A}})),s.$$.dirty[0]&131072&&t(15,o=n.filter(k=>!k.page)),s.$$.dirty[0]&131072&&t(13,i=n.filter(k=>k.page)),s.$$.dirty[0]&32768&&t(14,a=L(o.map(k=>k.row))),s.$$.dirty[0]&16384&&a.sort((k,A)=>k-A),s.$$.dirty[0]&8192&&t(16,l=L(i.map(k=>k.row))),s.$$.dirty[0]&65536&&l.sort((k,A)=>k-A),s.$$.dirty[0]&49152&&t(12,u=a.map(k=>o.filter(A=>A.row===k))),s.$$.dirty[0]&24576&&t(11,c=a.map(k=>i.filter(A=>A.row===k))),s.$$.dirty[0]&6144&&t(3,h=[u,c])},[S,$,T,h,q,U,g,m,_,b,I,c,u,i,a,o,l,n,r,re,D,J,M]}class Hi extends Q{constructor(e){super(),Z(this,e,Bi,Mi,X,{custom:6,localizationLayout:7,layout:8,noSwap:9,keyClass:0},null,[-1,-1])}}function zi(s){let e,t,r,n;return t=new Hi({props:{layout:"wordle"}}),t.$on("keydown",s[1]),{c(){e=v("div"),r=v("div"),G(t.$$.fragment),this.h()},l(o){e=w(o,"DIV",{id:!0,class:!0});var i=E(e);r=w(i,"DIV",{style:!0});var a=E(r);F(t.$$.fragment,a),i.forEach(f),this.h()},h(){he(r,"display","contents"),he(r,"--height","42px"),he(r,"--margin","4px"),he(r,"--min-width","28px"),he(r,"--background","var(--color-bg-2)"),he(r,"--active-background","var(--color-bg-3)"),he(r,"--color","var(--color-fg)"),p(e,"id","play-keyboard"),p(e,"class","svelte-4tpwyx"),Y(e,"in-modal",s[0])},m(o,i){R(o,e,i),d(e,r),x(t,r,null),n=!0},p(o,[i]){i&1&&Y(e,"in-modal",o[0])},i(o){n||(O(t.$$.fragment,o),n=!0)},o(o){j(t.$$.fragment,o),n=!1},d(o){o&&f(e),V(t)}}}function qi(s,e,t){let r;z(s,Te,l=>t(0,r=l));const n=wt();let{value:o=""}=e;const i=()=>{o&&n("submit",o),t(2,o="")},a=l=>{l.detail==="Enter"?i():l.detail==="Backspace"?t(2,o=o.substring(0,o.length-1)):t(2,o=`${o}${l.detail}`)};return s.$$set=l=>{"value"in l&&t(2,o=l.value)},[r,a,o]}class Gi extends Q{constructor(e){super(),Z(this,e,qi,zi,X,{value:2})}}function En(s){let e,t,r;return{c(){e=v("p"),t=v("strong"),r=B(s[0]),this.h()},l(n){e=w(n,"P",{class:!0});var o=E(e);t=w(o,"STRONG",{});var i=E(t);r=H(i,s[0]),i.forEach(f),o.forEach(f),this.h()},h(){p(e,"class","svelte-11z2ctk")},m(n,o){R(n,e,o),d(e,t),d(t,r)},p(n,o){o&1&&ke(r,n[0])},d(n){n&&f(e)}}}function Fi(s){let e,t,r,n,o=!s[2]&&En(s);return{c(){e=v("div"),t=v("div"),r=v("span"),n=C(),o&&o.c(),this.h()},l(i){e=w(i,"DIV",{id:!0,class:!0});var a=E(e);t=w(a,"DIV",{class:!0});var l=E(t);r=w(l,"SPAN",{class:!0}),E(r).forEach(f),l.forEach(f),n=N(a),o&&o.l(a),a.forEach(f),this.h()},h(){p(r,"class","progress combo-mark svelte-11z2ctk"),he(r,"width",s[1],!1),p(t,"class","margin svelte-11z2ctk"),p(e,"id","play-clock"),p(e,"class","svelte-11z2ctk"),Y(e,"in-modal",s[2])},m(i,a){R(i,e,a),d(e,t),d(t,r),d(e,n),o&&o.m(e,null)},p(i,[a]){a&2&&he(r,"width",i[1],!1),i[2]?o&&(o.d(1),o=null):o?o.p(i,a):(o=En(i),o.c(),o.m(e,null)),a&4&&Y(e,"in-modal",i[2])},i:te,o:te,d(i){i&&f(e),o&&o.d()}}}const Tn=1e3;function xi(s,e,t){let r,n,o,i,a,l;z(s,Te,h=>t(2,i=h)),z(s,Ot,h=>t(4,a=h)),z(s,vt,h=>t(5,l=h));const u=60*Tn,c=h=>{h?(St.reset(),St.start()):St.stop()};return s.$$.update=()=>{s.$$.dirty&32&&t(0,o=Math.ceil((u-l)/Tn)),s.$$.dirty&1&&o<=0&&(be(Ot,a=!1,a),be(Te,i=!0,i)),s.$$.dirty&16&&c(a),s.$$.dirty&32&&t(3,r=u-l),s.$$.dirty&8&&t(1,n=`${Math.max(0,r/u)*100}%`)},[o,n,i,r,a,l]}class Vi extends Q{constructor(e){super(),Z(this,e,xi,Fi,X,{})}}function Sn(s,e,t){const r=s.slice();return r[3]=e[t],r[5]=t,r}function $n(s){let e,t=s[3]+"";return{c(){e=v("li"),this.h()},l(r){e=w(r,"LI",{class:!0});var n=E(e);n.forEach(f),this.h()},h(){p(e,"class","svelte-mtlgub")},m(r,n){R(r,e,n),e.innerHTML=t},p(r,n){n&1&&t!==(t=r[3]+"")&&(e.innerHTML=t)},d(r){r&&f(e)}}}function Wi(s){let e,t,r=s[0],n=[];for(let o=0;o<r.length;o+=1)n[o]=$n(Sn(s,r,o));return{c(){e=v("div"),t=v("ul");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=w(o,"DIV",{id:!0,class:!0});var i=E(e);t=w(i,"UL",{class:!0});var a=E(t);for(let l=0;l<n.length;l+=1)n[l].l(a);a.forEach(f),i.forEach(f),this.h()},h(){p(t,"class","svelte-mtlgub"),p(e,"id","play-clue"),p(e,"class","svelte-mtlgub"),Y(e,"in-modal",s[1])},m(o,i){R(o,e,i),d(e,t);for(let a=0;a<n.length;a+=1)n[a].m(t,null)},p(o,[i]){if(i&1){r=o[0];let a;for(a=0;a<r.length;a+=1){const l=Sn(o,r,a);n[a]?n[a].p(l,i):(n[a]=$n(l),n[a].c(),n[a].m(t,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=r.length}i&2&&Y(e,"in-modal",o[1])},i:te,o:te,d(o){o&&f(e),je(n,o)}}}function Ji(s,e,t){let r,n;z(s,Te,i=>t(1,n=i));let{clue:o}=e;return s.$$set=i=>{"clue"in i&&t(2,o=i.clue)},s.$$.update=()=>{s.$$.dirty&4&&t(0,r=o.split("|"))},[r,n,o]}class Ki extends Q{constructor(e){super(),Z(this,e,Ji,Wi,X,{clue:2})}}function On(s){let e,t,r=s[0].text+"",n,o,i=s[2][s[0].reason]+"",a;return{c(){e=v("p"),t=v("strong"),n=B(r),o=C(),a=B(i),this.h()},l(l){e=w(l,"P",{class:!0});var u=E(e);t=w(u,"STRONG",{});var c=E(t);n=H(c,r),c.forEach(f),o=N(u),a=H(u,i),u.forEach(f),this.h()},h(){p(e,"class","svelte-185b04q")},m(l,u){R(l,e,u),d(e,t),d(t,n),d(e,o),d(e,a)},p(l,u){u&1&&r!==(r=l[0].text+"")&&ke(n,r),u&1&&i!==(i=l[2][l[0].reason]+"")&&ke(a,i)},d(l){l&&f(e)}}}function Yi(s){let e,t=s[1]&&On(s);return{c(){e=v("div"),t&&t.c(),this.h()},l(r){e=w(r,"DIV",{id:!0,class:!0});var n=E(e);t&&t.l(n),n.forEach(f),this.h()},h(){p(e,"id","play-invalid"),p(e,"class","svelte-185b04q")},m(r,n){R(r,e,n),t&&t.m(e,null)},p(r,[n]){r[1]?t?t.p(r,n):(t=On(r),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:te,o:te,d(r){r&&f(e),t&&t.d()}}}const Xi=2500;function Qi(s,e,t){let r,n,o;z(s,Ke,h=>t(4,n=h)),z(s,Le,h=>t(5,o=h));let i,a=!1,l=0;const u=["(or a variation) was played by opponent","is too short","contains non-letters","is not in the word list","was already entered"],c=()=>{t(3,l=o.user[n].length),clearTimeout(i),r.valid?t(1,a=!1):(t(1,a=!0),i=setTimeout(()=>t(1,a=!1),Xi))};return s.$$.update=()=>{s.$$.dirty&48&&t(0,r=o.user[n][o.user[n].length-1]),s.$$.dirty&48&&(o.user[n].length||t(3,l=0)),s.$$.dirty&57&&r&&o.user[n].length!==l&&c()},[r,a,u,l,n,o]}class Zi extends Q{constructor(e){super(),Z(this,e,Qi,Yi,X,{})}}function eo(s){let e,t;return{c(){e=v("p"),t=B(s[0]),this.h()},l(r){e=w(r,"P",{class:!0});var n=E(e);t=H(n,s[0]),n.forEach(f),this.h()},h(){p(e,"class","countdown svelte-4ytcdo")},m(r,n){R(r,e,n),d(e,t)},p(r,[n]){n&1&&ke(t,r[0])},i:te,o:te,d(r){r&&f(e)}}}function to(s,e,t){let r,n,{start:o=3}=e,{text:i=""}=e;const a=wt(),l=i?-1:0,u=o*1e3,c=ds(o,{duration:u});return z(s,c,h=>t(4,n=h)),It(()=>{c.set(l).then(()=>a("end"))}),s.$$set=h=>{"start"in h&&t(2,o=h.start),"text"in h&&t(3,i=h.text)},s.$$.update=()=>{s.$$.dirty&24&&t(0,r=n<0?i:Math.floor(n)+1)},[r,c,o,i,n]}class ro extends Q{constructor(e){super(),Z(this,e,to,eo,X,{start:2,text:3})}}function jn(s){let e,t;return e=new ro({props:{text:"begin!"}}),e.$on("end",s[5]),{c(){G(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,n){x(e,r,n),t=!0},p:te,i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){j(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function no(s){let e,t,r,n,o,i,a,l,u,c,h,g,m,_,b;t=new Ki({props:{clue:s[3]}});let S={value:s[1]};n=new $i({props:S}),s[10](n),n.$on("submit",s[4]);let $=s[0]&&jn(s);a=new Zi({}),u=new Ei({}),h=new Vi({});function I(y){s[11](y)}let T={};return s[1]!==void 0&&(T.value=s[1]),m=new Gi({props:T}),Gt.push(()=>ns(m,"value",I)),m.$on("submit",s[4]),{c(){e=v("div"),G(t.$$.fragment),r=C(),G(n.$$.fragment),o=C(),$&&$.c(),i=C(),G(a.$$.fragment),l=C(),G(u.$$.fragment),c=C(),G(h.$$.fragment),g=C(),G(m.$$.fragment),this.h()},l(y){e=w(y,"DIV",{class:!0});var P=E(e);F(t.$$.fragment,P),r=N(P),F(n.$$.fragment,P),o=N(P),$&&$.l(P),i=N(P),F(a.$$.fragment,P),l=N(P),F(u.$$.fragment,P),c=N(P),F(h.$$.fragment,P),g=N(P),F(m.$$.fragment,P),P.forEach(f),this.h()},h(){p(e,"class","svelte-foxip5")},m(y,P){R(y,e,P),x(t,e,null),d(e,r),x(n,e,null),d(e,o),$&&$.m(e,null),d(e,i),x(a,e,null),d(e,l),x(u,e,null),d(e,c),x(h,e,null),d(e,g),x(m,e,null),b=!0},p(y,[P]){const W={};P&8&&(W.clue=y[3]),t.$set(W);const L={};P&2&&(L.value=y[1]),n.$set(L),y[0]?$?($.p(y,P),P&1&&O($,1)):($=jn(y),$.c(),O($,1),$.m(e,i)):$&&(fe(),j($,1,1,()=>{$=null}),de());const q={};!_&&P&2&&(_=!0,q.value=y[1],ss(()=>_=!1)),m.$set(q)},i(y){b||(O(t.$$.fragment,y),O(n.$$.fragment,y),O($),O(a.$$.fragment,y),O(u.$$.fragment,y),O(h.$$.fragment,y),O(m.$$.fragment,y),b=!0)},o(y){j(t.$$.fragment,y),j(n.$$.fragment,y),j($),j(a.$$.fragment,y),j(u.$$.fragment,y),j(h.$$.fragment,y),j(m.$$.fragment,y),b=!1},d(y){y&&f(e),V(t),s[10](null),V(n),$&&$.d(),V(a),V(u),V(h),V(m)}}}function so(s,e,t){let r,n,o,i,a,l,u,c,h;z(s,Ot,k=>t(13,i=k)),z(s,Ke,k=>t(9,a=k)),z(s,pr,k=>t(14,l=k)),z(s,Le,k=>t(15,u=k)),z(s,vt,k=>t(16,c=k)),z(s,Er,k=>t(17,h=k));let{clues:g}=e,{answers:m}=e,_=!1,b="",S;const $=k=>{const A=n.find(K=>K.word===k);return A?A.lemmas:""},I=k=>!o.includes(k),T=({text:k,lemmas:A})=>Ht({lemmas:A,corpus:h}),y=({text:k,lemmas:A})=>{const K=u.user[a].map(ee=>ee.lemmas);return Ht({lemmas:A,corpus:K})},P=k=>new RegExp(/([^a-z])/,"g").test(k),W=({text:k,lemmas:A})=>{let K=!0,ee;return k.length<4?(K=!1,ee=1):P(k)?(K=!1,ee=2):I(k)?(K=!1,ee=3):y({text:k,lemmas:A})?(K=!1,ee=4):T({text:k,lemmas:A})&&(K=!1,ee=0),{valid:K,reason:ee}},L=({text:k,timestamp:A})=>{const{points:K}=n.find(ee=>ee.word===k);return+K},q=k=>{u.wod[a].forEach(A=>{const K=A.lemmas.split("|");Ht({lemmas:k,corpus:K})&&(A.revealWod=!0)})},U=async({detail:k})=>{const A=k,K=$(A),{valid:ee,reason:ve}=W({text:A,lemmas:K}),le=c,oe=ee?L({text:A,timestamp:le}):void 0,pe={text:A,lemmas:K,points:oe,timestamp:le,round:a,valid:ee,reason:ve};be(Le,u.user[a]=[...u.user[a],pe],u),q(K)},re=()=>{t(0,_=!0),S&&S.reset()},D=()=>{be(Ot,i=!0,i),t(0,_=!1)};function J(k){Gt[k?"unshift":"push"](()=>{S=k,t(2,S)})}function M(k){b=k,t(1,b)}return s.$$set=k=>{"clues"in k&&t(6,g=k.clues),"answers"in k&&t(7,m=k.answers)},s.$$.update=()=>{s.$$.dirty&576&&t(3,r=g[a]),s.$$.dirty&640&&t(8,n=m[a]),s.$$.dirty&256&&be(pr,l=n,l),s.$$.dirty&256&&(o=n.map(k=>k.word)),s.$$.dirty&512&&re()},[_,b,S,r,U,D,g,m,n,a,J,M]}class io extends Q{constructor(e){super(),Z(this,e,so,no,X,{clues:6,answers:7})}}function In(s,e,t){const r=s.slice();return r[7]=e[t],r}function hr(s){let e,t=s[7]+"",r,n=[{class:r="chunk "+s[1]+" svelte-1rapxyz"}],o={};for(let i=0;i<n.length;i+=1)o=mr(o,n[i]);return{c(){e=v(s[0]),this.h()},l(i){e=w(i,(s[0]||"null").toUpperCase(),{class:!0});var a=E(e);a.forEach(f),this.h()},h(){Zr(e,o)},m(i,a){R(i,e,a),e.innerHTML=t},p(i,a){a&4&&t!==(t=i[7]+"")&&(e.innerHTML=t),Zr(e,o=Us(n,[a&2&&r!==(r="chunk "+i[1]+" svelte-1rapxyz")&&{class:r}]))},d(i){i&&f(e)}}}function Pn(s){let e=s[0],t,r=s[0]&&hr(s);return{c(){r&&r.c(),t=ie()},l(n){r&&r.l(n),t=ie()},m(n,o){r&&r.m(n,o),R(n,t,o)},p(n,o){n[0]?e?X(e,n[0])?(r.d(1),r=hr(n),r.c(),r.m(t.parentNode,t)):r.p(n,o):(r=hr(n),r.c(),r.m(t.parentNode,t)):e&&(r.d(1),r=null),e=n[0]},d(n){n&&f(t),r&&r.d(n)}}}function oo(s){let e,t=s[2],r=[];for(let n=0;n<t.length;n+=1)r[n]=Pn(In(s,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=ie()},l(n){for(let o=0;o<r.length;o+=1)r[o].l(n);e=ie()},m(n,o){for(let i=0;i<r.length;i+=1)r[i].m(n,o);R(n,e,o)},p(n,[o]){if(o&7){t=n[2];let i;for(i=0;i<t.length;i+=1){const a=In(n,t,i);r[i]?r[i].p(a,o):(r[i]=Pn(a),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=t.length}},i:te,o:te,d(n){je(r,n),n&&f(e)}}}function ao(s,e,t){let r,n,{text:o=""}=e,{max:i=o.length}=e,{space:a=!1}=e,{tag:l="span"}=e,{className:u=""}=e;return s.$$set=c=>{"text"in c&&t(3,o=c.text),"max"in c&&t(4,i=c.max),"space"in c&&t(5,a=c.space),"tag"in c&&t(0,l=c.tag),"className"in c&&t(1,u=c.className)},s.$$.update=()=>{s.$$.dirty&16&&t(6,r=new RegExp(`[\\s\\S]{1,${i}}(?!\\S)`,"g")),s.$$.dirty&104&&t(2,n=o.replace(r,`$&
`).split(`
`).map(c=>c.trim()).filter(c=>c).map((c,h)=>`${h>0&&a?"&nbsp;":""}${c}`))},[l,u,n,o,i,a,r]}class ue extends Q{constructor(e){super(),Z(this,e,ao,oo,X,{text:3,max:4,space:5,tag:0,className:1})}}function lo(s){let e,t,r;return t=new ue({props:{text:s[0],className:"combo-default",max:"44"}}),{c(){e=v("p"),G(t.$$.fragment),this.h()},l(n){e=w(n,"P",{id:!0,class:!0});var o=E(e);F(t.$$.fragment,o),o.forEach(f),this.h()},h(){p(e,"id","chunk-possible"),p(e,"class","svelte-1yvq7gq")},m(n,o){R(n,e,o),x(t,e,null),r=!0},p(n,[o]){const i={};o&1&&(i.text=n[0]),t.$set(i)},i(n){r||(O(t.$$.fragment,n),r=!0)},o(n){j(t.$$.fragment,n),r=!1},d(n){n&&f(e),V(t)}}}function uo(s,e,t){let{text:r}=e;return s.$$set=n=>{"text"in n&&t(0,r=n.text)},[r]}class co extends Q{constructor(e){super(),Z(this,e,uo,lo,X,{text:0})}}function Rn(s,e,t){const r=s.slice();return r[1]=e[t],r}function An(s){let e,t;return e=new ue({props:{text:s[1],max:"15",className:"combo-default"}}),{c(){G(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,n){x(e,r,n),t=!0},p(r,n){const o={};n&1&&(o.text=r[1]),e.$set(o)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){j(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function ho(s){let e,t,r=s[0],n=[];for(let i=0;i<r.length;i+=1)n[i]=An(Rn(s,r,i));const o=i=>j(n[i],1,1,()=>{n[i]=null});return{c(){e=v("p");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=w(i,"P",{id:!0});var a=E(e);for(let l=0;l<n.length;l+=1)n[l].l(a);a.forEach(f),this.h()},h(){p(e,"id","chunk-wod-words-info")},m(i,a){R(i,e,a);for(let l=0;l<n.length;l+=1)n[l].m(e,null);t=!0},p(i,[a]){if(a&1){r=i[0];let l;for(l=0;l<r.length;l+=1){const u=Rn(i,r,l);n[l]?(n[l].p(u,a),O(n[l],1)):(n[l]=An(u),n[l].c(),O(n[l],1),n[l].m(e,null))}for(fe(),l=r.length;l<n.length;l+=1)o(l);de()}},i(i){if(!t){for(let a=0;a<r.length;a+=1)O(n[a]);t=!0}},o(i){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)j(n[a]);t=!1},d(i){i&&f(e),je(n,i)}}}function fo(s,e,t){let{lines:r}=e;return s.$$set=n=>{"lines"in n&&t(0,r=n.lines)},[r]}class mo extends Q{constructor(e){super(),Z(this,e,fo,ho,X,{lines:0})}}function po(s){let e,t,r;return t=new ue({props:{text:s[0],max:"1",className:"combo-wod"}}),{c(){e=v("p"),G(t.$$.fragment),this.h()},l(n){e=w(n,"P",{id:!0,class:!0});var o=E(e);F(t.$$.fragment,o),o.forEach(f),this.h()},h(){p(e,"id","chunk-wod-words-list"),p(e,"class","svelte-rspl7a")},m(n,o){R(n,e,o),x(t,e,null),r=!0},p(n,[o]){const i={};o&1&&(i.text=n[0]),t.$set(i)},i(n){r||(O(t.$$.fragment,n),r=!0)},o(n){j(t.$$.fragment,n),r=!1},d(n){n&&f(e),V(t)}}}function go(s,e,t){let{text:r}=e;return s.$$set=n=>{"text"in n&&t(0,r=n.text)},[r]}class _o extends Q{constructor(e){super(),Z(this,e,go,po,X,{text:0})}}function Cn(s,e,t){const r=s.slice();return r[1]=e[t],r}function Nn(s){let e,t;return e=new ue({props:{text:s[1],max:"15",className:"combo-default"}}),{c(){G(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,n){x(e,r,n),t=!0},p(r,n){const o={};n&1&&(o.text=r[1]),e.$set(o)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){j(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function vo(s){let e,t,r=s[0],n=[];for(let i=0;i<r.length;i+=1)n[i]=Nn(Cn(s,r,i));const o=i=>j(n[i],1,1,()=>{n[i]=null});return{c(){e=v("p");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=w(i,"P",{id:!0});var a=E(e);for(let l=0;l<n.length;l+=1)n[l].l(a);a.forEach(f),this.h()},h(){p(e,"id","chunk-common-words-info")},m(i,a){R(i,e,a);for(let l=0;l<n.length;l+=1)n[l].m(e,null);t=!0},p(i,[a]){if(a&1){r=i[0];let l;for(l=0;l<r.length;l+=1){const u=Cn(i,r,l);n[l]?(n[l].p(u,a),O(n[l],1)):(n[l]=Nn(u),n[l].c(),O(n[l],1),n[l].m(e,null))}for(fe(),l=r.length;l<n.length;l+=1)o(l);de()}},i(i){if(!t){for(let a=0;a<r.length;a+=1)O(n[a]);t=!0}},o(i){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)j(n[a]);t=!1},d(i){i&&f(e),je(n,i)}}}function wo(s,e,t){let{lines:r}=e;return s.$$set=n=>{"lines"in n&&t(0,r=n.lines)},[r]}class bo extends Q{constructor(e){super(),Z(this,e,wo,vo,X,{lines:0})}}function yo(s){let e,t,r;return t=new ue({props:{text:s[0],max:"1",className:"combo-wod"}}),{c(){e=v("p"),G(t.$$.fragment),this.h()},l(n){e=w(n,"P",{id:!0,class:!0});var o=E(e);F(t.$$.fragment,o),o.forEach(f),this.h()},h(){p(e,"id","chunk-common-words-list"),p(e,"class","svelte-1243s1f")},m(n,o){R(n,e,o),x(t,e,null),r=!0},p(n,[o]){const i={};o&1&&(i.text=n[0]),t.$set(i)},i(n){r||(O(t.$$.fragment,n),r=!0)},o(n){j(t.$$.fragment,n),r=!1},d(n){n&&f(e),V(t)}}}function ko(s,e,t){let{text:r}=e;return s.$$set=n=>{"text"in n&&t(0,r=n.text)},[r]}class Eo extends Q{constructor(e){super(),Z(this,e,ko,yo,X,{text:0})}}function Dn(s){let e,t,r,n,o;return t=new mo({props:{lines:["some words",`${s[0].name} got`,"that you didn't"]}}),n=new _o({props:{text:s[5]}}),{c(){e=v("div"),G(t.$$.fragment),r=C(),G(n.$$.fragment),this.h()},l(i){e=w(i,"DIV",{class:!0});var a=E(e);F(t.$$.fragment,a),r=N(a),F(n.$$.fragment,a),a.forEach(f),this.h()},h(){p(e,"class","words wod-words svelte-631pl9")},m(i,a){R(i,e,a),x(t,e,null),d(e,r),x(n,e,null),o=!0},p(i,a){const l={};a&1&&(l.lines=["some words",`${i[0].name} got`,"that you didn't"]),t.$set(l);const u={};a&32&&(u.text=i[5]),n.$set(u)},i(i){o||(O(t.$$.fragment,i),O(n.$$.fragment,i),o=!0)},o(i){j(t.$$.fragment,i),j(n.$$.fragment,i),o=!1},d(i){i&&f(e),V(t),V(n)}}}function To(s){let e,t,r,n,o,i,a,l,u;e=new co({props:{text:""+(s[2]+s[1])}}),o=new bo({props:{lines:["common","words that",`${s[3]}`]}}),a=new Eo({props:{text:s[4]}});let c=s[5].length&&Dn(s);return{c(){G(e.$$.fragment),t=C(),r=v("div"),n=v("div"),G(o.$$.fragment),i=C(),G(a.$$.fragment),l=C(),c&&c.c(),this.h()},l(h){F(e.$$.fragment,h),t=N(h),r=w(h,"DIV",{class:!0});var g=E(r);n=w(g,"DIV",{class:!0});var m=E(n);F(o.$$.fragment,m),i=N(m),F(a.$$.fragment,m),m.forEach(f),l=N(g),c&&c.l(g),g.forEach(f),this.h()},h(){p(n,"class","words common-words svelte-631pl9"),p(r,"class","words-wrapper svelte-631pl9")},m(h,g){x(e,h,g),R(h,t,g),R(h,r,g),d(r,n),x(o,n,null),d(n,i),x(a,n,null),d(r,l),c&&c.m(r,null),u=!0},p(h,[g]){const m={};g&6&&(m.text=""+(h[2]+h[1])),e.$set(m);const _={};g&8&&(_.lines=["common","words that",`${h[3]}`]),o.$set(_);const b={};g&16&&(b.text=h[4]),a.$set(b),h[5].length?c?(c.p(h,g),g&32&&O(c,1)):(c=Dn(h),c.c(),O(c,1),c.m(r,null)):c&&(fe(),j(c,1,1,()=>{c=null}),de())},i(h){u||(O(e.$$.fragment,h),O(o.$$.fragment,h),O(a.$$.fragment,h),O(c),u=!0)},o(h){j(e.$$.fragment,h),j(o.$$.fragment,h),j(a.$$.fragment,h),j(c),u=!1},d(h){V(e,h),h&&f(t),h&&f(r),V(o),V(a),c&&c.d()}}}const Un=3;function So(s,e,t){let r,n,o,i,a,l,u,c,h,g,m,_,b,S,$,I;z(s,_t,y=>t(0,m=y)),z(s,bt,y=>t(11,_=y)),z(s,pr,y=>t(12,b=y)),z(s,Ke,y=>t(13,S=y)),z(s,Le,y=>t(14,$=y)),z(s,Er,y=>t(15,I=y));const T=({word:y,lemmas:P})=>!!!P.split("|").find(L=>I.includes(L));return s.$$.update=()=>{s.$$.dirty&4096&&t(8,r=hs(",")(b.length)),s.$$.dirty&24576&&t(10,n=$.wod[S]),s.$$.dirty&1024&&t(5,o=n.filter(y=>y.valid).slice(0,Un).map(y=>y.text).join(" ")),s.$$.dirty&1024&&t(7,i=n.filter(y=>!y.valid).length),s.$$.dirty&4096&&t(9,a=Hs(b.filter(y=>+y.points==1).filter(T))),s.$$.dirty&512&&t(4,l=a.slice(0,Un).map(y=>y.word).join(" ")),s.$$.dirty&2048&&t(3,u=_?"you didn't get:":"nobody got"),s.$$.dirty&256&&t(2,c=`there were <em>${r}</em> possible words.`),s.$$.dirty&128&&t(6,h=i===1?"":"s"),s.$$.dirty&193&&t(1,g=` you blocked ${m==null?void 0:m.name} ${i} time${h}.`)},[m,g,c,u,l,o,h,i,r,a,n,_,b,S,$]}class $o extends Q{constructor(e){super(),Z(this,e,So,To,X,{})}}function Mn(s,e,t){const r=s.slice();return r[2]=e[t],r}function Ln(s){let e,t;return e=new ue({props:{text:s[2],max:"20",className:"combo-"+s[1]}}),{c(){G(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,n){x(e,r,n),t=!0},p(r,n){const o={};n&1&&(o.text=r[2]),n&2&&(o.className="combo-"+r[1]),e.$set(o)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){j(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function Oo(s){let e,t,r=s[0],n=[];for(let i=0;i<r.length;i+=1)n[i]=Ln(Mn(s,r,i));const o=i=>j(n[i],1,1,()=>{n[i]=null});return{c(){e=v("h3");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=w(i,"H3",{id:!0,class:!0});var a=E(e);for(let l=0;l<n.length;l+=1)n[l].l(a);a.forEach(f),this.h()},h(){p(e,"id","chunk-recap-title"),p(e,"class","svelte-1x6vqro")},m(i,a){R(i,e,a);for(let l=0;l<n.length;l+=1)n[l].m(e,null);t=!0},p(i,[a]){if(a&3){r=i[0];let l;for(l=0;l<r.length;l+=1){const u=Mn(i,r,l);n[l]?(n[l].p(u,a),O(n[l],1)):(n[l]=Ln(u),n[l].c(),O(n[l],1),n[l].m(e,null))}for(fe(),l=r.length;l<n.length;l+=1)o(l);de()}},i(i){if(!t){for(let a=0;a<r.length;a+=1)O(n[a]);t=!0}},o(i){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)j(n[a]);t=!1},d(i){i&&f(e),je(n,i)}}}function jo(s,e,t){let{lines:r}=e,{winner:n}=e;return s.$$set=o=>{"lines"in o&&t(0,r=o.lines),"winner"in o&&t(1,n=o.winner)},[r,n]}class Io extends Q{constructor(e){super(),Z(this,e,jo,Oo,X,{lines:0,winner:1})}}function Po(s){let e,t,r,n,o;return t=new ue({props:{className:"combo-user",text:"shameless plug:"}}),n=new ue({props:{text:s[0],max:"28",className:"combo-wod"}}),{c(){e=v("p"),G(t.$$.fragment),r=C(),G(n.$$.fragment),this.h()},l(i){e=w(i,"P",{id:!0,class:!0});var a=E(e);F(t.$$.fragment,a),r=N(a),F(n.$$.fragment,a),a.forEach(f),this.h()},h(){p(e,"id","chunk-recap-plug"),p(e,"class","svelte-zres95")},m(i,a){R(i,e,a),x(t,e,null),d(e,r),x(n,e,null),o=!0},p(i,[a]){const l={};a&1&&(l.text=i[0]),n.$set(l)},i(i){o||(O(t.$$.fragment,i),O(n.$$.fragment,i),o=!0)},o(i){j(t.$$.fragment,i),j(n.$$.fragment,i),o=!1},d(i){i&&f(e),V(t),V(n)}}}function Ro(s,e,t){let{text:r}=e;return s.$$set=n=>{"text"in n&&t(0,r=n.text)},[r]}class Ao extends Q{constructor(e){super(),Z(this,e,Ro,Po,X,{text:0})}}function Bn(s){let e,t;return e=new Io({props:{lines:s[1],winner:s[2]}}),{c(){G(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,n){x(e,r,n),t=!0},p(r,n){const o={};n&2&&(o.lines=r[1]),n&4&&(o.winner=r[2]),e.$set(o)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){j(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function Hn(s){var r;let e,t;return e=new Ao({props:{text:(r=s[3])==null?void 0:r.plug,winner:s[2]}}),{c(){G(e.$$.fragment)},l(n){F(e.$$.fragment,n)},m(n,o){x(e,n,o),t=!0},p(n,o){var a;const i={};o&8&&(i.text=(a=n[3])==null?void 0:a.plug),o&4&&(i.winner=n[2]),e.$set(i)},i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function Co(s){let e,t,r,n,o,i=!s[4]&&Bn(s),a=s[0]==="post"&&!s[4]&&s[2]==="wod"&&s[3].plug&&Hn(s);return n=new $o({}),{c(){e=v("div"),i&&i.c(),t=C(),a&&a.c(),r=C(),G(n.$$.fragment),this.h()},l(l){e=w(l,"DIV",{class:!0});var u=E(e);i&&i.l(u),t=N(u),a&&a.l(u),r=N(u),F(n.$$.fragment,u),u.forEach(f),this.h()},h(){p(e,"class","svelte-bvyxft")},m(l,u){R(l,e,u),i&&i.m(e,null),d(e,t),a&&a.m(e,null),d(e,r),x(n,e,null),o=!0},p(l,[u]){l[4]?i&&(fe(),j(i,1,1,()=>{i=null}),de()):i?(i.p(l,u),u&16&&O(i,1)):(i=Bn(l),i.c(),O(i,1),i.m(e,t)),l[0]==="post"&&!l[4]&&l[2]==="wod"&&l[3].plug?a?(a.p(l,u),u&29&&O(a,1)):(a=Hn(l),a.c(),O(a,1),a.m(e,r)):a&&(fe(),j(a,1,1,()=>{a=null}),de())},i(l){o||(O(i),O(a),O(n.$$.fragment,l),o=!0)},o(l){j(i),j(a),j(n.$$.fragment,l),o=!1},d(l){l&&f(e),i&&i.d(),a&&a.d(),V(n)}}}function No(s,e,t){let r,n,o,i,a,l,u,c,h;z(s,Te,S=>t(6,a=S)),z(s,Tr,S=>t(0,l=S)),z(s,ls,S=>t(7,u=S)),z(s,_t,S=>t(3,c=S)),z(s,bt,S=>t(4,h=S));let g;const m=()=>{t(1,g=o?[`You and ${c==null?void 0:c.name}`,"tied!"]:r?["You beat",`${c==null?void 0:c.name}!`]:[`${c==null?void 0:c.name}`,"beat you!"])},_=()=>{t(1,g=o?[`you and ${c==null?void 0:c.name}`,"are tied"]:r?["you are ahead",`of ${c==null?void 0:c.name}`]:[`${c==null?void 0:c.name} is`,"in the lead"])},b=()=>{l==="post"?m():_()};return s.$$.update=()=>{s.$$.dirty&128&&(r=u.user>u.wod),s.$$.dirty&128&&t(5,n=u.user<u.wod),s.$$.dirty&128&&(o=u.user===u.wod),s.$$.dirty&32&&t(2,i=n?"wod":"user"),s.$$.dirty&65&&b()},[l,g,i,c,h,n,a,u]}class Do extends Q{constructor(e){super(),Z(this,e,No,Co,X,{})}}async function Uo(s){const e=`https://pudding.cool/games/words-against-strangers-data/wod-info/${s}.csv?version=${Date.now()}`;return await xt(e)}function Mo(s){let e,t,r,n,o;return t=new ue({props:{text:"welcome to",max:"10",className:"combo-user"}}),n=new ue({props:{text:s[0],max:"1",className:"combo-user"}}),{c(){e=v("h2"),G(t.$$.fragment),r=C(),G(n.$$.fragment),this.h()},l(i){e=w(i,"H2",{id:!0,class:!0});var a=E(e);F(t.$$.fragment,a),r=N(a),F(n.$$.fragment,a),a.forEach(f),this.h()},h(){p(e,"id","chunk-title"),p(e,"class","svelte-s6dwex")},m(i,a){R(i,e,a),x(t,e,null),d(e,r),x(n,e,null),o=!0},p(i,[a]){const l={};a&1&&(l.text=i[0]),n.$set(l)},i(i){o||(O(t.$$.fragment,i),O(n.$$.fragment,i),o=!0)},o(i){j(t.$$.fragment,i),j(n.$$.fragment,i),o=!1},d(i){i&&f(e),V(t),V(n)}}}function Lo(s,e,t){let{text:r}=e;return s.$$set=n=>{"text"in n&&t(0,r=n.text)},[r]}class Bo extends Q{constructor(e){super(),Z(this,e,Lo,Mo,X,{text:0})}}function Ho(s){let e,t,r;return t=new ue({props:{text:s[0],max:"13",className:"combo-default"}}),{c(){e=v("p"),G(t.$$.fragment),this.h()},l(n){e=w(n,"P",{id:!0,class:!0});var o=E(e);F(t.$$.fragment,o),o.forEach(f),this.h()},h(){p(e,"id","chunk-description"),p(e,"class","svelte-cnnzop")},m(n,o){R(n,e,o),x(t,e,null),r=!0},p(n,[o]){const i={};o&1&&(i.text=n[0]),t.$set(i)},i(n){r||(O(t.$$.fragment,n),r=!0)},o(n){j(t.$$.fragment,n),r=!1},d(n){n&&f(e),V(t)}}}function zo(s,e,t){let{text:r}=e;return s.$$set=n=>{"text"in n&&t(0,r=n.text)},[r]}class qo extends Q{constructor(e){super(),Z(this,e,zo,Ho,X,{text:0})}}function Go(s){let e,t,r;return t=new ue({props:{text:Ko,max:"12",className:"combo-wod-light"}}),{c(){e=v("span"),G(t.$$.fragment),this.h()},l(n){e=w(n,"SPAN",{class:!0});var o=E(e);F(t.$$.fragment,o),o.forEach(f),this.h()},h(){p(e,"class","loading svelte-1sphecr")},m(n,o){R(n,e,o),x(t,e,null),r=!0},p:te,i(n){r||(O(t.$$.fragment,n),r=!0)},o(n){j(t.$$.fragment,n),r=!1},d(n){n&&f(e),V(t)}}}function Fo(s){let e,t,r,n;const o=[Vo,xo],i=[];function a(l,u){return l[6]?0:1}return e=a(s),t=i[e]=o[e](s),{c(){t.c(),r=ie()},l(l){t.l(l),r=ie()},m(l,u){i[e].m(l,u),R(l,r,u),n=!0},p(l,u){let c=e;e=a(l),e===c?i[e].p(l,u):(fe(),j(i[c],1,1,()=>{i[c]=null}),de(),t=i[e],t?t.p(l,u):(t=i[e]=o[e](l),t.c()),O(t,1),t.m(r.parentNode,r))},i(l){n||(O(t),n=!0)},o(l){j(t),n=!1},d(l){i[e].d(l),l&&f(r)}}}function xo(s){let e,t,r;return t=new ue({props:{text:Jo,max:"12",className:"combo-wod-light"}}),{c(){e=v("span"),G(t.$$.fragment),this.h()},l(n){e=w(n,"SPAN",{class:!0});var o=E(e);F(t.$$.fragment,o),o.forEach(f),this.h()},h(){p(e,"class","no-game svelte-1sphecr")},m(n,o){R(n,e,o),x(t,e,null),r=!0},p:te,i(n){r||(O(t.$$.fragment,n),r=!0)},o(n){j(t.$$.fragment,n),r=!1},d(n){n&&f(e),V(t)}}}function Vo(s){var S,$,I;let e,t,r,n,o,i,a,l,u,c,h,g,m;e=new ue({props:{text:"today that",className:"combo-wod-light a"}}),r=new ue({props:{text:"person is",className:"combo-wod-light b"}}),o=new ue({props:{max:"12",text:(S=s[3])==null?void 0:S.name,className:"combo-wod c big"}});let _=(($=s[3])==null?void 0:$.location)&&zn(s),b=((I=s[3])==null?void 0:I.bio)&&qn(s);return c=new ue({props:{text:"can you",className:"combo-wod-light g "+s[4]}}),g=new ue({props:{text:`beat ${s[5]}?`,className:"combo-wod-light h"}}),{c(){G(e.$$.fragment),t=C(),G(r.$$.fragment),n=C(),G(o.$$.fragment),i=C(),_&&_.c(),a=C(),b&&b.c(),l=C(),u=v("span"),G(c.$$.fragment),h=C(),G(g.$$.fragment),this.h()},l(T){F(e.$$.fragment,T),t=N(T),F(r.$$.fragment,T),n=N(T),F(o.$$.fragment,T),i=N(T),_&&_.l(T),a=N(T),b&&b.l(T),l=N(T),u=w(T,"SPAN",{class:!0});var y=E(u);F(c.$$.fragment,y),h=N(y),F(g.$$.fragment,y),y.forEach(f),this.h()},h(){p(u,"class","beat svelte-1sphecr"),Y(u,"force-display",s[2]||s[1])},m(T,y){x(e,T,y),R(T,t,y),x(r,T,y),R(T,n,y),x(o,T,y),R(T,i,y),_&&_.m(T,y),R(T,a,y),b&&b.m(T,y),R(T,l,y),R(T,u,y),x(c,u,null),d(u,h),x(g,u,null),m=!0},p(T,y){var q,U,re;const P={};y&8&&(P.text=(q=T[3])==null?void 0:q.name),o.$set(P),(U=T[3])!=null&&U.location?_?(_.p(T,y),y&8&&O(_,1)):(_=zn(T),_.c(),O(_,1),_.m(a.parentNode,a)):_&&(fe(),j(_,1,1,()=>{_=null}),de()),(re=T[3])!=null&&re.bio?b?(b.p(T,y),y&8&&O(b,1)):(b=qn(T),b.c(),O(b,1),b.m(l.parentNode,l)):b&&(fe(),j(b,1,1,()=>{b=null}),de());const W={};y&16&&(W.className="combo-wod-light g "+T[4]),c.$set(W);const L={};y&32&&(L.text=`beat ${T[5]}?`),g.$set(L),y&6&&Y(u,"force-display",T[2]||T[1])},i(T){m||(O(e.$$.fragment,T),O(r.$$.fragment,T),O(o.$$.fragment,T),O(_),O(b),O(c.$$.fragment,T),O(g.$$.fragment,T),m=!0)},o(T){j(e.$$.fragment,T),j(r.$$.fragment,T),j(o.$$.fragment,T),j(_),j(b),j(c.$$.fragment,T),j(g.$$.fragment,T),m=!1},d(T){V(e,T),T&&f(t),V(r,T),T&&f(n),V(o,T),T&&f(i),_&&_.d(T),T&&f(a),b&&b.d(T),T&&f(l),T&&f(u),V(c),V(g)}}}function zn(s){var o;let e,t,r,n;return e=new ue({props:{text:"from",className:"combo-wod-light d"}}),r=new ue({props:{max:"13",text:((o=s[3])==null?void 0:o.location)+".",className:"combo-wod-light e"}}),{c(){G(e.$$.fragment),t=C(),G(r.$$.fragment)},l(i){F(e.$$.fragment,i),t=N(i),F(r.$$.fragment,i)},m(i,a){x(e,i,a),R(i,t,a),x(r,i,a),n=!0},p(i,a){var u;const l={};a&8&&(l.text=((u=i[3])==null?void 0:u.location)+"."),r.$set(l)},i(i){n||(O(e.$$.fragment,i),O(r.$$.fragment,i),n=!0)},o(i){j(e.$$.fragment,i),j(r.$$.fragment,i),n=!1},d(i){V(e,i),i&&f(t),V(r,i)}}}function qn(s){var n,o;let e,t,r;return t=new ue({props:{text:((n=s[3])==null?void 0:n.bio)+((o=s[3])!=null&&o.bio?".":""),max:"12",className:"combo-wod-light f"}}),{c(){e=v("span"),G(t.$$.fragment),this.h()},l(i){e=w(i,"SPAN",{class:!0});var a=E(e);F(t.$$.fragment,a),a.forEach(f),this.h()},h(){p(e,"class","bio svelte-1sphecr"),Y(e,"bump",s[1])},m(i,a){R(i,e,a),x(t,e,null),r=!0},p(i,a){var u,c;const l={};a&8&&(l.text=((u=i[3])==null?void 0:u.bio)+((c=i[3])!=null&&c.bio?".":"")),t.$set(l),a&2&&Y(e,"bump",i[1])},i(i){r||(O(t.$$.fragment,i),r=!0)},o(i){j(t.$$.fragment,i),r=!1},d(i){i&&f(e),V(t)}}}function Wo(s){let e,t,r,n;const o=[Fo,Go],i=[];function a(l,u){return l[0]?0:1}return t=a(s),r=i[t]=o[t](s),{c(){e=v("p"),r.c(),this.h()},l(l){e=w(l,"P",{id:!0,class:!0});var u=E(e);r.l(u),u.forEach(f),this.h()},h(){p(e,"id","chunk-info"),p(e,"class","svelte-1sphecr")},m(l,u){R(l,e,u),i[t].m(e,null),n=!0},p(l,[u]){let c=t;t=a(l),t===c?i[t].p(l,u):(fe(),j(i[c],1,1,()=>{i[c]=null}),de(),r=i[t],r?r.p(l,u):(r=i[t]=o[t](l),r.c()),O(r,1),r.m(e,null))},i(l){n||(O(r),n=!0)},o(l){j(r),n=!1},d(l){l&&f(e),i[t].d()}}}const Jo="there is no active game right now. launching sep. 23!",Ko="loading today's game...";function Yo(s,e,t){let r,n,o,i,a,l;z(s,_t,c=>t(3,a=c)),z(s,gt,c=>t(6,l=c));let{loaded:u}=e;return s.$$set=c=>{"loaded"in c&&t(0,u=c.loaded)},s.$$.update=()=>{s.$$.dirty&8&&t(5,r=a?a.pronoun.split("/")[1]:void 0),s.$$.dirty&8&&t(1,n=!(a!=null&&a.location)),s.$$.dirty&8&&t(2,o=!(a!=null&&a.bio)),s.$$.dirty&6&&t(4,i=o&&n?"bump":"")},[u,n,o,a,i,r,l]}class Xo extends Q{constructor(e){super(),Z(this,e,Yo,Wo,X,{loaded:0})}}function Qo(s){let e,t,r,n,o,i,a,l,u,c,h,g,m,_,b,S,$,I,T,y,P,W,L,q,U,re,D,J,M,k,A,K,ee,ve,le;return t=new Bo({props:{text:s[2]}}),o=new qo({props:{text:s[3]}}),a=new Xo({props:{loaded:s[0]}}),{c(){e=v("div"),G(t.$$.fragment),r=C(),n=v("div"),G(o.$$.fragment),i=C(),G(a.$$.fragment),l=C(),u=v("div"),c=v("div"),h=v("button"),g=B("play"),_=C(),b=v("div"),S=v("div"),$=v("button"),I=B("rules"),T=C(),y=v("div"),P=v("span"),W=v("p"),L=B("be the next stranger: "),q=v("a"),U=B("sign up"),re=C(),D=v("span"),J=v("p"),M=B("want to be the next stranger?"),k=C(),A=v("a"),K=B("sign up"),this.h()},l(oe){e=w(oe,"DIV",{class:!0});var pe=E(e);F(t.$$.fragment,pe),r=N(pe),n=w(pe,"DIV",{class:!0});var ye=E(n);F(o.$$.fragment,ye),i=N(ye),F(a.$$.fragment,ye),ye.forEach(f),l=N(pe),u=w(pe,"DIV",{class:!0});var Pe=E(u);c=w(Pe,"DIV",{class:!0});var Xe=E(c);h=w(Xe,"BUTTON",{class:!0});var Re=E(h);g=H(Re,"play"),Re.forEach(f),Xe.forEach(f),_=N(Pe),b=w(Pe,"DIV",{class:!0});var Ae=E(b);S=w(Ae,"DIV",{class:!0});var Qe=E(S);$=w(Qe,"BUTTON",{class:!0});var Ce=E($);I=H(Ce,"rules"),Ce.forEach(f),Qe.forEach(f),T=N(Ae),y=w(Ae,"DIV",{class:!0});var Ne=E(y);P=w(Ne,"SPAN",{class:!0});var Ze=E(P);W=w(Ze,"P",{class:!0});var He=E(W);L=H(He,"be the next stranger: "),q=w(He,"A",{href:!0,target:!0});var Se=E(q);U=H(Se,"sign up"),Se.forEach(f),He.forEach(f),Ze.forEach(f),re=N(Ne),D=w(Ne,"SPAN",{class:!0});var $e=E(D);J=w($e,"P",{class:!0});var et=E(J);M=H(et,"want to be the next stranger?"),et.forEach(f),k=N($e),A=w($e,"A",{role:!0,href:!0,target:!0,class:!0});var tt=E(A);K=H(tt,"sign up"),tt.forEach(f),$e.forEach(f),Ne.forEach(f),Ae.forEach(f),Pe.forEach(f),pe.forEach(f),this.h()},h(){p(n,"class","details svelte-1sgn8uy"),h.disabled=m=!s[0],p(h,"class","svelte-1sgn8uy"),p(c,"class","play svelte-1sgn8uy"),p($,"class","svelte-1sgn8uy"),p(S,"class","rules svelte-1sgn8uy"),p(q,"href","https://www.getrevue.co/profile/wordsagainststrangers/"),p(q,"target","_blank"),p(W,"class","svelte-1sgn8uy"),p(P,"class","alt svelte-1sgn8uy"),p(J,"class","svelte-1sgn8uy"),p(A,"role","button"),p(A,"href","https://www.getrevue.co/profile/wordsagainststrangers/"),p(A,"target","_blank"),p(A,"class","svelte-1sgn8uy"),p(D,"class","reg svelte-1sgn8uy"),p(y,"class","signup svelte-1sgn8uy"),p(b,"class","other svelte-1sgn8uy"),p(u,"class","cta svelte-1sgn8uy"),p(e,"class","wrapper svelte-1sgn8uy")},m(oe,pe){R(oe,e,pe),x(t,e,null),d(e,r),d(e,n),x(o,n,null),d(n,i),x(a,n,null),d(e,l),d(e,u),d(u,c),d(c,h),d(h,g),d(u,_),d(u,b),d(b,S),d(S,$),d($,I),d(b,T),d(b,y),d(y,P),d(P,W),d(W,L),d(W,q),d(q,U),d(y,re),d(y,D),d(D,J),d(J,M),d(D,k),d(D,A),d(A,K),ee=!0,ve||(le=[ce(h,"click",s[6]),ce($,"click",s[7])],ve=!0)},p(oe,[pe]){const ye={};pe&1&&(ye.loaded=oe[0]),a.$set(ye),(!ee||pe&1&&m!==(m=!oe[0]))&&(h.disabled=m)},i(oe){ee||(O(t.$$.fragment,oe),O(o.$$.fragment,oe),O(a.$$.fragment,oe),ee=!0)},o(oe){j(t.$$.fragment,oe),j(o.$$.fragment,oe),j(a.$$.fragment,oe),ee=!1},d(oe){oe&&f(e),V(t),V(o),V(a),ve=!1,Ye(le)}}}function Zo(s,e,t){let r,n,o;z(s,gt,m=>t(5,r=m)),z(s,_t,m=>t(8,n=m)),z(s,Be,m=>t(1,o=m));let{loaded:i}=e;const{title:a,description:l}=is("copy"),u=wt(),c=async()=>{const[m]=await Uo(r);be(_t,n=m,n)},h=()=>u("play"),g=()=>{be(Be,o="rules",o)};return s.$$set=m=>{"loaded"in m&&t(0,i=m.loaded)},s.$$.update=()=>{s.$$.dirty&32&&r&&c()},[i,o,a,l,u,r,h,g]}class ea extends Q{constructor(e){super(),Z(this,e,Zo,Qo,X,{loaded:0})}}const ta="1.35.4",_s={"X-Client-Info":`supabase-js/${ta}`},ra="supabase.auth.token";function na(s){return s.replace(/\/$/,"")}const sa=()=>typeof window<"u",ia="1.22.20",oa="http://localhost:9999",aa={"X-Client-Info":`gotrue-js/${ia}`},Mt=10,xe={ERROR_MESSAGE:"Request Failed",MAX_RETRIES:10,RETRY_INTERVAL:2},Et="supabase.auth.token",la={name:"sb",lifetime:60*60*8,domain:"",path:"/",sameSite:"lax"};var Pt=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(c){try{u(r.next(c))}catch(h){i(h)}}function l(c){try{u(r.throw(c))}catch(h){i(h)}}function u(c){c.done?o(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};const ua=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),ca=(s,e)=>{if(!(s!=null&&s.status))return e({message:xe.ERROR_MESSAGE});if(typeof s.json!="function")return e(s);s.json().then(t=>e({message:ua(t),status:(s==null?void 0:s.status)||500}))},ha=(s,e,t)=>{const r={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"||(r.headers=Object.assign({"Content-Type":"text/plain;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(t)),r};function Vt(s,e,t,r,n){return Pt(this,void 0,void 0,function*(){return new Promise((o,i)=>{s(t,ha(e,r,n)).then(a=>{if(!a.ok)throw a;return r!=null&&r.noResolveJson?o:a.json()}).then(a=>o(a)).catch(a=>ca(a,i))})})}function fr(s,e,t){return Pt(this,void 0,void 0,function*(){return Vt(s,"GET",e,t)})}function ge(s,e,t,r){return Pt(this,void 0,void 0,function*(){return Vt(s,"POST",e,r,t)})}function Gn(s,e,t,r){return Pt(this,void 0,void 0,function*(){return Vt(s,"PUT",e,r,t)})}function fa(s,e,t,r){return Pt(this,void 0,void 0,function*(){return Vt(s,"DELETE",e,r,t)})}function da(s,e,t){const r=t||{},n=encodeURIComponent,o=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;if(typeof n!="function")throw new TypeError("option encode is invalid");if(!o.test(s))throw new TypeError("argument name is invalid");const i=n(e);if(i&&!o.test(i))throw new TypeError("argument val is invalid");let a=s+"="+i;if(r.maxAge!=null){const l=r.maxAge-0;if(isNaN(l)||!isFinite(l))throw new TypeError("option maxAge is invalid");a+="; Max-Age="+Math.floor(l)}if(r.domain){if(!o.test(r.domain))throw new TypeError("option domain is invalid");a+="; Domain="+r.domain}if(r.path){if(!o.test(r.path))throw new TypeError("option path is invalid");a+="; Path="+r.path}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");a+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return a}function ma(s){if(!s||!s.headers||!s.headers.host)throw new Error('The "host" request header is not available');const e=s.headers.host.indexOf(":")>-1&&s.headers.host.split(":")[0]||s.headers.host;return!(["localhost","127.0.0.1"].indexOf(e)>-1||e.endsWith(".local"))}function pa(s,e){var t,r,n;return da(s.name,s.value,{maxAge:s.maxAge,expires:new Date(Date.now()+s.maxAge*1e3),httpOnly:!0,secure:e,path:(t=s.path)!==null&&t!==void 0?t:"/",domain:(r=s.domain)!==null&&r!==void 0?r:"",sameSite:(n=s.sameSite)!==null&&n!==void 0?n:"lax"})}function vr(s,e,t){const r=t.map(o=>pa(o,ma(s))),n=e.getHeader("Set-Cookie");return n&&(n instanceof Array?Array.prototype.push.apply(r,n):typeof n=="string"&&r.push(n)),r}function Lt(s,e,t){e.setHeader("Set-Cookie",vr(s,e,t))}var Wt=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(c){try{u(r.next(c))}catch(h){i(h)}}function l(c){try{u(r.throw(c))}catch(h){i(h)}}function u(c){c.done?o(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};function Ue(s){return Math.round(Date.now()/1e3)+s}function ga(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}const Ie=()=>typeof window<"u";function Me(s,e){var t;e||(e=((t=window==null?void 0:window.location)===null||t===void 0?void 0:t.href)||""),s=s.replace(/[\[\]]/g,"\\$&");const r=new RegExp("[?&#]"+s+"(=([^&#]*)|&|#|$)"),n=r.exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}const _a=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Wt(void 0,void 0,void 0,function*(){return yield(yield Ft(()=>import("./browser-ponyfill-2e15ed5e.js").then(r=>r.b),["_app/immutable/chunks/browser-ponyfill-2e15ed5e.js","_app/immutable/chunks/_commonjsHelpers-e864563f.js"])).fetch(...t)}):e=fetch,(...t)=>e(...t)},va=(s,e,t)=>Wt(void 0,void 0,void 0,function*(){Ie()&&(yield s==null?void 0:s.setItem(e,JSON.stringify(t)))}),wa=(s,e)=>Wt(void 0,void 0,void 0,function*(){const t=Ie()&&(yield s==null?void 0:s.getItem(e));if(!t)return null;try{return JSON.parse(t)}catch{return t}}),ba=(s,e)=>{const t=Ie()&&(s==null?void 0:s.getItem(e));if(!t||typeof t!="string")return null;try{return JSON.parse(t)}catch{return t}},ya=(s,e)=>Wt(void 0,void 0,void 0,function*(){Ie()&&(yield s==null?void 0:s.removeItem(e))});var ae=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(c){try{u(r.next(c))}catch(h){i(h)}}function l(c){try{u(r.throw(c))}catch(h){i(h)}}function u(c){c.done?o(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};class ka{constructor({url:e="",headers:t={},cookieOptions:r,fetch:n}){this.url=e,this.headers=t,this.cookieOptions=Object.assign(Object.assign({},la),r),this.fetch=_a(n)}_createRequestHeaders(e){const t=Object.assign({},this.headers);return t.Authorization=`Bearer ${e}`,t}cookieName(){var e;return(e=this.cookieOptions.name)!==null&&e!==void 0?e:""}getUrlForProvider(e,t){const r=[`provider=${encodeURIComponent(e)}`];if(t!=null&&t.redirectTo&&r.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t!=null&&t.scopes&&r.push(`scopes=${encodeURIComponent(t.scopes)}`),t!=null&&t.queryParams){const n=new URLSearchParams(t.queryParams);r.push(`${n}`)}return`${this.url}/authorize?${r.join("&")}`}signUpWithEmail(e,t,r={}){return ae(this,void 0,void 0,function*(){try{const n=Object.assign({},this.headers);let o="";r.redirectTo&&(o="?redirect_to="+encodeURIComponent(r.redirectTo));const i=yield ge(this.fetch,`${this.url}/signup${o}`,{email:e,password:t,data:r.data,gotrue_meta_security:{captcha_token:r.captchaToken}},{headers:n}),a=Object.assign({},i);return a.expires_in&&(a.expires_at=Ue(i.expires_in)),{data:a,error:null}}catch(n){return{data:null,error:n}}})}signInWithEmail(e,t,r={}){return ae(this,void 0,void 0,function*(){try{const n=Object.assign({},this.headers);let o="?grant_type=password";r.redirectTo&&(o+="&redirect_to="+encodeURIComponent(r.redirectTo));const i=yield ge(this.fetch,`${this.url}/token${o}`,{email:e,password:t},{headers:n}),a=Object.assign({},i);return a.expires_in&&(a.expires_at=Ue(i.expires_in)),{data:a,error:null}}catch(n){return{data:null,error:n}}})}signUpWithPhone(e,t,r={}){return ae(this,void 0,void 0,function*(){try{const n=Object.assign({},this.headers),o=yield ge(this.fetch,`${this.url}/signup`,{phone:e,password:t,data:r.data,gotrue_meta_security:{captcha_token:r.captchaToken}},{headers:n}),i=Object.assign({},o);return i.expires_in&&(i.expires_at=Ue(o.expires_in)),{data:i,error:null}}catch(n){return{data:null,error:n}}})}signInWithPhone(e,t){return ae(this,void 0,void 0,function*(){try{const r=Object.assign({},this.headers),n="?grant_type=password",o=yield ge(this.fetch,`${this.url}/token${n}`,{phone:e,password:t},{headers:r}),i=Object.assign({},o);return i.expires_in&&(i.expires_at=Ue(o.expires_in)),{data:i,error:null}}catch(r){return{data:null,error:r}}})}signInWithOpenIDConnect({id_token:e,nonce:t,client_id:r,issuer:n,provider:o}){return ae(this,void 0,void 0,function*(){try{const i=Object.assign({},this.headers),a="?grant_type=id_token",l=yield ge(this.fetch,`${this.url}/token${a}`,{id_token:e,nonce:t,client_id:r,issuer:n,provider:o},{headers:i}),u=Object.assign({},l);return u.expires_in&&(u.expires_at=Ue(l.expires_in)),{data:u,error:null}}catch(i){return{data:null,error:i}}})}sendMagicLinkEmail(e,t={}){var r;return ae(this,void 0,void 0,function*(){try{const n=Object.assign({},this.headers);let o="";t.redirectTo&&(o+="?redirect_to="+encodeURIComponent(t.redirectTo));const i=(r=t.shouldCreateUser)!==null&&r!==void 0?r:!0;return{data:yield ge(this.fetch,`${this.url}/otp${o}`,{email:e,create_user:i,gotrue_meta_security:{captcha_token:t.captchaToken}},{headers:n}),error:null}}catch(n){return{data:null,error:n}}})}sendMobileOTP(e,t={}){var r;return ae(this,void 0,void 0,function*(){try{const n=(r=t.shouldCreateUser)!==null&&r!==void 0?r:!0,o=Object.assign({},this.headers);return{data:yield ge(this.fetch,`${this.url}/otp`,{phone:e,create_user:n,gotrue_meta_security:{captcha_token:t.captchaToken}},{headers:o}),error:null}}catch(n){return{data:null,error:n}}})}signOut(e){return ae(this,void 0,void 0,function*(){try{return yield ge(this.fetch,`${this.url}/logout`,{},{headers:this._createRequestHeaders(e),noResolveJson:!0}),{error:null}}catch(t){return{error:t}}})}verifyMobileOTP(e,t,r={}){return ae(this,void 0,void 0,function*(){try{const n=Object.assign({},this.headers),o=yield ge(this.fetch,`${this.url}/verify`,{phone:e,token:t,type:"sms",redirect_to:r.redirectTo},{headers:n}),i=Object.assign({},o);return i.expires_in&&(i.expires_at=Ue(o.expires_in)),{data:i,error:null}}catch(n){return{data:null,error:n}}})}verifyOTP({email:e,phone:t,token:r,type:n="sms"},o={}){return ae(this,void 0,void 0,function*(){try{const i=Object.assign({},this.headers),a=yield ge(this.fetch,`${this.url}/verify`,{email:e,phone:t,token:r,type:n,redirect_to:o.redirectTo},{headers:i}),l=Object.assign({},a);return l.expires_in&&(l.expires_at=Ue(a.expires_in)),{data:l,error:null}}catch(i){return{data:null,error:i}}})}inviteUserByEmail(e,t={}){return ae(this,void 0,void 0,function*(){try{const r=Object.assign({},this.headers);let n="";return t.redirectTo&&(n+="?redirect_to="+encodeURIComponent(t.redirectTo)),{data:yield ge(this.fetch,`${this.url}/invite${n}`,{email:e,data:t.data},{headers:r}),error:null}}catch(r){return{data:null,error:r}}})}resetPasswordForEmail(e,t={}){return ae(this,void 0,void 0,function*(){try{const r=Object.assign({},this.headers);let n="";return t.redirectTo&&(n+="?redirect_to="+encodeURIComponent(t.redirectTo)),{data:yield ge(this.fetch,`${this.url}/recover${n}`,{email:e,gotrue_meta_security:{captcha_token:t.captchaToken}},{headers:r}),error:null}}catch(r){return{data:null,error:r}}})}refreshAccessToken(e){return ae(this,void 0,void 0,function*(){try{const t=yield ge(this.fetch,`${this.url}/token?grant_type=refresh_token`,{refresh_token:e},{headers:this.headers}),r=Object.assign({},t);return r.expires_in&&(r.expires_at=Ue(t.expires_in)),{data:r,error:null}}catch(t){return{data:null,error:t}}})}setAuthCookie(e,t){e.method!=="POST"&&(t.setHeader("Allow","POST"),t.status(405).end("Method Not Allowed"));const{event:r,session:n}=e.body;if(!r)throw new Error("Auth event missing!");if(r==="SIGNED_IN"){if(!n)throw new Error("Auth session missing!");Lt(e,t,[{key:"access-token",value:n.access_token},{key:"refresh-token",value:n.refresh_token}].map(o=>{var i;return{name:`${this.cookieName()}-${o.key}`,value:o.value,domain:this.cookieOptions.domain,maxAge:(i=this.cookieOptions.lifetime)!==null&&i!==void 0?i:0,path:this.cookieOptions.path,sameSite:this.cookieOptions.sameSite}}))}r==="SIGNED_OUT"&&Lt(e,t,["access-token","refresh-token"].map(o=>({name:`${this.cookieName()}-${o}`,value:"",maxAge:-1}))),t.status(200).json({})}deleteAuthCookie(e,t,{redirectTo:r="/"}){return Lt(e,t,["access-token","refresh-token"].map(n=>({name:`${this.cookieName()}-${n}`,value:"",maxAge:-1}))),t.redirect(307,r)}getAuthCookieString(e,t){e.method!=="POST"&&(t.setHeader("Allow","POST"),t.status(405).end("Method Not Allowed"));const{event:r,session:n}=e.body;if(!r)throw new Error("Auth event missing!");if(r==="SIGNED_IN"){if(!n)throw new Error("Auth session missing!");return vr(e,t,[{key:"access-token",value:n.access_token},{key:"refresh-token",value:n.refresh_token}].map(o=>{var i;return{name:`${this.cookieName()}-${o.key}`,value:o.value,domain:this.cookieOptions.domain,maxAge:(i=this.cookieOptions.lifetime)!==null&&i!==void 0?i:0,path:this.cookieOptions.path,sameSite:this.cookieOptions.sameSite}}))}return r==="SIGNED_OUT"?vr(e,t,["access-token","refresh-token"].map(o=>({name:`${this.cookieName()}-${o}`,value:"",maxAge:-1}))):t.getHeader("Set-Cookie")}generateLink(e,t,r={}){return ae(this,void 0,void 0,function*(){try{return{data:yield ge(this.fetch,`${this.url}/admin/generate_link`,{type:e,email:t,password:r.password,data:r.data,redirect_to:r.redirectTo},{headers:this.headers}),error:null}}catch(n){return{data:null,error:n}}})}createUser(e){return ae(this,void 0,void 0,function*(){try{const t=yield ge(this.fetch,`${this.url}/admin/users`,e,{headers:this.headers});return{user:t,data:t,error:null}}catch(t){return{user:null,data:null,error:t}}})}listUsers(){return ae(this,void 0,void 0,function*(){try{return{data:(yield fr(this.fetch,`${this.url}/admin/users`,{headers:this.headers})).users,error:null}}catch(e){return{data:null,error:e}}})}getUserById(e){return ae(this,void 0,void 0,function*(){try{return{data:yield fr(this.fetch,`${this.url}/admin/users/${e}`,{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}getUserByCookie(e,t){return ae(this,void 0,void 0,function*(){try{if(!e.cookies)throw new Error("Not able to parse cookies! When using Express make sure the cookie-parser middleware is in use!");const r=e.cookies[`${this.cookieName()}-access-token`],n=e.cookies[`${this.cookieName()}-refresh-token`];if(!r)throw new Error("No cookie found!");const{user:o,error:i}=yield this.getUser(r);if(i){if(!n)throw new Error("No refresh_token cookie found!");if(!t)throw new Error("You need to pass the res object to automatically refresh the session!");const{data:a,error:l}=yield this.refreshAccessToken(n);if(l)throw l;if(a)return Lt(e,t,[{key:"access-token",value:a.access_token},{key:"refresh-token",value:a.refresh_token}].map(u=>{var c;return{name:`${this.cookieName()}-${u.key}`,value:u.value,domain:this.cookieOptions.domain,maxAge:(c=this.cookieOptions.lifetime)!==null&&c!==void 0?c:0,path:this.cookieOptions.path,sameSite:this.cookieOptions.sameSite}})),{token:a.access_token,user:a.user,data:a.user,error:null}}return{token:r,user:o,data:o,error:null}}catch(r){return{token:null,user:null,data:null,error:r}}})}updateUserById(e,t){return ae(this,void 0,void 0,function*(){try{const r=yield Gn(this.fetch,`${this.url}/admin/users/${e}`,t,{headers:this.headers});return{user:r,data:r,error:null}}catch(r){return{user:null,data:null,error:r}}})}deleteUser(e){return ae(this,void 0,void 0,function*(){try{const t=yield fa(this.fetch,`${this.url}/admin/users/${e}`,{},{headers:this.headers});return{user:t,data:t,error:null}}catch(t){return{user:null,data:null,error:t}}})}getUser(e){return ae(this,void 0,void 0,function*(){try{const t=yield fr(this.fetch,`${this.url}/user`,{headers:this._createRequestHeaders(e)});return{user:t,data:t,error:null}}catch(t){return{user:null,data:null,error:t}}})}updateUser(e,t){return ae(this,void 0,void 0,function*(){try{const r=yield Gn(this.fetch,`${this.url}/user`,t,{headers:this._createRequestHeaders(e)});return{user:r,data:r,error:null}}catch(r){return{user:null,data:null,error:r}}})}}function Ea(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var _e=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(c){try{u(r.next(c))}catch(h){i(h)}}function l(c){try{u(r.throw(c))}catch(h){i(h)}}function u(c){c.done?o(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};Ea();const Ta={url:oa,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,multiTab:!0,headers:aa};class Sa{constructor(e){this.stateChangeEmitters=new Map,this.networkRetries=0;const t=Object.assign(Object.assign({},Ta),e);this.currentUser=null,this.currentSession=null,this.autoRefreshToken=t.autoRefreshToken,this.persistSession=t.persistSession,this.multiTab=t.multiTab,this.localStorage=t.localStorage||globalThis.localStorage,this.api=new ka({url:t.url,headers:t.headers,cookieOptions:t.cookieOptions,fetch:t.fetch}),this._recoverSession(),this._recoverAndRefresh(),this._listenForMultiTabEvents(),this._handleVisibilityChange(),t.detectSessionInUrl&&Ie()&&!!Me("access_token")&&this.getSessionFromUrl({storeSession:!0}).then(({error:r})=>{if(r)throw new Error("Error getting session from URL.")})}signUp({email:e,password:t,phone:r},n={}){return _e(this,void 0,void 0,function*(){try{this._removeSession();const{data:o,error:i}=r&&t?yield this.api.signUpWithPhone(r,t,{data:n.data,captchaToken:n.captchaToken}):yield this.api.signUpWithEmail(e,t,{redirectTo:n.redirectTo,data:n.data,captchaToken:n.captchaToken});if(i)throw i;if(!o)throw"An error occurred on sign up.";let a=null,l=null;return o.access_token&&(a=o,l=a.user,this._saveSession(a),this._notifyAllSubscribers("SIGNED_IN")),o.id&&(l=o),{user:l,session:a,error:null}}catch(o){return{user:null,session:null,error:o}}})}signIn({email:e,phone:t,password:r,refreshToken:n,provider:o,oidc:i},a={}){return _e(this,void 0,void 0,function*(){try{if(this._removeSession(),e&&!r){const{error:l}=yield this.api.sendMagicLinkEmail(e,{redirectTo:a.redirectTo,shouldCreateUser:a.shouldCreateUser,captchaToken:a.captchaToken});return{user:null,session:null,error:l}}if(e&&r)return this._handleEmailSignIn(e,r,{redirectTo:a.redirectTo});if(t&&!r){const{error:l}=yield this.api.sendMobileOTP(t,{shouldCreateUser:a.shouldCreateUser,captchaToken:a.captchaToken});return{user:null,session:null,error:l}}if(t&&r)return this._handlePhoneSignIn(t,r);if(n){const{error:l}=yield this._callRefreshToken(n);if(l)throw l;return{user:this.currentUser,session:this.currentSession,error:null}}if(o)return this._handleProviderSignIn(o,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});if(i)return this._handleOpenIDConnectSignIn(i);throw new Error("You must provide either an email, phone number, a third-party provider or OpenID Connect.")}catch(l){return{user:null,session:null,error:l}}})}verifyOTP(e,t={}){return _e(this,void 0,void 0,function*(){try{this._removeSession();const{data:r,error:n}=yield this.api.verifyOTP(e,t);if(n)throw n;if(!r)throw"An error occurred on token verification.";let o=null,i=null;return r.access_token&&(o=r,i=o.user,this._saveSession(o),this._notifyAllSubscribers("SIGNED_IN")),r.id&&(i=r),{user:i,session:o,error:null}}catch(r){return{user:null,session:null,error:r}}})}user(){return this.currentUser}session(){return this.currentSession}refreshSession(){var e;return _e(this,void 0,void 0,function*(){try{if(!(!((e=this.currentSession)===null||e===void 0)&&e.access_token))throw new Error("Not logged in.");const{error:t}=yield this._callRefreshToken();if(t)throw t;return{data:this.currentSession,user:this.currentUser,error:null}}catch(t){return{data:null,user:null,error:t}}})}update(e){var t;return _e(this,void 0,void 0,function*(){try{if(!(!((t=this.currentSession)===null||t===void 0)&&t.access_token))throw new Error("Not logged in.");const{user:r,error:n}=yield this.api.updateUser(this.currentSession.access_token,e);if(n)throw n;if(!r)throw Error("Invalid user data.");const o=Object.assign(Object.assign({},this.currentSession),{user:r});return this._saveSession(o),this._notifyAllSubscribers("USER_UPDATED"),{data:r,user:r,error:null}}catch(r){return{data:null,user:null,error:r}}})}setSession(e){return _e(this,void 0,void 0,function*(){try{if(!e)throw new Error("No current session.");const{data:t,error:r}=yield this.api.refreshAccessToken(e);return r?{session:null,error:r}:(this._saveSession(t),this._notifyAllSubscribers("SIGNED_IN"),{session:t,error:null})}catch(t){return{error:t,session:null}}})}setAuth(e){return this.currentSession=Object.assign(Object.assign({},this.currentSession),{access_token:e,token_type:"bearer",user:this.user()}),this._notifyAllSubscribers("TOKEN_REFRESHED"),this.currentSession}getSessionFromUrl(e){return _e(this,void 0,void 0,function*(){try{if(!Ie())throw new Error("No browser detected.");const t=Me("error_description");if(t)throw new Error(t);const r=Me("provider_token"),n=Me("access_token");if(!n)throw new Error("No access_token detected.");const o=Me("expires_in");if(!o)throw new Error("No expires_in detected.");const i=Me("refresh_token");if(!i)throw new Error("No refresh_token detected.");const a=Me("token_type");if(!a)throw new Error("No token_type detected.");const u=Math.round(Date.now()/1e3)+parseInt(o),{user:c,error:h}=yield this.api.getUser(n);if(h)throw h;const g={provider_token:r,access_token:n,expires_in:parseInt(o),expires_at:u,refresh_token:i,token_type:a,user:c};if(e!=null&&e.storeSession){this._saveSession(g);const m=Me("type");this._notifyAllSubscribers("SIGNED_IN"),m==="recovery"&&this._notifyAllSubscribers("PASSWORD_RECOVERY")}return window.location.hash="",{data:g,error:null}}catch(t){return{data:null,error:t}}})}signOut(){var e;return _e(this,void 0,void 0,function*(){const t=(e=this.currentSession)===null||e===void 0?void 0:e.access_token;if(this._removeSession(),this._notifyAllSubscribers("SIGNED_OUT"),t){const{error:r}=yield this.api.signOut(t);if(r)return{error:r}}return{error:null}})}onAuthStateChange(e){try{const t=ga(),r={id:t,callback:e,unsubscribe:()=>{this.stateChangeEmitters.delete(t)}};return this.stateChangeEmitters.set(t,r),{data:r,error:null}}catch(t){return{data:null,error:t}}}_handleEmailSignIn(e,t,r={}){var n,o;return _e(this,void 0,void 0,function*(){try{const{data:i,error:a}=yield this.api.signInWithEmail(e,t,{redirectTo:r.redirectTo});return a||!i?{data:null,user:null,session:null,error:a}:((((n=i==null?void 0:i.user)===null||n===void 0?void 0:n.confirmed_at)||((o=i==null?void 0:i.user)===null||o===void 0?void 0:o.email_confirmed_at))&&(this._saveSession(i),this._notifyAllSubscribers("SIGNED_IN")),{data:i,user:i.user,session:i,error:null})}catch(i){return{data:null,user:null,session:null,error:i}}})}_handlePhoneSignIn(e,t){var r;return _e(this,void 0,void 0,function*(){try{const{data:n,error:o}=yield this.api.signInWithPhone(e,t);return o||!n?{data:null,user:null,session:null,error:o}:(!((r=n==null?void 0:n.user)===null||r===void 0)&&r.phone_confirmed_at&&(this._saveSession(n),this._notifyAllSubscribers("SIGNED_IN")),{data:n,user:n.user,session:n,error:null})}catch(n){return{data:null,user:null,session:null,error:n}}})}_handleProviderSignIn(e,t={}){const r=this.api.getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});try{return Ie()&&(window.location.href=r),{provider:e,url:r,data:null,session:null,user:null,error:null}}catch(n){return r?{provider:e,url:r,data:null,session:null,user:null,error:null}:{data:null,user:null,session:null,error:n}}}_handleOpenIDConnectSignIn({id_token:e,nonce:t,client_id:r,issuer:n,provider:o}){return _e(this,void 0,void 0,function*(){if(e&&t&&(r&&n||o))try{const{data:i,error:a}=yield this.api.signInWithOpenIDConnect({id_token:e,nonce:t,client_id:r,issuer:n,provider:o});return a||!i?{user:null,session:null,error:a}:(this._saveSession(i),this._notifyAllSubscribers("SIGNED_IN"),{user:i.user,session:i,error:null})}catch(i){return{user:null,session:null,error:i}}throw new Error("You must provide a OpenID Connect provider with your id token and nonce.")})}_recoverSession(){try{const e=ba(this.localStorage,Et);if(!e)return null;const{currentSession:t,expiresAt:r}=e,n=Math.round(Date.now()/1e3);r>=n+Mt&&(t==null?void 0:t.user)&&(this._saveSession(t),this._notifyAllSubscribers("SIGNED_IN"))}catch(e){console.log("error",e)}}_recoverAndRefresh(){return _e(this,void 0,void 0,function*(){try{const e=yield wa(this.localStorage,Et);if(!e)return null;const{currentSession:t,expiresAt:r}=e,n=Math.round(Date.now()/1e3);if(r<n+Mt)if(this.autoRefreshToken&&t.refresh_token){this.networkRetries++;const{error:o}=yield this._callRefreshToken(t.refresh_token);if(o){if(console.log(o.message),o.message===xe.ERROR_MESSAGE&&this.networkRetries<xe.MAX_RETRIES){this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),this.refreshTokenTimer=setTimeout(()=>this._recoverAndRefresh(),Math.pow(xe.RETRY_INTERVAL,this.networkRetries)*100);return}yield this._removeSession()}this.networkRetries=0}else this._removeSession();else t?(this._saveSession(t),this._notifyAllSubscribers("SIGNED_IN")):(console.log("Current session is missing data."),this._removeSession())}catch(e){return console.error(e),null}})}_callRefreshToken(e){var t;return e===void 0&&(e=(t=this.currentSession)===null||t===void 0?void 0:t.refresh_token),_e(this,void 0,void 0,function*(){try{if(!e)throw new Error("No current session.");const{data:r,error:n}=yield this.api.refreshAccessToken(e);if(n)throw n;if(!r)throw Error("Invalid session data.");return this._saveSession(r),this._notifyAllSubscribers("TOKEN_REFRESHED"),this._notifyAllSubscribers("SIGNED_IN"),{data:r,error:null}}catch(r){return{data:null,error:r}}})}_notifyAllSubscribers(e){this.stateChangeEmitters.forEach(t=>t.callback(e,this.currentSession))}_saveSession(e){this.currentSession=e,this.currentUser=e.user;const t=e.expires_at;if(t){const r=Math.round(Date.now()/1e3),n=t-r,o=n>Mt?Mt:.5;this._startAutoRefreshToken((n-o)*1e3)}this.persistSession&&e.expires_at&&this._persistSession(this.currentSession)}_persistSession(e){const t={currentSession:e,expiresAt:e.expires_at};va(this.localStorage,Et,t)}_removeSession(){return _e(this,void 0,void 0,function*(){this.currentSession=null,this.currentUser=null,this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),ya(this.localStorage,Et)})}_startAutoRefreshToken(e){this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),!(e<=0||!this.autoRefreshToken)&&(this.refreshTokenTimer=setTimeout(()=>_e(this,void 0,void 0,function*(){this.networkRetries++;const{error:t}=yield this._callRefreshToken();t||(this.networkRetries=0),(t==null?void 0:t.message)===xe.ERROR_MESSAGE&&this.networkRetries<xe.MAX_RETRIES&&this._startAutoRefreshToken(Math.pow(xe.RETRY_INTERVAL,this.networkRetries)*100)}),e),typeof this.refreshTokenTimer.unref=="function"&&this.refreshTokenTimer.unref())}_listenForMultiTabEvents(){if(!this.multiTab||!Ie()||!(window!=null&&window.addEventListener))return!1;try{window==null||window.addEventListener("storage",e=>{var t;if(e.key===Et){const r=JSON.parse(String(e.newValue));!((t=r==null?void 0:r.currentSession)===null||t===void 0)&&t.access_token?(this._saveSession(r.currentSession),this._notifyAllSubscribers("SIGNED_IN")):(this._removeSession(),this._notifyAllSubscribers("SIGNED_OUT"))}})}catch(e){console.error("_listenForMultiTabEvents",e)}}_handleVisibilityChange(){if(!this.multiTab||!Ie()||!(window!=null&&window.addEventListener))return!1;try{window==null||window.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this._recoverAndRefresh()})}catch(e){console.error("_handleVisibilityChange",e)}}}class $a extends Sa{constructor(e){super(e)}}var Fn=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(c){try{u(r.next(c))}catch(h){i(h)}}function l(c){try{u(r.throw(c))}catch(h){i(h)}}function u(c){c.done?o(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};class Or{constructor(e){Object.assign(this,e);let t;e.fetch?t=e.fetch:typeof fetch>"u"?t=(...r)=>Fn(this,void 0,void 0,function*(){return yield(yield Ft(()=>import("./browser-ponyfill-2e15ed5e.js").then(n=>n.b),["_app/immutable/chunks/browser-ponyfill-2e15ed5e.js","_app/immutable/chunks/_commonjsHelpers-e864563f.js"])).fetch(...r)}):t=fetch,this.fetch=(...r)=>t(...r),this.shouldThrowOnError=e.shouldThrowOnError||!1,this.allowEmpty=e.allowEmpty||!1}throwOnError(e){return e==null&&(e=!0),this.shouldThrowOnError=e,this}then(e,t){typeof this.schema>"u"||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let r=this.fetch(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(n=>Fn(this,void 0,void 0,function*(){var o,i,a,l;let u=null,c=null,h=null,g=n.status,m=n.statusText;if(n.ok){const b=(o=this.headers.Prefer)===null||o===void 0?void 0:o.split(",").includes("return=minimal");if(this.method!=="HEAD"&&!b){const I=yield n.text();I&&(this.headers.Accept==="text/csv"?c=I:c=JSON.parse(I))}const S=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),$=(a=n.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");S&&$&&$.length>1&&(h=parseInt($[1]))}else{const b=yield n.text();try{u=JSON.parse(b)}catch{u={message:b}}if(u&&this.allowEmpty&&((l=u==null?void 0:u.details)===null||l===void 0?void 0:l.includes("Results contain 0 rows"))&&(u=null,g=200,m="OK"),u&&this.shouldThrowOnError)throw u}return{error:u,data:c,count:h,status:g,statusText:m,body:c}}));return this.shouldThrowOnError||(r=r.catch(n=>({error:{message:`FetchError: ${n.message}`,details:"",hint:"",code:n.code||""},data:null,body:null,count:null,status:400,statusText:"Bad Request"}))),r.then(e,t)}}class Oa extends Or{select(e="*"){let t=!1;const r=e.split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this}order(e,{ascending:t=!0,nullsFirst:r=!1,foreignTable:n}={}){const o=typeof n>"u"?"order":`${n}.order`,i=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${i?`${i},`:""}${e}.${t?"asc":"desc"}.${r?"nullsfirst":"nullslast"}`),this}limit(e,{foreignTable:t}={}){const r=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:r}={}){const n=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.headers.Accept="application/vnd.pgrst.object+json",this.allowEmpty=!0,this}csv(){return this.headers.Accept="text/csv",this}}class ft extends Oa{constructor(){super(...arguments),this.cs=this.contains,this.cd=this.containedBy,this.sl=this.rangeLt,this.sr=this.rangeGt,this.nxl=this.rangeGte,this.nxr=this.rangeLte,this.adj=this.rangeAdjacent,this.ov=this.overlaps}not(e,t,r){return this.url.searchParams.append(`${e}`,`not.${t}.${r}`),this}or(e,{foreignTable:t}={}){const r=typeof t>"u"?"or":`${t}.or`;return this.url.searchParams.append(r,`(${e})`),this}eq(e,t){return this.url.searchParams.append(`${e}`,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(`${e}`,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(`${e}`,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(`${e}`,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(`${e}`,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(`${e}`,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(`${e}`,`like.${t}`),this}ilike(e,t){return this.url.searchParams.append(`${e}`,`ilike.${t}`),this}is(e,t){return this.url.searchParams.append(`${e}`,`is.${t}`),this}in(e,t){const r=t.map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(`${e}`,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(`${e}`,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(`${e}`,`cs.{${t.join(",")}}`):this.url.searchParams.append(`${e}`,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(`${e}`,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(`${e}`,`cd.{${t.join(",")}}`):this.url.searchParams.append(`${e}`,`cd.${JSON.stringify(t)}`),this}rangeLt(e,t){return this.url.searchParams.append(`${e}`,`sl.${t}`),this}rangeGt(e,t){return this.url.searchParams.append(`${e}`,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(`${e}`,`nxl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(`${e}`,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(`${e}`,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(`${e}`,`ov.${t}`):this.url.searchParams.append(`${e}`,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n=null}={}){let o="";n==="plain"?o="pl":n==="phrase"?o="ph":n==="websearch"&&(o="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(`${e}`,`${o}fts${i}.${t}`),this}fts(e,t,{config:r}={}){const n=typeof r>"u"?"":`(${r})`;return this.url.searchParams.append(`${e}`,`fts${n}.${t}`),this}plfts(e,t,{config:r}={}){const n=typeof r>"u"?"":`(${r})`;return this.url.searchParams.append(`${e}`,`plfts${n}.${t}`),this}phfts(e,t,{config:r}={}){const n=typeof r>"u"?"":`(${r})`;return this.url.searchParams.append(`${e}`,`phfts${n}.${t}`),this}wfts(e,t,{config:r}={}){const n=typeof r>"u"?"":`(${r})`;return this.url.searchParams.append(`${e}`,`wfts${n}.${t}`),this}filter(e,t,r){return this.url.searchParams.append(`${e}`,`${t}.${r}`),this}match(e){return Object.keys(e).forEach(t=>{this.url.searchParams.append(`${t}`,`eq.${e[t]}`)}),this}}class vs extends Or{constructor(e,{headers:t={},schema:r,fetch:n,shouldThrowOnError:o}={}){super({fetch:n,shouldThrowOnError:o}),this.url=new URL(e),this.headers=Object.assign({},t),this.schema=r}select(e="*",{head:t=!1,count:r=null}={}){this.method="GET";let n=!1;const o=e.split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),t&&(this.method="HEAD"),new ft(this)}insert(e,{upsert:t=!1,onConflict:r,returning:n="representation",count:o=null}={}){this.method="POST";const i=[`return=${n}`];if(t&&i.push("resolution=merge-duplicates"),t&&r!==void 0&&this.url.searchParams.set("on_conflict",r),this.body=e,o&&i.push(`count=${o}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),Array.isArray(e)){const a=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(a.length>0){const l=[...new Set(a)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new ft(this)}upsert(e,{onConflict:t,returning:r="representation",count:n=null,ignoreDuplicates:o=!1}={}){this.method="POST";const i=[`resolution=${o?"ignore":"merge"}-duplicates`,`return=${r}`];return t!==void 0&&this.url.searchParams.set("on_conflict",t),this.body=e,n&&i.push(`count=${n}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new ft(this)}update(e,{returning:t="representation",count:r=null}={}){this.method="PATCH";const n=[`return=${t}`];return this.body=e,r&&n.push(`count=${r}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new ft(this)}delete({returning:e="representation",count:t=null}={}){this.method="DELETE";const r=[`return=${e}`];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new ft(this)}}class ja extends Or{constructor(e,{headers:t={},schema:r,fetch:n,shouldThrowOnError:o}={}){super({fetch:n,shouldThrowOnError:o}),this.url=new URL(e),this.headers=Object.assign({},t),this.schema=r}rpc(e,{head:t=!1,count:r=null}={}){return t?(this.method="HEAD",e&&Object.entries(e).forEach(([n,o])=>{this.url.searchParams.append(n,o)})):(this.method="POST",this.body=e),r&&(this.headers.Prefer!==void 0?this.headers.Prefer+=`,count=${r}`:this.headers.Prefer=`count=${r}`),new ft(this)}}const Ia="0.37.4",Pa={"X-Client-Info":`postgrest-js/${Ia}`};class Ra{constructor(e,{headers:t={},schema:r,fetch:n,throwOnError:o}={}){this.url=e,this.headers=Object.assign(Object.assign({},Pa),t),this.schema=r,this.fetch=n,this.shouldThrowOnError=o}auth(e){return this.headers.Authorization=`Bearer ${e}`,this}from(e){const t=`${this.url}/${e}`;return new vs(t,{headers:this.headers,schema:this.schema,fetch:this.fetch,shouldThrowOnError:this.shouldThrowOnError})}rpc(e,t,{head:r=!1,count:n=null}={}){const o=`${this.url}/rpc/${e}`;return new ja(o,{headers:this.headers,schema:this.schema,fetch:this.fetch,shouldThrowOnError:this.shouldThrowOnError}).rpc(t,{head:r,count:n})}}var ne;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(ne||(ne={}));const xn=(s,e,t={})=>{var r;const n=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((o,i)=>(o[i]=Aa(i,s,e,n),o),{})},Aa=(s,e,t,r)=>{const n=e.find(a=>a.name===s),o=n==null?void 0:n.type,i=t[s];return o&&!r.includes(o)?ws(o,i):wr(i)},ws=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return Ua(e,t)}switch(s){case ne.bool:return Ca(e);case ne.float4:case ne.float8:case ne.int2:case ne.int4:case ne.int8:case ne.numeric:case ne.oid:return Na(e);case ne.json:case ne.jsonb:return Da(e);case ne.timestamp:return Ma(e);case ne.abstime:case ne.date:case ne.daterange:case ne.int4range:case ne.int8range:case ne.money:case ne.reltime:case ne.text:case ne.time:case ne.timestamptz:case ne.timetz:case ne.tsrange:case ne.tstzrange:return wr(e);default:return wr(e)}},wr=s=>s,Ca=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},Na=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},Da=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},Ua=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,r=s[t];if(s[0]==="{"&&r==="}"){let o;const i=s.slice(1,t);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(a=>ws(e,a))}return s},Ma=s=>typeof s=="string"?s.replace(" ","T"):s;var dr,Vn;function La(){if(Vn)return dr;Vn=1;var s=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return dr=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return s()}try{return __global__||s()}finally{delete Object.prototype.__global__}}(),dr}const Ba="websocket",Ha="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",za=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],qa="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",Ga=["I\xF1aki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],Fa="1.0.34",xa={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},Va="https://github.com/theturtle32/WebSocket-Node",Wa={node:">=4.0.0"},Ja={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},Ka={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},Ya={verbose:!1},Xa={test:"tape test/unit/*.js",gulp:"gulp"},Qa="index",Za={lib:"./lib"},el="lib/browser.js",tl="Apache-2.0",rl={name:Ba,description:Ha,keywords:za,author:qa,contributors:Ga,version:Fa,repository:xa,homepage:Va,engines:Wa,dependencies:Ja,devDependencies:Ka,config:Ya,scripts:Xa,main:Qa,directories:Za,browser:el,license:tl};var nl=rl.version,Ve;if(typeof globalThis=="object")Ve=globalThis;else try{Ve=La()}catch{}finally{if(!Ve&&typeof window<"u"&&(Ve=window),!Ve)throw new Error("Could not determine global this")}var jt=Ve.WebSocket||Ve.MozWebSocket,sl=nl;function bs(s,e){var t;return e?t=new jt(s,e):t=new jt(s),t}jt&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(s){Object.defineProperty(bs,s,{get:function(){return jt[s]}})});var il={w3cwebsocket:jt?bs:null,version:sl};const ol="1.7.3",al={"X-Client-Info":`realtime-js/${ol}`},ll="1.0.0",ys=1e4,ul=1e3;var $t;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})($t||($t={}));var se;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(se||(se={}));var me;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(me||(me={}));var br;(function(s){s.websocket="websocket"})(br||(br={}));var We;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(We||(We={}));class jr{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class cl{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const n=t.getUint8(1),o=t.getUint8(2);let i=this.HEADER_LENGTH+2;const a=r.decode(e.slice(i,i+n));i=i+n;const l=r.decode(e.slice(i,i+o));i=i+o;const u=JSON.parse(r.decode(e.slice(i,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class mt{constructor(e,t,r={},n=ys){this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel instanceof yr?this.channel.on(this.refEvent,e):this.channel.on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel.trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){!this.refEvent||(this.channel instanceof yr?this.channel.off(this.refEvent):this.channel.off(this.refEvent,{}))}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}class yr{constructor(e,t={},r){this.topic=e,this.params=t,this.socket=r,this.bindings=[],this.state=se.closed,this.joinedOnce=!1,this.pushBuffer=[],this.timeout=this.socket.timeout,this.joinPush=new mt(this,me.join,this.params,this.timeout),this.rejoinTimer=new jr(()=>this.rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=se.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this.onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=se.closed,this.socket.remove(this)}),this.onError(n=>{this.isLeaving()||this.isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{!this.isJoining()||(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this.on(me.reply,(n,o)=>{this.trigger(this.replyEventName(o),n)})}rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this.rejoin()}subscribe(e=this.timeout){if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";return this.joinedOnce=!0,this.rejoin(e),this.joinPush}onClose(e){this.on(me.close,e)}onError(e){this.on(me.error,t=>e(t))}on(e,t){this.bindings.push({event:e,callback:t})}off(e){this.bindings=this.bindings.filter(t=>t.event!==e)}canPush(){return this.socket.isConnected()&&this.isJoined()}push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new mt(this,e,t,r);return this.canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=se.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this.trigger(me.close,"leave",this.joinRef())};this.joinPush.destroy();let r=new mt(this,me.leave,{},e);return r.receive("ok",()=>t()).receive("timeout",()=>t()),r.send(),this.canPush()||r.trigger("ok",{}),r}onMessage(e,t,r){return t}isMember(e){return this.topic===e}joinRef(){return this.joinPush.ref}rejoin(e=this.timeout){this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=se.joining,this.joinPush.resend(e))}trigger(e,t,r){let{close:n,error:o,leave:i,join:a}=me;if(r&&[n,o,i,a].indexOf(e)>=0&&r!==this.joinRef())return;let u=this.onMessage(e,t,r);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";this.bindings.filter(c=>c.event==="*"?e===(t==null?void 0:t.type):c.event===e).map(c=>c.callback(u,r))}replyEventName(e){return`chan_reply_${e}`}isClosed(){return this.state===se.closed}isErrored(){return this.state===se.errored}isJoined(){return this.state===se.joined}isJoining(){return this.state===se.joining}isLeaving(){return this.state===se.leaving}}class dt{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel.on(r.state,{},n=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.joinRef=this.channel.joinRef(),this.state=dt.syncState(this.state,n,o,i),this.pendingDiffs.forEach(l=>{this.state=dt.syncDiff(this.state,l,o,i)}),this.pendingDiffs=[],a()}),this.channel.on(r.diff,{},n=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=dt.syncDiff(this.state,n,o,i),a())})}static syncState(e,t,r,n){const o=this.cloneDeep(e),i=this.transformState(t),a={},l={};return this.map(o,(u,c)=>{i[u]||(l[u]=c)}),this.map(i,(u,c)=>{const h=o[u];if(h){const g=c.map(S=>S.presence_id),m=h.map(S=>S.presence_id),_=c.filter(S=>m.indexOf(S.presence_id)<0),b=h.filter(S=>g.indexOf(S.presence_id)<0);_.length>0&&(a[u]=_),b.length>0&&(l[u]=b)}else a[u]=c}),this.syncDiff(o,{joins:a,leaves:l},r,n)}static syncDiff(e,t,r,n){const{joins:o,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(o,(a,l)=>{const u=e[a];if(e[a]=this.cloneDeep(l),u){const c=e[a].map(g=>g.presence_id),h=u.filter(g=>c.indexOf(g.presence_id)<0);e[a].unshift(...h)}r(a,u,l)}),this.map(i,(a,l)=>{let u=e[a];if(!u)return;const c=l.map(h=>h.presence_id);u=u.filter(h=>c.indexOf(h.presence_id)<0),e[a]=u,n(a,u,l),u.length===0&&delete e[a]}),e}static list(e,t){return t||(t=(r,n)=>n),this.map(e,(r,n)=>t(r,n))}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const n=e[r];return"metas"in n?t[r]=n.metas.map(o=>(o.presence_id=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[r]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}list(e){return dt.list(this.state,e)}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel.joinRef()}}class qt{constructor(e,t={},r){this.topic=e,this.params=t,this.socket=r,this.bindings=[],this.state=se.closed,this.joinedOnce=!1,this.pushBuffer=[],this.timeout=this.socket.timeout,this.joinPush=new mt(this,me.join,this.params,this.timeout),this.rejoinTimer=new jr(()=>this.rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=se.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this.onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=se.closed,this.socket.remove(this)}),this.onError(n=>{this.isLeaving()||this.isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{!this.isJoining()||(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this.on(me.reply,{},(n,o)=>{this.trigger(this.replyEventName(o),n)}),this.presence=new dt(this)}list(){return this.presence.list()}rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this.rejoin()}subscribe(e=this.timeout){if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const t=this.bindings.reduce((r,n)=>{const{type:o}=n;return["phx_close","phx_error","phx_reply","presence_diff","presence_state"].includes(o)||(r[o]=n),r},{});return Object.keys(t).length&&this.updateJoinPayload({configs:t}),this.joinedOnce=!0,this.rejoin(e),this.joinPush}}onClose(e){this.on(me.close,{},e)}onError(e){this.on(me.error,{},t=>e(t))}on(e,t,r){this.bindings.push({type:e,filter:t!=null?t:{},callback:r!=null?r:()=>{}})}off(e,t){this.bindings=this.bindings.filter(r=>!(r.type===e&&qt.isEqual(r.filter,t)))}canPush(){return this.socket.isConnected()&&this.isJoined()}push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new mt(this,e,t,r);return this.canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=se.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this.trigger(me.close,"leave",this.joinRef())};this.joinPush.destroy();const r=new mt(this,me.leave,{},e);return r.receive("ok",()=>t()).receive("timeout",()=>t()),r.send(),this.canPush()||r.trigger("ok",{}),r}onMessage(e,t,r){return t}isMember(e){return this.topic===e}joinRef(){return this.joinPush.ref}rejoin(e=this.timeout){this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=se.joining,this.joinPush.resend(e))}trigger(e,t,r){const{close:n,error:o,leave:i,join:a}=me;if(r&&[n,o,i,a].indexOf(e)>=0&&r!==this.joinRef())return;const u=this.onMessage(e,t,r);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";this.bindings.filter(c=>{var h,g;return(c==null?void 0:c.type)===e&&(((h=c==null?void 0:c.filter)===null||h===void 0?void 0:h.event)==="*"||((g=c==null?void 0:c.filter)===null||g===void 0?void 0:g.event)===(t==null?void 0:t.event))}).map(c=>c.callback(u,r))}send(e){const t=this.push(e.type,e);return new Promise(r=>{t.receive("ok",()=>r("ok")),t.receive("timeout",()=>r("timeout"))})}replyEventName(e){return`chan_reply_${e}`}isClosed(){return this.state===se.closed}isErrored(){return this.state===se.errored}isJoined(){return this.state===se.joined}isJoining(){return this.state===se.joining}isLeaving(){return this.state===se.leaving}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}}var hl=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(c){try{u(r.next(c))}catch(h){i(h)}}function l(c){try{u(r.throw(c))}catch(h){i(h)}}function u(c){c.done?o(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})},fl=globalThis&&globalThis.__rest||function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(s);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(s,r[n])&&(t[r[n]]=s[r[n]]);return t};const dl=()=>{};class ml{constructor(e,t){this.accessToken=null,this.channels=[],this.endPoint="",this.headers=al,this.params={},this.timeout=ys,this.transport=il.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.longpollerTimeout=2e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=dl,this.conn=null,this.sendBuffer=[],this.serializer=new cl,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.endPoint=`${e}/${br.websocket}`,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.transport&&(this.transport=t.transport),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs),t!=null&&t.longpollerTimeout&&(this.longpollerTimeout=t.longpollerTimeout),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:r=>[1e3,2e3,5e3,1e4][r-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(r,n)=>n(JSON.stringify(r)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new jr(()=>hl(this,void 0,void 0,function*(){yield this.disconnect(),this.connect()}),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this.endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this.onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){return new Promise((r,n)=>{try{this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t||""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset()),r({error:null,data:!0})}catch(o){r({error:o,data:!1})}})}log(e,t,r){this.logger(e,t,r)}onOpen(e){this.stateChangeCallbacks.open.push(e)}onClose(e){this.stateChangeCallbacks.close.push(e)}onError(e){this.stateChangeCallbacks.error.push(e)}onMessage(e){this.stateChangeCallbacks.message.push(e)}connectionState(){switch(this.conn&&this.conn.readyState){case $t.connecting:return We.Connecting;case $t.open:return We.Open;case $t.closing:return We.Closing;default:return We.Closed}}isConnected(){return this.connectionState()===We.Open}remove(e){this.channels=this.channels.filter(t=>t.joinRef()!==e.joinRef())}channel(e,t={}){var r;const{selfBroadcast:n}=t,o=fl(t,["selfBroadcast"]);n&&(o.self_broadcast=n);const i=!((r=this.params)===null||r===void 0)&&r.vsndate?new qt(e,o,this):new yr(e,o,this);return i instanceof qt&&(i.presence.onJoin((a,l,u)=>{i.trigger("presence",{event:"JOIN",key:a,currentPresences:l,newPresences:u})}),i.presence.onLeave((a,l,u)=>{i.trigger("presence",{event:"LEAVE",key:a,currentPresences:l,leftPresences:u})}),i.presence.onSync(()=>{i.trigger("presence",{event:"SYNC"})})),this.channels.push(i),i}push(e){const{topic:t,event:r,payload:n,ref:o}=e;let i=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${r} (${o})`,n),this.isConnected()?i():this.sendBuffer.push(i)}onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:n,payload:o,ref:i}=t;(i&&i===this.pendingHeartbeatRef||n===(o==null?void 0:o.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${n} ${i&&"("+i+")"||""}`,o),this.channels.filter(a=>a.isMember(r)).forEach(a=>a.trigger(n,o,i)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ll}))}makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({user_token:e}),t.joinedOnce&&t.isJoined()&&t.push(me.access_token,{access_token:e})})}leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r.isJoined()||r.isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_onConnOpen(){this.log("transport",`connected to ${this.endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e.trigger(me.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${r}${n}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(!!this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(ul,"hearbeat timeout");return}this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class pl{constructor(e,t,r,n){const o={},i=n==="*"?`realtime:${r}`:`realtime:${r}:${n}`,a=t.Authorization.split(" ")[1];a&&(o.user_token=a),this.subscription=e.channel(i,o)}getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=xn(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=xn(e.columns,e.old_record)),t}on(e,t){return this.subscription.on(e,r=>{let n={schema:r.schema,table:r.table,commit_timestamp:r.commit_timestamp,eventType:r.type,new:{},old:{},errors:r.errors};n=Object.assign(Object.assign({},n),this.getPayloadRecords(r)),t(n)}),this}subscribe(e=()=>{}){return this.subscription.onError(t=>e("SUBSCRIPTION_ERROR",t)),this.subscription.onClose(()=>e("CLOSED")),this.subscription.subscribe().receive("ok",()=>e("SUBSCRIBED")).receive("error",t=>e("SUBSCRIPTION_ERROR",t)).receive("timeout",()=>e("RETRYING_AFTER_TIMEOUT")),this.subscription}}class gl extends vs{constructor(e,{headers:t={},schema:r,realtime:n,table:o,fetch:i,shouldThrowOnError:a}){super(e,{headers:t,schema:r,fetch:i,shouldThrowOnError:a}),this._subscription=null,this._realtime=n,this._headers=t,this._schema=r,this._table=o}on(e,t){return this._realtime.isConnected()||this._realtime.connect(),this._subscription||(this._subscription=new pl(this._realtime,this._headers,this._schema,this._table)),this._subscription.on(e,t)}}const _l="0.0.0",vl={"X-Client-Info":`storage-js/${_l}`};var Rt=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(c){try{u(r.next(c))}catch(h){i(h)}}function l(c){try{u(r.throw(c))}catch(h){i(h)}}function u(c){c.done?o(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};const wl=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),bl=(s,e)=>{if(typeof s.json!="function")return e(s);s.json().then(t=>e({message:wl(t),status:(s==null?void 0:s.status)||500}))},yl=(s,e,t,r)=>{const n={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),t))};function Jt(s,e,t,r,n,o){return Rt(this,void 0,void 0,function*(){return new Promise((i,a)=>{s(t,yl(e,r,n,o)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?i(l):l.json()}).then(l=>i(l)).catch(l=>bl(l,a))})})}function kr(s,e,t,r){return Rt(this,void 0,void 0,function*(){return Jt(s,"GET",e,t,r)})}function Je(s,e,t,r,n){return Rt(this,void 0,void 0,function*(){return Jt(s,"POST",e,r,n,t)})}function kl(s,e,t,r,n){return Rt(this,void 0,void 0,function*(){return Jt(s,"PUT",e,r,n,t)})}function ks(s,e,t,r,n){return Rt(this,void 0,void 0,function*(){return Jt(s,"DELETE",e,r,n,t)})}var El=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(c){try{u(r.next(c))}catch(h){i(h)}}function l(c){try{u(r.throw(c))}catch(h){i(h)}}function u(c){c.done?o(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};const Es=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>El(void 0,void 0,void 0,function*(){return yield(yield Ft(()=>import("./browser-ponyfill-2e15ed5e.js").then(r=>r.b),["_app/immutable/chunks/browser-ponyfill-2e15ed5e.js","_app/immutable/chunks/_commonjsHelpers-e864563f.js"])).fetch(...t)}):e=fetch,(...t)=>e(...t)};var ht=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(c){try{u(r.next(c))}catch(h){i(h)}}function l(c){try{u(r.throw(c))}catch(h){i(h)}}function u(c){c.done?o(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};class Tl{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},vl),t),this.fetch=Es(r)}listBuckets(){return ht(this,void 0,void 0,function*(){try{return{data:yield kr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){return{data:null,error:e}}})}getBucket(e){return ht(this,void 0,void 0,function*(){try{return{data:yield kr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}createBucket(e,t={public:!1}){return ht(this,void 0,void 0,function*(){try{return{data:(yield Je(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public},{headers:this.headers})).name,error:null}}catch(r){return{data:null,error:r}}})}updateBucket(e,t){return ht(this,void 0,void 0,function*(){try{return{data:yield kl(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public},{headers:this.headers}),error:null}}catch(r){return{data:null,error:r}}})}emptyBucket(e){return ht(this,void 0,void 0,function*(){try{return{data:yield Je(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}deleteBucket(e){return ht(this,void 0,void 0,function*(){try{return{data:yield ks(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}}var Oe=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(c){try{u(r.next(c))}catch(h){i(h)}}function l(c){try{u(r.throw(c))}catch(h){i(h)}}function u(c){c.done?o(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};const Sl={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$l={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ol{constructor(e,t={},r,n){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Es(n)}uploadOrUpdate(e,t,r,n){return Oe(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},$l),n),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",i.cacheControl)):(o=r,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType);const l=this._removeEmptyFolders(t),u=this._getFinalPath(l),c=yield this.fetch(`${this.url}/object/${u}`,{method:e,body:o,headers:a});if(c.ok)return{data:{Key:u},error:null};{const h=yield c.json();return{data:null,error:h}}}catch(o){return{data:null,error:o}}})}upload(e,t,r){return Oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}update(e,t,r){return Oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t){return Oe(this,void 0,void 0,function*(){try{return{data:yield Je(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(r){return{data:null,error:r}}})}copy(e,t){return Oe(this,void 0,void 0,function*(){try{return{data:yield Je(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(r){return{data:null,error:r}}})}createSignedUrl(e,t){return Oe(this,void 0,void 0,function*(){try{const r=this._getFinalPath(e);let n=yield Je(this.fetch,`${this.url}/object/sign/${r}`,{expiresIn:t},{headers:this.headers});const o=`${this.url}${n.signedURL}`;return n={signedURL:o},{data:n,error:null,signedURL:o}}catch(r){return{data:null,error:r,signedURL:null}}})}createSignedUrls(e,t){return Oe(this,void 0,void 0,function*(){try{return{data:(yield Je(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers})).map(n=>Object.assign(Object.assign({},n),{signedURL:n.signedURL?`${this.url}${n.signedURL}`:null})),error:null}}catch(r){return{data:null,error:r}}})}download(e){return Oe(this,void 0,void 0,function*(){try{const t=this._getFinalPath(e);return{data:yield(yield kr(this.fetch,`${this.url}/object/${t}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(t){return{data:null,error:t}}})}getPublicUrl(e){try{const t=this._getFinalPath(e),r=`${this.url}/object/public/${t}`;return{data:{publicURL:r},error:null,publicURL:r}}catch(t){return{data:null,error:t,publicURL:null}}}remove(e){return Oe(this,void 0,void 0,function*(){try{return{data:yield ks(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}list(e,t,r){return Oe(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Sl),t),{prefix:e||""});return{data:yield Je(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){return{data:null,error:n}}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}}class jl extends Tl{constructor(e,t={},r){super(e,t,r)}from(e){return new Ol(this.url,this.headers,e,this.fetch)}}var Il=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(c){try{u(r.next(c))}catch(h){i(h)}}function l(c){try{u(r.throw(c))}catch(h){i(h)}}function u(c){c.done?o(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};const Pl=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Il(void 0,void 0,void 0,function*(){return yield(yield Ft(()=>import("./browser-ponyfill-2e15ed5e.js").then(r=>r.b),["_app/immutable/chunks/browser-ponyfill-2e15ed5e.js","_app/immutable/chunks/_commonjsHelpers-e864563f.js"])).fetch(...t)}):e=fetch,(...t)=>e(...t)};var Rl=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(c){try{u(r.next(c))}catch(h){i(h)}}function l(c){try{u(r.throw(c))}catch(h){i(h)}}function u(c){c.done?o(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};class Al{constructor(e,{headers:t={},customFetch:r}={}){this.url=e,this.headers=t,this.fetch=Pl(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t){return Rl(this,void 0,void 0,function*(){try{const{headers:r,body:n}=t!=null?t:{},o=yield this.fetch(`${this.url}/${e}`,{method:"POST",headers:Object.assign({},this.headers,r),body:n}),i=o.headers.get("x-relay-error");if(i&&i==="true")return{data:null,error:new Error(yield o.text())};let a;const{responseType:l}=t!=null?t:{};return!l||l==="json"?a=yield o.json():l==="arrayBuffer"?a=yield o.arrayBuffer():l==="blob"?a=yield o.blob():a=yield o.text(),{data:a,error:null}}catch(r){return{data:null,error:r}}})}}var Bt=globalThis&&globalThis.__awaiter||function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(c){try{u(r.next(c))}catch(h){i(h)}}function l(c){try{u(r.throw(c))}catch(h){i(h)}}function u(c){c.done?o(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};const Cl={schema:"public",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,multiTab:!0,headers:_s};class Nl{constructor(e,t,r){if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const n=na(e),o=Object.assign(Object.assign({},Cl),r);if(this.restUrl=`${n}/rest/v1`,this.realtimeUrl=`${n}/realtime/v1`.replace("http","ws"),this.authUrl=`${n}/auth/v1`,this.storageUrl=`${n}/storage/v1`,n.match(/(supabase\.co)|(supabase\.in)/)){const a=n.split(".");this.functionsUrl=`${a[0]}.functions.${a[1]}.${a[2]}`}else this.functionsUrl=`${n}/functions/v1`;this.schema=o.schema,this.multiTab=o.multiTab,this.fetch=o.fetch,this.headers=Object.assign(Object.assign({},_s),r==null?void 0:r.headers),this.shouldThrowOnError=o.shouldThrowOnError||!1,this.auth=this._initSupabaseAuthClient(o),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},o.realtime)),this._listenForAuthEvents(),this._listenForMultiTabEvents()}get functions(){return new Al(this.functionsUrl,{headers:this._getAuthHeaders(),customFetch:this.fetch})}get storage(){return new jl(this.storageUrl,this._getAuthHeaders(),this.fetch)}from(e){const t=`${this.restUrl}/${e}`;return new gl(t,{headers:this._getAuthHeaders(),schema:this.schema,realtime:this.realtime,table:e,fetch:this.fetch,shouldThrowOnError:this.shouldThrowOnError})}rpc(e,t,{head:r=!1,count:n=null}={}){return this._initPostgRESTClient().rpc(e,t,{head:r,count:n})}channel(e,t){var r,n;const o=(n=(r=this.auth.session())===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:this.supabaseKey;return this.realtime.isConnected()||this.realtime.connect(),this.realtime.channel(e,Object.assign(Object.assign({},t),{user_token:o}))}removeAllSubscriptions(){return Bt(this,void 0,void 0,function*(){const e=this.getSubscriptions().slice(),t=e.map(n=>this.removeSubscription(n));return(yield Promise.all(t)).map(({error:n},o)=>({data:{subscription:e[o]},error:n}))})}removeChannel(e){return Bt(this,void 0,void 0,function*(){const{error:t}=yield this._closeSubscription(e),r=this.getSubscriptions(),n=r.filter(o=>o.isJoined()).length;return r.length===0&&(yield this.realtime.disconnect()),{data:{openChannels:n},error:t}})}removeSubscription(e){return Bt(this,void 0,void 0,function*(){const{error:t}=yield this._closeSubscription(e),r=this.getSubscriptions(),n=r.filter(o=>o.isJoined()).length;return r.length===0&&(yield this.realtime.disconnect()),{data:{openSubscriptions:n},error:t}})}_closeSubscription(e){return Bt(this,void 0,void 0,function*(){let t=null;if(!e.isClosed()){const{error:r}=yield this._unsubscribeSubscription(e);t=r}return this.realtime.remove(e),{error:t}})}_unsubscribeSubscription(e){return new Promise(t=>{e.unsubscribe().receive("ok",()=>t({error:null})).receive("error",r=>t({error:r})).receive("timeout",()=>t({error:new Error("timed out")}))})}getSubscriptions(){return this.realtime.channels}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,localStorage:n,headers:o,fetch:i,cookieOptions:a,multiTab:l}){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new $a({url:this.authUrl,headers:Object.assign(Object.assign({},o),u),autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,localStorage:n,fetch:i,cookieOptions:a,multiTab:l})}_initRealtimeClient(e){return new ml(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign(Object.assign({},e==null?void 0:e.params),{apikey:this.supabaseKey})}))}_initPostgRESTClient(){return new Ra(this.restUrl,{headers:this._getAuthHeaders(),schema:this.schema,fetch:this.fetch,throwOnError:this.shouldThrowOnError})}_getAuthHeaders(){var e,t;const r=Object.assign({},this.headers),n=(t=(e=this.auth.session())===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey;return r.apikey=this.supabaseKey,r.Authorization=r.Authorization||`Bearer ${n}`,r}_listenForMultiTabEvents(){if(!this.multiTab||!sa()||!(window!=null&&window.addEventListener))return null;try{return window==null?void 0:window.addEventListener("storage",e=>{var t,r,n;if(e.key===ra){const o=JSON.parse(String(e.newValue)),i=(r=(t=o==null?void 0:o.currentSession)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:void 0,a=(n=this.auth.session())===null||n===void 0?void 0:n.access_token;i?!a&&i?this._handleTokenChanged("SIGNED_IN",i,"STORAGE"):a!==i&&this._handleTokenChanged("TOKEN_REFRESHED",i,"STORAGE"):this._handleTokenChanged("SIGNED_OUT",i,"STORAGE")}})}catch(e){return console.error("_listenForMultiTabEvents",e),null}}_listenForAuthEvents(){let{data:e}=this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,r==null?void 0:r.access_token,"CLIENT")});return e}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==t?(this.realtime.setAuth(t),r=="STORAGE"&&this.auth.setAuth(t),this.changedAccessToken=t):(e==="SIGNED_OUT"||e==="USER_DELETED")&&(this.realtime.setAuth(this.supabaseKey),r=="STORAGE"&&this.auth.signOut())}}const Dl=(s,e,t)=>new Nl(s,e,t),Ul="https://dbmtysppmiwwjwaeneex.supabase.co",Ml="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRibXR5c3BwbWl3d2p3YWVuZWV4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2NDQ5NTI0NDUsImV4cCI6MTk2MDUyODQ0NX0.i_1JrAfv5fieeVaiJrVIQPL6V0_-H9sR-PKIuGDAIfI",At=Dl(Ul,Ml),Eu=async({email:s,password:e})=>{const t=await At.auth.signIn({email:s,password:e});if(t.error)throw console.log(t.error),new Error("signIn failed");if(t.user)return!0;throw new Error("no user found")},Ll=async s=>{const e=await At.from("wordgame_wod-questions");if(e.error)throw console.log(e.error),new Error("getQuestions failed");if(e.data.length)return e.data;throw new Error("no questions matching that game id")},Bl=async({gameId:s,column:e})=>{const t=await At.from("wordgame_games").select(e).eq("game_id",s);if(t.error)throw console.log(t.error),new Error("getGameColumn failed");if(t.data.length)return t.data[0][e];throw new Error("no games matching this id")},Ir=async({table:s,column:e,value:t,gameId:r})=>{const n=await At.from(s).update({[e]:t}).eq("game_id",r);if(n.error)throw console.log(n.error),new Error("update failed");if(n.data)return n.data},Ts=async({table:s,data:e})=>{const t={returning:"minimal"},r=await At.from(s).insert(e,t);if(r.error)throw console.log(r.error),new Error("insert failed");return!0};function Wn(s,e,t){const r=s.slice();return r[22]=e[t].id,r[23]=e[t].text,r[24]=e[t].detail,r[25]=e[t].type,r[26]=e[t].limit,r[27]=e[t].required,r[28]=e,r[29]=t,r}function Hl(s){let e,t,r,n,o,i,a,l,u,c;return{c(){e=v("div"),t=v("div"),r=v("button"),n=B("How to Play"),o=C(),i=v("div"),a=v("button"),l=B("play"),this.h()},l(h){e=w(h,"DIV",{class:!0});var g=E(e);t=w(g,"DIV",{class:!0});var m=E(t);r=w(m,"BUTTON",{});var _=E(r);n=H(_,"How to Play"),_.forEach(f),m.forEach(f),o=N(g),i=w(g,"DIV",{class:!0});var b=E(i);a=w(b,"BUTTON",{});var S=E(a);l=H(S,"play"),S.forEach(f),b.forEach(f),g.forEach(f),this.h()},h(){p(t,"class","rules"),p(i,"class","play"),p(e,"class","cta")},m(h,g){R(h,e,g),d(e,t),d(t,r),d(r,n),d(e,o),d(e,i),d(i,a),d(a,l),u||(c=[ce(r,"click",s[17]),ce(a,"click",s[18])],u=!0)},p:te,d(h){h&&f(e),u=!1,Ye(c)}}}function zl(s){let e,t,r,n,o,i;function a(c,h){return c[6]?Gl:ql}let l=a(s),u=l(s);return{c(){e=v("p"),t=B("tell us about yourself. "),r=v("strong"),n=B(`note: anything you submit below may appear for the rest of the internet
			to see. we may lightly edit answers for brevity.`),o=C(),u.c(),i=ie()},l(c){e=w(c,"P",{});var h=E(e);t=H(h,"tell us about yourself. "),r=w(h,"STRONG",{});var g=E(r);n=H(g,`note: anything you submit below may appear for the rest of the internet
			to see. we may lightly edit answers for brevity.`),g.forEach(f),h.forEach(f),o=N(c),u.l(c),i=ie()},m(c,h){R(c,e,h),d(e,t),d(e,r),d(r,n),R(c,o,h),u.m(c,h),R(c,i,h)},p(c,h){l===(l=a(c))&&u?u.p(c,h):(u.d(1),u=l(c),u&&(u.c(),u.m(i.parentNode,i)))},d(c){c&&f(e),c&&f(o),u.d(c),c&&f(i)}}}function ql(s){let e,t,r,n,o,i,a,l,u,c,h,g,m,_,b,S=s[5],$=[];for(let I=0;I<S.length;I+=1)$[I]=Jn(Wn(s,S,I));return{c(){e=v("form");for(let I=0;I<$.length;I+=1)$[I].c();t=C(),r=v("div"),n=v("button"),o=B("give me a different question"),i=C(),a=v("label"),l=B(s[3]),u=C(),c=v("input"),h=C(),g=v("button"),m=B("Submit"),this.h()},l(I){e=w(I,"FORM",{});var T=E(e);for(let q=0;q<$.length;q+=1)$[q].l(T);t=N(T),r=w(T,"DIV",{});var y=E(r);n=w(y,"BUTTON",{type:!0});var P=E(n);o=H(P,"give me a different question"),P.forEach(f),i=N(y),a=w(y,"LABEL",{for:!0});var W=E(a);l=H(W,s[3]),W.forEach(f),u=N(y),c=w(y,"INPUT",{id:!0,maxlength:!0,placeholder:!0}),y.forEach(f),h=N(T),g=w(T,"BUTTON",{type:!0});var L=E(g);m=H(L,"Submit"),L.forEach(f),T.forEach(f),this.h()},h(){p(n,"type","button"),p(a,"for","question-bio"),c.required=!1,p(c,"id","question-bio"),p(c,"maxlength","100"),p(c,"placeholder","answer here"),p(g,"type","submit")},m(I,T){R(I,e,T);for(let y=0;y<$.length;y+=1)$[y].m(e,null);d(e,t),d(e,r),d(r,n),d(n,o),d(r,i),d(r,a),d(a,l),d(r,u),d(r,c),pt(c,s[4]),d(e,h),d(e,g),d(g,m),_||(b=[ce(n,"click",s[9]),ce(c,"input",s[16]),ce(e,"submit",Ms(s[10]))],_=!0)},p(I,T){if(T&32){S=I[5];let y;for(y=0;y<S.length;y+=1){const P=Wn(I,S,y);$[y]?$[y].p(P,T):($[y]=Jn(P),$[y].c(),$[y].m(e,t))}for(;y<$.length;y+=1)$[y].d(1);$.length=S.length}T&8&&ke(l,I[3]),T&16&&c.value!==I[4]&&pt(c,I[4])},d(I){I&&f(e),je($,I),_=!1,Ye(b)}}}function Gl(s){let e,t;return{c(){e=v("p"),t=B("Error")},l(r){e=w(r,"P",{});var n=E(e);t=H(n,"Error"),n.forEach(f)},m(r,n){R(r,e,n),d(e,t)},p:te,d(r){r&&f(e)}}}function Fl(s){let e,t,r,n,o,i,a;function l(){s[15].call(e,s[29])}return{c(){e=v("input"),this.h()},l(u){e=w(u,"INPUT",{id:!0,placeholder:!0,maxlength:!0}),this.h()},h(){e.required=t=s[27],p(e,"id",r="question-"+s[22]),p(e,"placeholder",n=s[22]),p(e,"maxlength",o=s[26])},m(u,c){R(u,e,c),pt(e,s[5][s[29]].answer),i||(a=ce(e,"input",l),i=!0)},p(u,c){s=u,c&32&&t!==(t=s[27])&&(e.required=t),c&32&&r!==(r="question-"+s[22])&&p(e,"id",r),c&32&&n!==(n=s[22])&&p(e,"placeholder",n),c&32&&o!==(o=s[26])&&p(e,"maxlength",o),c&32&&e.value!==s[5][s[29]].answer&&pt(e,s[5][s[29]].answer)},d(u){u&&f(e),i=!1,a()}}}function xl(s){let e,t,r,n,o,i,a,l,u,c,h,g,m,_,b,S,$,I;s[12][0][s[29]]=[];function T(){s[11].call(t,s[29])}function y(){s[13].call(a,s[29])}function P(){s[14].call(g,s[29])}return{c(){e=v("fieldset"),t=v("input"),r=C(),n=v("label"),o=B("they/them"),i=C(),a=v("input"),l=C(),u=v("label"),c=B("she/her"),h=C(),g=v("input"),m=C(),_=v("label"),b=B("he/him"),this.h()},l(W){e=w(W,"FIELDSET",{id:!0});var L=E(e);t=w(L,"INPUT",{id:!0,type:!0,name:!0}),r=N(L),n=w(L,"LABEL",{for:!0});var q=E(n);o=H(q,"they/them"),q.forEach(f),i=N(L),a=w(L,"INPUT",{id:!0,type:!0,name:!0}),l=N(L),u=w(L,"LABEL",{for:!0});var U=E(u);c=H(U,"she/her"),U.forEach(f),h=N(L),g=w(L,"INPUT",{id:!0,type:!0,name:!0}),m=N(L),_=w(L,"LABEL",{for:!0});var re=E(_);b=H(re,"he/him"),re.forEach(f),L.forEach(f),this.h()},h(){p(t,"id","pronoun-1"),p(t,"type","radio"),p(t,"name","pronoun"),t.__value="they/them",t.value=t.__value,s[12][0][s[29]].push(t),p(n,"for","pronoun-1"),p(a,"id","pronoun-2"),p(a,"type","radio"),p(a,"name","pronoun"),a.__value="she/her",a.value=a.__value,s[12][0][s[29]].push(a),p(u,"for","pronoun-2"),p(g,"id","pronoun-3"),p(g,"type","radio"),p(g,"name","pronoun"),g.__value="he/him",g.value=g.__value,s[12][0][s[29]].push(g),p(_,"for","pronoun-3"),p(e,"id",S="question-"+s[22])},m(W,L){R(W,e,L),d(e,t),t.checked=t.__value===s[5][s[29]].answer,d(e,r),d(e,n),d(n,o),d(e,i),d(e,a),a.checked=a.__value===s[5][s[29]].answer,d(e,l),d(e,u),d(u,c),d(e,h),d(e,g),g.checked=g.__value===s[5][s[29]].answer,d(e,m),d(e,_),d(_,b),$||(I=[ce(t,"change",T),ce(a,"change",y),ce(g,"change",P)],$=!0)},p(W,L){s=W,L&32&&(t.checked=t.__value===s[5][s[29]].answer),L&32&&(a.checked=a.__value===s[5][s[29]].answer),L&32&&(g.checked=g.__value===s[5][s[29]].answer),L&32&&S!==(S="question-"+s[22])&&p(e,"id",S)},d(W){W&&f(e),s[12][0][s[29]].splice(s[12][0][s[29]].indexOf(t),1),s[12][0][s[29]].splice(s[12][0][s[29]].indexOf(a),1),s[12][0][s[29]].splice(s[12][0][s[29]].indexOf(g),1),$=!1,Ye(I)}}}function Jn(s){let e,t,r=s[23]+"",n,o,i,a,l=s[24]+"",u;function c(m,_){return m[22]==="pronoun"?xl:Fl}let h=c(s),g=h(s);return{c(){e=v("div"),t=v("label"),n=B(r),i=C(),a=v("p"),u=C(),g.c(),this.h()},l(m){e=w(m,"DIV",{});var _=E(e);t=w(_,"LABEL",{for:!0});var b=E(t);n=H(b,r),b.forEach(f),i=N(_),a=w(_,"P",{});var S=E(a);S.forEach(f),u=N(_),g.l(_),_.forEach(f),this.h()},h(){p(t,"for",o="question-"+s[22])},m(m,_){R(m,e,_),d(e,t),d(t,n),d(e,i),d(e,a),a.innerHTML=l,d(e,u),g.m(e,null)},p(m,_){_&32&&r!==(r=m[23]+"")&&ke(n,r),_&32&&o!==(o="question-"+m[22])&&p(t,"for",o),_&32&&l!==(l=m[24]+"")&&(a.innerHTML=l),h===(h=c(m))&&g?g.p(m,_):(g.d(1),g=h(m),g&&(g.c(),g.m(e,null)))},d(m){m&&f(e),g.d()}}}function Vl(s){let e,t,r,n,o,i,a;function l(h,g){if(!h[0])return zl;if(h[1]&&!h[2])return Hl}let u=l(s),c=u&&u(s);return{c(){e=v("h2"),t=B("welcome, stranger!"),r=C(),n=v("p"),o=B("let's play a word game."),i=C(),c&&c.c(),a=ie(),this.h()},l(h){e=w(h,"H2",{class:!0});var g=E(e);t=H(g,"welcome, stranger!"),g.forEach(f),r=N(h),n=w(h,"P",{});var m=E(n);o=H(m,"let's play a word game."),m.forEach(f),i=N(h),c&&c.l(h),a=ie(),this.h()},h(){p(e,"class","svelte-1uum1kk")},m(h,g){R(h,e,g),d(e,t),R(h,r,g),R(h,n,g),d(n,o),R(h,i,g),c&&c.m(h,g),R(h,a,g)},p(h,[g]){u===(u=l(h))&&c?c.p(h,g):(c&&c.d(1),c=u&&u(h),c&&(c.c(),c.m(a.parentNode,a)))},i:te,o:te,d(h){h&&f(e),h&&f(r),h&&f(n),h&&f(i),c&&c.d(h),h&&f(a)}}}function Wl(s,e,t){let r,n,o;z(s,Sr,U=>t(21,n=U)),z(s,Be,U=>t(7,o=U));let{wodReady:i}=e,{loaded:a}=e,{hideButton:l}=e;const u=wt(),c=[{id:"name",limit:12,text:"What is your name?",detail:"e.g., <em>Jane Doe</em> or <em>J. Doe</em> or <em>Jane</em>",required:!0},{id:"location",limit:12,text:"Where are from/living?",detail:"Optional",required:!1},{id:"pronoun",text:"What are your preferred pronouns?",required:!0},{id:"plug",limit:48,text:"What would you like to plug (about yourself, something, etc) at the end of the game?",detail:"e.g., <em>Follow me on Twitter @wordsagainststrangers</em> or <em>Have a great day!</em>",required:!1}];let h=[],g,m,_;const b=()=>{const U=Math.floor(Math.random()*h.length);t(3,m=h[U].question)},S=async()=>{try{const U={game_id:n};[...c,{id:"bio",answer:r}].forEach(({id:J,answer:M})=>{U[J]=M}),await Ts({table:"wordgame_wod-info",data:[U]}),await Ir({table:"wordgame_games",column:"wod_info",value:!0,gameId:n}),t(0,i=!0)}catch(U){console.log(U)}};It(async()=>{try{const U=await Bl({gameId:n,column:"wod_info"});t(0,i=U),U||(h=await Ll(n),b())}catch{t(6,g=!0)}});const $=[[]];function I(U){c[U].answer=this.__value,t(5,c)}function T(U){c[U].answer=this.__value,t(5,c)}function y(U){c[U].answer=this.__value,t(5,c)}function P(U){c[U].answer=this.value,t(5,c)}function W(){_=this.value,t(4,_)}const L=()=>{be(Be,o="rules",o)},q=()=>u("play");return s.$$set=U=>{"wodReady"in U&&t(0,i=U.wodReady),"loaded"in U&&t(1,a=U.loaded),"hideButton"in U&&t(2,l=U.hideButton)},s.$$.update=()=>{s.$$.dirty&24&&(r=`Q: ${m}
A: ${_}`)},[i,a,l,m,_,c,g,o,u,b,S,I,$,T,y,P,W,L,q]}class Jl extends Q{constructor(e){super(),Z(this,e,Wl,Vl,X,{wodReady:0,loaded:1,hideButton:2})}}function Kl(s){let e,t;return{c(){e=v("p"),t=B(s[1])},l(r){e=w(r,"P",{});var n=E(e);t=H(n,s[1]),n.forEach(f)},m(r,n){R(r,e,n),d(e,t)},p(r,n){n&2&&ke(t,r[1])},d(r){r&&f(e)}}}function Yl(s){let e,t;return{c(){e=v("p"),t=B("Submitting responses...")},l(r){e=w(r,"P",{});var n=E(e);t=H(n,"Submitting responses..."),n.forEach(f)},m(r,n){R(r,e,n),d(e,t)},p:te,d(r){r&&f(e)}}}function Xl(s){let e,t,r,n;function o(l,u){return l[0]===void 0?Yl:Kl}let i=o(s),a=i(s);return{c(){e=v("h2"),t=B("Thanks for playing!"),r=C(),a.c(),n=ie()},l(l){e=w(l,"H2",{});var u=E(e);t=H(u,"Thanks for playing!"),u.forEach(f),r=N(l),a.l(l),n=ie()},m(l,u){R(l,e,u),d(e,t),R(l,r,u),a.m(l,u),R(l,n,u)},p(l,[u]){i===(i=o(l))&&a?a.p(l,u):(a.d(1),a=i(l),a&&(a.c(),a.m(n.parentNode,n)))},i:te,o:te,d(l){l&&f(e),l&&f(r),a.d(l),l&&f(n)}}}function Ql(s,e,t){let r,n,o;z(s,Sr,a=>t(2,n=a)),z(s,Le,a=>t(3,o=a));let i;return It(async()=>{try{const l=[].concat(...o.user).filter(c=>c.valid).map(c=>({game_id:n,round:c.round,text:c.text,timestamp:c.timestamp,points:c.points,lemmas:c.lemmas}));await Ts({table:"wordgame_wod-answers",data:l})?(t(0,i=!0),await Ir({table:"wordgame_games",column:"wod_played",value:!0,gameId:n})):t(0,i=!1)}catch{t(0,i=!1)}}),s.$$.update=()=>{s.$$.dirty&1&&t(1,r=i?"Game successfully submitted!":"There was an error submitting your game. Please contact the admin: russell@pudding.cool.")},[i,r]}class Zl extends Q{constructor(e){super(),Z(this,e,Ql,Xl,X,{})}}function Kn(s){let e,t,r,n;const o=[tu,eu],i=[];function a(l,u){return l[3]?0:1}return e=a(s),t=i[e]=o[e](s),{c(){t.c(),r=ie()},l(l){t.l(l),r=ie()},m(l,u){i[e].m(l,u),R(l,r,u),n=!0},p(l,u){let c=e;e=a(l),e===c?i[e].p(l,u):(fe(),j(i[c],1,1,()=>{i[c]=null}),de(),t=i[e],t?t.p(l,u):(t=i[e]=o[e](l),t.c()),O(t,1),t.m(r.parentNode,r))},i(l){n||(O(t),n=!0)},o(l){j(t),n=!1},d(l){i[e].d(l),l&&f(r)}}}function eu(s){let e,t;return e=new ea({props:{loaded:s[0]}}),e.$on("play",s[6]),{c(){G(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,n){x(e,r,n),t=!0},p(r,n){const o={};n&1&&(o.loaded=r[0]),e.$set(o)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){j(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function tu(s){let e,t,r;function n(i){s[7](i)}let o={loaded:s[0],hideButton:s[4]};return s[1]!==void 0&&(o.wodReady=s[1]),e=new Jl({props:o}),Gt.push(()=>ns(e,"wodReady",n)),e.$on("play",s[6]),{c(){G(e.$$.fragment)},l(i){F(e.$$.fragment,i)},m(i,a){x(e,i,a),r=!0},p(i,a){const l={};a&1&&(l.loaded=i[0]),a&16&&(l.hideButton=i[4]),!t&&a&2&&(t=!0,l.wodReady=i[1],ss(()=>t=!1)),e.$set(l)},i(i){r||(O(e.$$.fragment,i),r=!0)},o(i){j(e.$$.fragment,i),r=!1},d(i){V(e,i)}}}function Yn(s){let e,t;return e=new Do({}),{c(){G(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,n){x(e,r,n),t=!0},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){j(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function Xn(s){let e,t,r=s[3]&&Qn();return{c(){r&&r.c(),e=ie()},l(n){r&&r.l(n),e=ie()},m(n,o){r&&r.m(n,o),R(n,e,o),t=!0},p(n,o){n[3]?r?o&8&&O(r,1):(r=Qn(),r.c(),O(r,1),r.m(e.parentNode,e)):r&&(fe(),j(r,1,1,()=>{r=null}),de())},i(n){t||(O(r),t=!0)},o(n){j(r),t=!1},d(n){r&&r.d(n),n&&f(e)}}}function Qn(s){let e,t;return e=new Zl({}),{c(){G(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,n){x(e,r,n),t=!0},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){j(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function Zn(s){let e,t,r,n,o,i,a=s[5]+2+"",l,u,c,h,g;return{c(){e=v("div"),t=v("button"),r=B("next round"),n=C(),o=v("p"),i=B("round "),l=B(a),u=B(" of "),c=B(en),this.h()},l(m){e=w(m,"DIV",{class:!0});var _=E(e);t=w(_,"BUTTON",{class:!0});var b=E(t);r=H(b,"next round"),b.forEach(f),n=N(_),o=w(_,"P",{class:!0});var S=E(o);i=H(S,"round "),l=H(S,a),u=H(S," of "),c=H(S,en),S.forEach(f),_.forEach(f),this.h()},h(){p(t,"class","svelte-xnr8c5"),p(o,"class","svelte-xnr8c5"),p(e,"class","mid svelte-xnr8c5")},m(m,_){R(m,e,_),d(e,t),d(t,r),d(e,n),d(e,o),d(o,i),d(o,l),d(o,u),d(o,c),h||(g=ce(t,"click",s[6]),h=!0)},p(m,_){_&32&&a!==(a=m[5]+2+"")&&ke(l,a)},d(m){m&&f(e),h=!1,g()}}}function ru(s){let e,t,r,n,o,i=s[2]==="pre"&&Kn(s),a=s[2]!=="pre"&&Yn(),l=s[2]==="post"&&Xn(s),u=s[2]==="mid"&&Zn(s);return{c(){i&&i.c(),e=C(),a&&a.c(),t=C(),l&&l.c(),r=C(),u&&u.c(),n=ie()},l(c){i&&i.l(c),e=N(c),a&&a.l(c),t=N(c),l&&l.l(c),r=N(c),u&&u.l(c),n=ie()},m(c,h){i&&i.m(c,h),R(c,e,h),a&&a.m(c,h),R(c,t,h),l&&l.m(c,h),R(c,r,h),u&&u.m(c,h),R(c,n,h),o=!0},p(c,[h]){c[2]==="pre"?i?(i.p(c,h),h&4&&O(i,1)):(i=Kn(c),i.c(),O(i,1),i.m(e.parentNode,e)):i&&(fe(),j(i,1,1,()=>{i=null}),de()),c[2]!=="pre"?a?h&4&&O(a,1):(a=Yn(),a.c(),O(a,1),a.m(t.parentNode,t)):a&&(fe(),j(a,1,1,()=>{a=null}),de()),c[2]==="post"?l?(l.p(c,h),h&4&&O(l,1)):(l=Xn(c),l.c(),O(l,1),l.m(r.parentNode,r)):l&&(fe(),j(l,1,1,()=>{l=null}),de()),c[2]==="mid"?u?u.p(c,h):(u=Zn(c),u.c(),u.m(n.parentNode,n)):u&&(u.d(1),u=null)},i(c){o||(O(i),O(a),O(l),o=!0)},o(c){j(i),j(a),j(l),o=!1},d(c){i&&i.d(c),c&&f(e),a&&a.d(c),c&&f(t),l&&l.d(c),c&&f(r),u&&u.d(c),c&&f(n)}}}function nu(s,e,t){let r,n,o,i,a,l;z(s,Tr,m=>t(2,n=m)),z(s,bt,m=>t(3,o=m)),z(s,Ke,m=>t(5,i=m)),z(s,Te,m=>t(8,a=m)),z(s,gt,m=>t(9,l=m));let{loaded:u}=e,c;const h=async()=>{o&&n==="pre"?await Ir({table:"wordgame_games",column:"wod_started",value:!0,gameId:l}):n==="mid"&&be(Te,a=!1,a),be(Ke,i+=1,i)};function g(m){c=m,t(1,c)}return s.$$set=m=>{"loaded"in m&&t(0,u=m.loaded)},s.$$.update=()=>{s.$$.dirty&14&&t(4,r=o&&n==="pre"&&!c)},[u,c,n,o,r,i,h,g]}class su extends Q{constructor(e){super(),Z(this,e,nu,ru,X,{loaded:0})}}async function iu(s){const e=`https://pudding.cool/games/words-against-strangers-data/game-clues/${s}.csv?version=${Date.now()}`,r=(await xt(e)).map(n=>({...n,round:+n.round}));return r.sort((n,o)=>Bs(n.round,o.round)),r}async function ou(s){const e=[];for(let t of s){const r=`https://pudding.cool/games/words-against-strangers-data/clue-answers/${t}.csv?version=${Date.now()}`,o=(await xt(r)).map(i=>({...i,points:+i.points}));e.push(o)}return e}async function au(s){return await(await fetch(s)).json()}function es(s){let e,t;return e=new ai({}),{c(){G(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,n){x(e,r,n),t=!0},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){j(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function ts(s){let e,t,r;return t=new io({props:{clues:s[0],answers:s[1]}}),{c(){e=v("section"),G(t.$$.fragment),this.h()},l(n){e=w(n,"SECTION",{id:!0});var o=E(e);F(t.$$.fragment,o),o.forEach(f),this.h()},h(){p(e,"id","play")},m(n,o){R(n,e,o),x(t,e,null),r=!0},p(n,o){const i={};o&1&&(i.clues=n[0]),o&2&&(i.answers=n[1]),t.$set(i)},i(n){r||(O(t.$$.fragment,n),r=!0)},o(n){j(t.$$.fragment,n),r=!1},d(n){n&&f(e),V(t)}}}function lu(s){let e,t,r,n,o,i=s[5]&&es(),a=s[4]&&ts(s);return n=new su({props:{loaded:s[2]}}),{c(){i&&i.c(),e=C(),a&&a.c(),t=C(),r=v("section"),G(n.$$.fragment),this.h()},l(l){i&&i.l(l),e=N(l),a&&a.l(l),t=N(l),r=w(l,"SECTION",{id:!0,class:!0});var u=E(r);F(n.$$.fragment,u),u.forEach(f),this.h()},h(){p(r,"id","modal"),p(r,"class","svelte-p31hnx"),Y(r,"visible",s[3])},m(l,u){i&&i.m(l,u),R(l,e,u),a&&a.m(l,u),R(l,t,u),R(l,r,u),x(n,r,null),o=!0},p(l,[u]){l[5]?i?u&32&&O(i,1):(i=es(),i.c(),O(i,1),i.m(e.parentNode,e)):i&&(fe(),j(i,1,1,()=>{i=null}),de()),l[4]?a?(a.p(l,u),u&16&&O(a,1)):(a=ts(l),a.c(),O(a,1),a.m(t.parentNode,t)):a&&(fe(),j(a,1,1,()=>{a=null}),de());const c={};u&4&&(c.loaded=l[2]),n.$set(c),u&8&&Y(r,"visible",l[3])},i(l){o||(O(i),O(a),O(n.$$.fragment,l),o=!0)},o(l){j(i),j(a),j(n.$$.fragment,l),o=!1},d(l){i&&i.d(l),l&&f(e),a&&a.d(l),l&&f(t),l&&f(r),V(n)}}}function uu(s,e,t){let r,n,o,i,a,l,u,c;z(s,gt,b=>t(5,o=b)),z(s,Tr,b=>t(6,i=b)),z(s,Te,b=>t(7,a=b)),z(s,Ke,b=>t(8,l=b)),z(s,Sr,b=>t(10,u=b)),z(s,bt,b=>t(11,c=b));let h,g,m;const _=async()=>{if(c)return u;const S=`https://pudding.cool/games/words-against-strangers-data/games.json?version=${Date.now()}`,{updated:$,games:I}=await au(S);console.log("updated:",$);const T=I.find(y=>y.live);if(T)return T.id};return It(async()=>{if(be(gt,o=await _(),o),o){const b=await iu(o);t(0,h=b.map(S=>S.clue)),t(1,g=await ou(b.map(S=>S.clueId)))}t(2,m=!0)}),s.$$.update=()=>{s.$$.dirty&263&&t(4,r=m&&h&&g&&l>=0),s.$$.dirty&192,s.$$.dirty&192&&t(3,n=a||["pre","post"].includes(i))},[h,g,m,n,r,o,i,a,l]}class cu extends Q{constructor(e){super(),Z(this,e,uu,lu,X,{})}}function hu(s){let e,t,r,n,o,i,a,l,u,c,h,g,m,_,b,S,$,I,T,y,P,W,L,q,U,re,D,J,M,k,A,K,ee,ve,le,oe,pe,ye,Pe,Xe,Re,Ae,Qe,Ce,Ne,Ze,He,Se,$e,et,tt,Kt,ze,yt,Yt,Xt,Qt,De,rt,nt,Zt,er,st,tr,rr,it,qe,nr,sr,Pr;return{c(){e=v("section"),t=v("div"),r=v("h3"),n=v("span"),o=B("how to play"),i=C(),a=v("ul"),l=v("li"),u=v("h4"),c=v("span"),h=B("goal"),g=C(),m=v("p"),_=B("score more points than the stranger in four, one-minute rounds."),b=C(),S=v("li"),$=v("h4"),I=v("span"),T=B("gameplay"),y=C(),P=v("p"),W=B("enter as many words as possible that satisfy a clue."),L=C(),q=v("details"),U=v("summary"),re=B("more details"),D=C(),J=v("ul"),M=v("li"),k=v("h5"),A=B("sample clue"),K=B(`
							:
							`),ee=v("em"),ve=B("starts with "),le=v("h5"),oe=B("A"),pe=B(`
							answers: `),ye=v("em"),Pe=B("apple"),Xe=B(", "),Re=v("em"),Ae=B("awesome"),Qe=B(", "),Ce=v("em"),Ne=B("activate"),Ze=B(", etc."),He=C(),Se=v("li"),$e=v("h5"),et=B("blocking"),tt=B(`
							whoever gets a word first gets points. If the stranger enters the word
							before you, you get no points, and vice versa.`),Kt=C(),ze=v("li"),yt=v("h5"),Yt=B("obscure = more points"),Xt=B(`
							you get more points for less commonly used words.`),Qt=C(),De=v("li"),rt=v("h4"),nt=v("span"),Zt=B("other rules"),er=C(),st=v("p"),tr=B(`no proper nouns, hyphenated words, or varations (e.g., plurals) of a
					played word.`),rr=C(),it=v("p"),qe=v("button"),nr=B("close"),this.h()},l(Ge){e=w(Ge,"SECTION",{class:!0});var ot=E(e);t=w(ot,"DIV",{});var at=E(t);r=w(at,"H3",{class:!0});var Rr=E(r);n=w(Rr,"SPAN",{class:!0});var Ar=E(n);o=H(Ar,"how to play"),Ar.forEach(f),Rr.forEach(f),i=N(at),a=w(at,"UL",{class:!0});var lt=E(a);l=w(lt,"LI",{class:!0});var Ct=E(l);u=w(Ct,"H4",{class:!0});var Cr=E(u);c=w(Cr,"SPAN",{class:!0});var Nr=E(c);h=H(Nr,"goal"),Nr.forEach(f),Cr.forEach(f),g=N(Ct),m=w(Ct,"P",{class:!0});var Dr=E(m);_=H(Dr,"score more points than the stranger in four, one-minute rounds."),Dr.forEach(f),Ct.forEach(f),b=N(lt),S=w(lt,"LI",{class:!0});var ut=E(S);$=w(ut,"H4",{class:!0});var Ur=E($);I=w(Ur,"SPAN",{class:!0});var Mr=E(I);T=H(Mr,"gameplay"),Mr.forEach(f),Ur.forEach(f),y=N(ut),P=w(ut,"P",{class:!0});var Lr=E(P);W=H(Lr,"enter as many words as possible that satisfy a clue."),Lr.forEach(f),L=N(ut),q=w(ut,"DETAILS",{});var Nt=E(q);U=w(Nt,"SUMMARY",{});var Br=E(U);re=H(Br,"more details"),Br.forEach(f),D=N(Nt),J=w(Nt,"UL",{class:!0});var ct=E(J);M=w(ct,"LI",{class:!0});var Ee=E(M);k=w(Ee,"H5",{});var Hr=E(k);A=H(Hr,"sample clue"),Hr.forEach(f),K=H(Ee,`
							:
							`),ee=w(Ee,"EM",{class:!0});var ir=E(ee);ve=H(ir,"starts with "),le=w(ir,"H5",{});var zr=E(le);oe=H(zr,"A"),zr.forEach(f),ir.forEach(f),pe=H(Ee,`
							answers: `),ye=w(Ee,"EM",{});var qr=E(ye);Pe=H(qr,"apple"),qr.forEach(f),Xe=H(Ee,", "),Re=w(Ee,"EM",{});var Gr=E(Re);Ae=H(Gr,"awesome"),Gr.forEach(f),Qe=H(Ee,", "),Ce=w(Ee,"EM",{});var Fr=E(Ce);Ne=H(Fr,"activate"),Fr.forEach(f),Ze=H(Ee,", etc."),Ee.forEach(f),He=N(ct),Se=w(ct,"LI",{class:!0});var or=E(Se);$e=w(or,"H5",{});var xr=E($e);et=H(xr,"blocking"),xr.forEach(f),tt=H(or,`
							whoever gets a word first gets points. If the stranger enters the word
							before you, you get no points, and vice versa.`),or.forEach(f),Kt=N(ct),ze=w(ct,"LI",{class:!0});var ar=E(ze);yt=w(ar,"H5",{});var Vr=E(yt);Yt=H(Vr,"obscure = more points"),Vr.forEach(f),Xt=H(ar,`
							you get more points for less commonly used words.`),ar.forEach(f),ct.forEach(f),Nt.forEach(f),ut.forEach(f),Qt=N(lt),De=w(lt,"LI",{class:!0});var Dt=E(De);rt=w(Dt,"H4",{class:!0});var Wr=E(rt);nt=w(Wr,"SPAN",{class:!0});var Jr=E(nt);Zt=H(Jr,"other rules"),Jr.forEach(f),Wr.forEach(f),er=N(Dt),st=w(Dt,"P",{class:!0});var Kr=E(st);tr=H(Kr,`no proper nouns, hyphenated words, or varations (e.g., plurals) of a
					played word.`),Kr.forEach(f),Dt.forEach(f),lt.forEach(f),rr=N(at),it=w(at,"P",{class:!0});var Yr=E(it);qe=w(Yr,"BUTTON",{class:!0});var Xr=E(qe);nr=H(Xr,"close"),Xr.forEach(f),Yr.forEach(f),at.forEach(f),ot.forEach(f),this.h()},h(){p(n,"class","chunk combo-user svelte-vuzogt"),p(r,"class","svelte-vuzogt"),p(c,"class","chunk combo-wod svelte-vuzogt"),p(u,"class","a svelte-vuzogt"),p(m,"class","svelte-vuzogt"),p(l,"class","svelte-vuzogt"),p(I,"class","chunk combo-wod svelte-vuzogt"),p($,"class","b svelte-vuzogt"),p(P,"class","svelte-vuzogt"),p(ee,"class","clue svelte-vuzogt"),p(M,"class","svelte-vuzogt"),p(Se,"class","svelte-vuzogt"),p(ze,"class","svelte-vuzogt"),p(J,"class","inner svelte-vuzogt"),p(S,"class","svelte-vuzogt"),p(nt,"class","chunk combo-wod svelte-vuzogt"),p(rt,"class","c svelte-vuzogt"),p(st,"class","svelte-vuzogt"),p(De,"class","svelte-vuzogt"),p(a,"class","svelte-vuzogt"),p(qe,"class","svelte-vuzogt"),p(it,"class","close svelte-vuzogt"),p(e,"class","svelte-vuzogt"),Y(e,"visible",s[0]==="rules")},m(Ge,ot){R(Ge,e,ot),d(e,t),d(t,r),d(r,n),d(n,o),d(t,i),d(t,a),d(a,l),d(l,u),d(u,c),d(c,h),d(l,g),d(l,m),d(m,_),d(a,b),d(a,S),d(S,$),d($,I),d(I,T),d(S,y),d(S,P),d(P,W),d(S,L),d(S,q),d(q,U),d(U,re),d(q,D),d(q,J),d(J,M),d(M,k),d(k,A),d(M,K),d(M,ee),d(ee,ve),d(ee,le),d(le,oe),d(M,pe),d(M,ye),d(ye,Pe),d(M,Xe),d(M,Re),d(Re,Ae),d(M,Qe),d(M,Ce),d(Ce,Ne),d(M,Ze),d(J,He),d(J,Se),d(Se,$e),d($e,et),d(Se,tt),d(J,Kt),d(J,ze),d(ze,yt),d(yt,Yt),d(ze,Xt),d(a,Qt),d(a,De),d(De,rt),d(rt,nt),d(nt,Zt),d(De,er),d(De,st),d(st,tr),d(t,rr),d(t,it),d(it,qe),d(qe,nr),sr||(Pr=ce(qe,"click",s[1]),sr=!0)},p(Ge,[ot]){ot&1&&Y(e,"visible",Ge[0]==="rules")},i:te,o:te,d(Ge){Ge&&f(e),sr=!1,Pr()}}}function fu(s,e,t){let r;return z(s,Be,o=>t(0,r=o)),[r,()=>{be(Be,r=void 0,r)}]}class du extends Q{constructor(e){super(),Z(this,e,fu,hu,X,{})}}function mu(s){let e,t,r,n,o,i,a,l,u,c,h,g,m,_,b,S,$;return{c(){e=v("section"),t=v("div"),r=v("h3"),n=v("span"),o=B("about the game"),i=C(),a=v("p"),l=C(),u=v("p"),c=C(),h=v("p"),g=C(),m=v("p"),_=v("button"),b=B("close"),this.h()},l(I){e=w(I,"SECTION",{class:!0});var T=E(e);t=w(T,"DIV",{});var y=E(t);r=w(y,"H3",{class:!0});var P=E(r);n=w(P,"SPAN",{class:!0});var W=E(n);o=H(W,"about the game"),W.forEach(f),P.forEach(f),i=N(y),a=w(y,"P",{class:!0});var L=E(a);L.forEach(f),l=N(y),u=w(y,"P",{class:!0});var q=E(u);q.forEach(f),c=N(y),h=w(y,"P",{class:!0});var U=E(h);U.forEach(f),g=N(y),m=w(y,"P",{class:!0});var re=E(m);_=w(re,"BUTTON",{class:!0});var D=E(_);b=H(D,"close"),D.forEach(f),re.forEach(f),y.forEach(f),T.forEach(f),this.h()},h(){p(n,"class","chunk combo-user svelte-17r4v8t"),p(r,"class","svelte-17r4v8t"),p(a,"class","svelte-17r4v8t"),p(u,"class","svelte-17r4v8t"),p(h,"class","svelte-17r4v8t"),p(_,"class","svelte-17r4v8t"),p(m,"class","close svelte-17r4v8t"),p(e,"class","svelte-17r4v8t"),Y(e,"visible",s[0]==="about")},m(I,T){R(I,e,T),d(e,t),d(t,r),d(r,n),d(n,o),d(t,i),d(t,a),a.innerHTML=s[1],d(t,l),d(t,u),u.innerHTML=s[2],d(t,c),d(t,h),h.innerHTML=s[3],d(t,g),d(t,m),d(m,_),d(_,b),S||($=[ce(_,"click",s[4]),ce(e,"click",s[4])],S=!0)},p(I,[T]){T&1&&Y(e,"visible",I[0]==="about")},i:te,o:te,d(I){I&&f(e),S=!1,Ye($)}}}function pu(s,e,t){let r;z(s,Be,l=>t(0,r=l));const{byline:n,source:o,other:i}=is("copy");return[r,n,o,i,()=>{be(Be,r=void 0,r)}]}class gu extends Q{constructor(e){super(),Z(this,e,pu,mu,X,{})}}function _u(s){let e,t,r,n,o,i,a;return t=new cu({}),n=new du({}),i=new gu({}),{c(){e=v("article"),G(t.$$.fragment),r=C(),G(n.$$.fragment),o=C(),G(i.$$.fragment),this.h()},l(l){e=w(l,"ARTICLE",{class:!0});var u=E(e);F(t.$$.fragment,u),r=N(u),F(n.$$.fragment,u),o=N(u),F(i.$$.fragment,u),u.forEach(f),this.h()},h(){p(e,"class","svelte-17xk6p2")},m(l,u){R(l,e,u),x(t,e,null),d(e,r),x(n,e,null),d(e,o),x(i,e,null),a=!0},p:te,i(l){a||(O(t.$$.fragment,l),O(n.$$.fragment,l),O(i.$$.fragment,l),a=!0)},o(l){j(t.$$.fragment,l),j(n.$$.fragment,l),j(i.$$.fragment,l),a=!1},d(l){l&&f(e),V(t),V(n),V(i)}}}class Tu extends Q{constructor(e){super(),Z(this,e,null,_u,X,{})}}function Su(){console.log("--- --- --- --- --- ---"),console.log("svelte-starter: 3.1.0"),console.log("build: 2022-08-25-10:36"),console.log("--- --- --- --- --- ---")}export{Tu as A,ku as M,Bl as g,Eu as s,Su as v};
